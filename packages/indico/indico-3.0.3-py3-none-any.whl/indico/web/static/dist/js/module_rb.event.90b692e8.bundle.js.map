{"version":3,"sources":["webpack:///indico/web/modules/rb/event/client/js/index.js"],"names":["$","document","ready","on","e","$target","currentTarget","objectId","val","$bookBtn","closest","find","linkType","data","params","values","link_type","link_id","recurrence","number","interval","sd","serializeDate","start_dt","st","serializeTime","et","end_dt","toggleClass","attr","rbURL","path"],"mappings":"4uBAWAA,EAAEC,UAAUC,OAAM,KAChBF,EAAE,iCAAiCG,GAAG,UAAUC,IAC9C,MAAMC,EAAUL,EAAEI,EAAEE,eACdC,EAAWF,EAAQG,MACnBC,EAAWJ,EAAQK,QAAQ,qBAAqBC,KAAK,gBACrDC,EAAWP,EAAQQ,KAAK,aAC9B,IAAIC,EAAS,GACb,GAAIP,EAAU,CACZ,MAAMQ,EAASV,EAAQK,QAAQ,qBAAqBG,KAAK,UAAUN,GACnEO,EAAS,CACPE,UAAWJ,EACXK,QAASV,EACTW,WAAY,SACZC,OAAQ,EACRC,SAAU,OACVC,IAAIC,QAAcP,EAAOQ,UACzBC,IAAIC,QAAcV,EAAOQ,UACzBG,IAAID,QAAcV,EAAOY,SAG7BlB,EAASmB,YAAY,YAAarB,GAAUsB,KAAK,OAAQC,E,qWAAM,CAAD,CAAEC,KAAM,QAAWjB,a","file":"js/module_rb.event.90b692e8.bundle.js","sourcesContent":["// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport rbURL from 'indico-url:rb.roombooking';\n\nimport {serializeDate, serializeTime} from 'indico/utils/date';\n\n$(document).ready(() => {\n  $('#contribution, #session_block').on('change', e => {\n    const $target = $(e.currentTarget);\n    const objectId = $target.val();\n    const $bookBtn = $target.closest('.searchable-field').find('.js-book-btn');\n    const linkType = $target.data('link-type');\n    let params = {};\n    if (objectId) {\n      const values = $target.closest('.searchable-field').data('values')[objectId];\n      params = {\n        link_type: linkType,\n        link_id: objectId,\n        recurrence: 'single',\n        number: 1,\n        interval: 'week',\n        sd: serializeDate(values.start_dt),\n        st: serializeTime(values.start_dt),\n        et: serializeTime(values.end_dt),\n      };\n    }\n    $bookBtn.toggleClass('disabled', !objectId).attr('href', rbURL({path: 'book', ...params}));\n  });\n});\n"],"sourceRoot":""}