(self.webpackChunk=self.webpackChunk||[]).push([[7155],{69689:(t,e,n)=>{var s=n(42406).default;!function(t){function e(t,e,n){n=n||!1;const o=$.Deferred();return $.ajax({url:t,type:"GET",dataType:"json",timeout:1e4}).done((function(t){let n=!0;s.each(e,(function(e,s){e!==t[s]&&(n=!1)})),o.resolve(n)})).fail((function(t,e){let s=$T.gettext("Unknown error while contacting the Community Hub");"rejected"===t.state()&&200===t.status&&"parsererror"===e?s=$T.gettext("Internal error: Parse error on the reply of the Community Hub."):"rejected"===t.state()&&0===t.status&&"error"===e?s=$T.gettext("Unable to contact the Community Hub."):"rejected"===t.state()&&0===t.status&&"timeout"===e?s=$T.gettext("The connection to the Community Hub timed out."):("rejected"===t.state()&&404===t.status||"NOT FOUND"===t.statusText)&&(s=$T.gettext("Your server is not registered with the Community Hub.")),n||$("<div>",{class:"message-text",html:s}).appendTo($("<div>",{class:"error-message-box fixed-width"}).appendTo($("#flashed-messages"))),o.reject(s)})),o.promise()}t.setupCephalopodSettings=function(t,n){$("#joined").on("change",(function(){$("#sync-button").prop("disabled",!this.checked)}));const s=$.Deferred();$.when(s).always((function(t){$("#tracking-status").attr("class",`action-box ${t.class}`).find(".section > .icon").attr("class",`icon ${t.icon}`).next(".text").children(".label").html(t.title).next().html(t.subtitle)})),n?e(t,{enabled:$("#joined").prop("checked"),contact:$("#contact_name").val(),email:$("#contact_email").val(),url:$("#server-url").html(),organization:$("#affiliation").html()},!0).done((function(t){t?s.resolve({title:$T.gettext("Synchronized"),subtitle:$T.gettext("This server is registered as part of the community and is up to date."),class:"highlight",icon:"icon-checkmark"}):($("#sync-tracking").show(),s.resolve({title:$T.gettext("Out of sync"),subtitle:$T.gettext("Your Indico server is out of sync. Synchronize it with the button on the right."),class:"warning",icon:"icon-warning"}))})).fail((function(t){s.reject({title:$T.gettext("Error!"),subtitle:t,class:"danger",icon:"icon-disable"})})):s.resolve({title:$T.gettext("Disabled"),subtitle:$T.gettext("This server is not registered as part of the community."),class:"disabled",icon:"icon-close"})},t.checkCephalopodSynced=function(t,n,s){e(t,n).done((function(t){t||$("<div>",{class:"message-text",html:$T.gettext('Your Indico server is not synchronized with the Community Hub! You can solve this <a href="{0}">here</a>.').format(s)}).appendTo($("<div>",{class:"warning-message-box fixed-width"}).appendTo($("#flashed-messages")))}))}}(window)}},t=>{"use strict";t.O(0,[8592],(()=>{return e=69689,t(t.s=e);var e}));t.O()}]);
//# sourceMappingURL=module_cephalopod.0325d848.bundle.js.map