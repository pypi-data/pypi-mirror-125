"use strict";(self.webpackChunkrichie_education=self.webpackChunkrichie_education||[]).push([[84801],{84801:function(e,t,r){r.r(t),r.d(t,{default:function(){return me}}),r(26364),r(86632),r(10853),r(61928),r(54883),r(45007),r(68995),r(18821),r(54994),r(4845);var n=r(89526),a=r(34323),o=(r(73214),r(33130),function(e){var t=e.course,r=(0,a.YB)();return n.createElement("div",{className:"course-glimpse-footer"},n.createElement("div",{className:"course-glimpse-footer__date"},n.createElement("svg",{"aria-hidden":!0,role:"img",className:"icon"},n.createElement("use",{xlinkHref:"#icon-calendar"})),t.state.text.charAt(0).toUpperCase()+t.state.text.substr(1)+(t.state.datetime?" ".concat(r.formatDate(new Date(t.state.datetime),{year:"numeric",month:"short",day:"numeric"})):"")))}),l=(0,a.vU)({cover:{id:"components.CourseGlimpse.cover",defaultMessage:[{type:0,value:"Cover"}]}}),i=n.memo((function(e){var t=e.context,r=e.course;return n.createElement("a",{className:"course-glimpse course-glimpse--link",href:r.absolute_url},n.createElement("div",{className:"course-glimpse__media"},r.cover_image?n.createElement("img",{alt:"",sizes:r.cover_image.sizes,src:r.cover_image.src,srcSet:r.cover_image.srcset}):n.createElement("div",{className:"course-glimpse__media__empty"},n.createElement(a._H,l.cover))),n.createElement("div",{className:"course-glimpse__content"},r.icon?n.createElement("div",{className:"course-glimpse__icon"},n.createElement("div",{className:"course-glimpse__band",style:{background:r.icon.color}},r.icon.title),n.createElement("img",{src:r.icon.src,srcSet:r.icon.srcset,sizes:r.icon.sizes,alt:""})):null,n.createElement("div",{className:"course-glimpse__wrapper"},n.createElement("p",{className:"course-glimpse__title"},r.title),r.organization_highlighted_cover_image?n.createElement("div",{className:"course-glimpse__organization-logo"},n.createElement("img",{alt:"",sizes:r.organization_highlighted_cover_image.sizes,src:r.organization_highlighted_cover_image.src,srcSet:r.organization_highlighted_cover_image.srcset})):null,n.createElement("div",{className:"course-glimpse__organization"},n.createElement("svg",{"aria-hidden":!0,role:"img",className:"icon"},n.createElement("use",{xlinkHref:"#icon-org"})),n.createElement("span",null,r.organization_highlighted)),n.createElement("div",{className:"course-glimpse__code"},n.createElement("svg",{"aria-hidden":!0,role:"img",className:"icon"},n.createElement("use",{xlinkHref:"#icon-barcode"})),n.createElement("span",null,r.code||"-"))),n.createElement(o,{context:t,course:r})))}),(function(e,t){return e.context===t.context&&e.course.id===t.course.id}));function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var u=(0,a.vU)({courseCount:{id:"components.CourseGlimpseList.courseCount",defaultMessage:[{type:0,value:"Showing "},{type:2,style:null,value:"start"},{type:0,value:" to "},{type:2,style:null,value:"end"},{type:0,value:" of "},{type:2,style:null,value:"courseCount"},{type:0,value:" "},{type:6,pluralType:"cardinal",value:"courseCount",offset:0,options:{one:{value:[{type:0,value:"course"}]},other:{value:[{type:0,value:"courses"}]}}},{type:0,value:" matching your search"}]}}),s=function(e){var t=e.context,r=e.courses,o=e.meta;return n.createElement("div",{className:"course-glimpse-list"},n.createElement("div",{className:"course-glimpse-list__count"},n.createElement(a._H,c({},u.courseCount,{values:{courseCount:o.total_count,end:o.offset+o.count,start:o.offset+1}}))),r.map((function(e){return e&&n.createElement(i,{context:t,course:e,key:e.id})})))},f=(r(80174),r(19701),r(47026));function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=(0,a.vU)({currentlyReadingLastPageN:{id:"components.PaginateCourseSearch.currentlyReadingLastPageN",defaultMessage:[{type:0,value:"Currently reading last page "},{type:1,value:"page"}]},currentlyReadingPageN:{id:"components.PaginateCourseSearch.currentlyReadingPageN",defaultMessage:[{type:0,value:"Currently reading page "},{type:1,value:"page"}]},lastPageN:{id:"components.PaginateCourseSearch.lastPageN",defaultMessage:[{type:0,value:"Last page "},{type:1,value:"page"}]},nextPageN:{id:"components.PaginateCourseSearch.nextPageN",defaultMessage:[{type:0,value:"Next page "},{type:1,value:"page"}]},pageN:{id:"components.PaginateCourseSearch.pageN",defaultMessage:[{type:0,value:"Page "},{type:1,value:"page"}]},pagination:{id:"components.PaginateCourseSearch.pagination",defaultMessage:[{type:0,value:"Pagination"}]},previousPageN:{id:"components.PaginateCourseSearch.previousPageN",defaultMessage:[{type:0,value:"Previous page "},{type:1,value:"page"}]}}),y=function(e){var t,r,o=e.courseSearchTotalCount,l=(t=(0,n.useState)(Math.random()),r=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],i=(0,f.T)(),c=i.courseSearchParams,u=i.dispatchCourseSearchParamsUpdate,s=Number(c.limit),y=Number(c.offset)/s+1,v=Math.ceil(o/s);if(1===v)return null;var h=[1,y-2==3?y-3:-1,y-2,y-1,y,y+1,y+2,y+3===v-1?y+3:-1,v].filter((function(e){return e>0})).filter((function(e){return e<=v})).filter((function(e,t,r){return e!==r[t-1]}));return n.createElement("div",{className:"pagination"},n.createElement("div",{id:"pagination-label-".concat(l),className:"offscreen"},n.createElement(a._H,d.pagination)),n.createElement("nav",{"aria-labelledby":"pagination-label-".concat(l)},n.createElement("ul",{className:"pagination__list"},h.map((function(e,t){return n.createElement(n.Fragment,{key:e},e>(h[t-1]||0)+1&&n.createElement("li",{className:"pagination__item pagination__item--placeholder"},"..."),e===y?n.createElement("li",{className:"pagination__item pagination__item--current"},n.createElement("span",{className:"pagination__page-number"},n.createElement("span",{className:"offscreen"},e===v?n.createElement(a._H,m({},d.currentlyReadingLastPageN,{values:{page:e}})):n.createElement(a._H,m({},d.currentlyReadingPageN,{values:{page:e}}))),n.createElement("span",{"aria-hidden":!0},1===e?n.createElement(a._H,m({},d.pageN,{values:{page:e}})):e))):n.createElement("li",{className:"pagination__item"},n.createElement("button",{className:"pagination__page-number",onClick:function(){return u({offset:String((e-1)*s),type:f.Y.pageChange})}},n.createElement("span",{className:"offscreen"},e===v?n.createElement(a._H,m({},d.lastPageN,{values:{page:e}})):e===y-1?n.createElement(a._H,m({},d.previousPageN,{values:{page:e}})):e===y+1?n.createElement(a._H,m({},d.nextPageN,{values:{page:e}})):n.createElement(a._H,m({},d.pageN,{values:{page:e}}))),n.createElement("span",{"aria-hidden":!0},1===e?n.createElement(a._H,m({},d.pageN,{values:{page:e}})):e))))})))))},v=(r(31807),r(19457),r(96900),r(18183),r(19985),r(80044),r(55862),r(21496),r(32390),r(35054),r(80238),r(6208),r(12938),r(30659)),h=r.n(v),g=r(69701),b=r(95418),_=r(80042);function E(e,t,r,n,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,a)}function S(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function l(e){E(o,n,a,l,i,"next",e)}function i(e){E(o,n,a,l,i,"throw",e)}l(void 0)}))}}function w(e){return O.apply(this,arguments)}function O(){return(O=S(regeneratorRuntime.mark((function e(t){var r,n,a,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:b.e_,e.prev=1,e.next=4,fetch("/api/v1.0/".concat(t,"/?").concat((0,g.stringify)(r,{arrayFormat:"comma"})),{headers:{"Content-Type":"application/json"}});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("Failed to get list from ".concat(t," search : ").concat(n.status,"."));case 7:return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",{status:_.e.SUCCESS,content:a});case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",{status:_.e.FAILURE,error:e.t0});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}var N=r(3787);function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t,r,n,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,a)}function k(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function l(e){x(o,n,a,l,i,"next",e)}function i(e){x(o,n,a,l,i,"throw",e)}l(void 0)}))}}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var T=(0,a.vU)({closeButton:{id:"components.SearchFilterGroupModal.closeModal",defaultMessage:[{type:0,value:"Close"}]},error:{id:"components.SearchFilterGroupModal.error",defaultMessage:[{type:0,value:"There was an error while searching for "},{type:1,value:"filterName"},{type:0,value:"."}]},inputLabel:{id:"components.SearchFilterGroupModal.inputLabel",defaultMessage:[{type:0,value:"Search for filters to add"}]},inputPlaceholder:{id:"components.SearchFilterGroupModal.inputPlaceholder",defaultMessage:[{type:0,value:"Search in "},{type:1,value:"filterName"}]},modalTitle:{id:"components.SearchFilterGroupModal.modalTitle",defaultMessage:[{type:0,value:"Add filters for "},{type:1,value:"filterName"}]},moreOptionsButton:{id:"components.SearchFilterGroupModal.moreOptionsButton",defaultMessage:[{type:0,value:"More options"}]},queryTooShort:{id:"components.SearchFilterGroupModal.queryTooShort",defaultMessage:[{type:0,value:"Type at least 3 characters to start searching."}]}}),F="undefined"!=typeof jest;F||h().setAppElement("#modal-exclude");var R=function(e){var t=e.filter,r=(0,a.YB)(),o=M((0,n.useState)(!1),2),l=o[0],i=o[1],c=M((0,n.useState)([]),2),u=c[0],s=c[1],m=M((0,n.useState)(""),2),p=m[0],d=m[1],y=M((0,n.useState)(null),2),v=y[0],g=y[1],b=(0,f.T)(),E=b.courseSearchParams,S=b.dispatchCourseSearchParamsUpdate;return(0,n.useEffect)((function(){l||(s([]),d(""),g(null))}),[l]),(0,N.b)(k(regeneratorRuntime.mark((function e(){var r,n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&!(p.length>0&&p.length<3)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,w(t.name,{limit:"20",offset:"0",query:p});case 4:if((n=e.sent).status!==_.e.FAILURE){e.next=8;break}return s([]),e.abrupt("return",g(T.error));case 8:return e.next=10,w("courses",j(j({},E),{},(C(r={},"".concat(t.name,"_aggs"),n.content.objects.map((function(e){return e.id}))),C(r,"scope","filters"),r)));case 10:if((a=e.sent).status!==_.e.FAILURE){e.next=14;break}return s([]),e.abrupt("return",g(T.error));case 14:o=a.content.filters[t.name].values,g(null),s(o);case 17:case"end":return e.stop()}}),e)}))),[l,p]),n.createElement(n.Fragment,null,n.createElement("button",{className:"search-filter-group-modal-button",onClick:function(){return i(!0)}},n.createElement(a._H,T.moreOptionsButton)),n.createElement(h(),{ariaHideApp:!F,bodyOpenClassName:"has-search-filter-group-modal",className:"search-filter-group-modal",isOpen:l,onRequestClose:function(){return i(!1)},overlayClassName:"search-filter-group-modal__overlay"},n.createElement("fieldset",{className:"search-filter-group-modal__form"},n.createElement("legend",{className:"search-filter-group-modal__form__title"},n.createElement(a._H,P({},T.modalTitle,{values:{filterName:t.human_name}}))),n.createElement("input",{"aria-label":r.formatMessage(T.inputLabel),className:"search-filter-group-modal__form__input",onChange:function(e){d(e.target.value)},placeholder:r.formatMessage(T.inputPlaceholder,{filterName:t.human_name})}),v?n.createElement("div",{className:"search-filter-group-modal__form__error"},n.createElement(a._H,P({},T.error,{values:{filterName:t.human_name}}))):p.length>0&&p.length<3?n.createElement("div",{className:"search-filter-group-modal__form__error"},n.createElement(a._H,T.queryTooShort)):n.createElement("ul",{className:"search-filter-group-modal__form__values"},u.map((function(e){return n.createElement("li",{className:"search-filter-group-modal__form__values__item",key:e.key},n.createElement("button",{onClick:function(){S({filter:t,payload:e.key,type:f.Y.filterAdd}),i(!1)}},e.human_name," ",e.count||0===e.count?"(".concat(e.count,")"):""))})))),n.createElement("button",{className:"search-filter-group-modal__close",onClick:function(){return i(!1)}},n.createElement(a._H,T.closeButton))))},U=function(e,t){var r=(0,f.T)(),n=r.courseSearchParams,a=r.dispatchCourseSearchParamsUpdate,o=(n[e.name]||[]).includes(t.key);return[o,function(){return a({filter:e,payload:t.key,type:o?f.Y.filterRemove:f.Y.filterAdd})}]};function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var D=n.memo((function(e){var t,r,a=e.filter,o=e.value,l=(t=U(a,o),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=l[0],c=l[1];return n.createElement("label",{className:"search-filter-value-leaf ".concat(i?"active":""," ").concat(0===o.count?"search-filter-value-leaf--disabled":"")},n.createElement("input",{checked:i,className:"search-filter-value-leaf__checkbox",disabled:0===o.count,onChange:c,type:"checkbox"}),n.createElement("div",{className:"search-filter-value-leaf__content"},o.human_name," ",o.count||0===o.count?"(".concat(o.count,")"):""))}),(function(e,t){return e.value.count===t.value.count})),L=(r(72975),r(39275),r(33290),r(1760));function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $(e,t,r,n,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,a)}function q(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function l(e){$(o,n,a,l,i,"next",e)}function i(e){$(o,n,a,l,i,"throw",e)}l(void 0)}))}}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var J=(0,a.vU)({ariaHideChildren:{id:"components.SearchFilterValueParent.ariaHideChildren",defaultMessage:[{type:0,value:"Hide additional filters for "},{type:1,value:"filterValueName"}]},ariaShowChildren:{id:"components.SearchFilterValueParent.ariaShowChildren",defaultMessage:[{type:0,value:"Show more filters for "},{type:1,value:"filterValueName"}]}}),Z=function(e){var t=e.filter,r=e.value,o=(0,a.YB)(),l=(0,f.T)().courseSearchParams,i=l[t.name]||[],c="string"==typeof i?[i]:i,u=(0,L.aj)(r.key),s=new RegExp(u),m=c.some((function(e){return s.test(e)})),p=B((0,n.useState)(null),2),d=p[0],y=p[1],v=null!==d?!!d:m,h=B((0,n.useState)([]),2),g=h[0],b=h[1];(0,N.b)(q(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=7;break}return e.next=3,w("courses",G(G({},l),{},(Y(n={},"".concat(t.name,"_children_aggs"),r.key),Y(n,"scope","filters"),n)));case 3:if((a=e.sent).status!==_.e.FAILURE){e.next=6;break}throw new Error("Failed to get children filters for ".concat(t.name,"/").concat(r.key));case 6:b(a.content.filters[t.name].values);case 7:case"end":return e.stop()}}),e)}))),[v,r,l]);var E=B(U(t,r),2),S=E[0],O=E[1];return n.createElement("div",{className:"search-filter-value-parent"},n.createElement("div",{className:"search-filter-value-parent__self ".concat(S?"active":"")},n.createElement("label",{className:"search-filter-value-parent__self__label ".concat(0===r.count?"search-filter-value-parent__self__label--disabled":"")},n.createElement("input",{checked:S,className:"search-filter-value-parent__self__label__checkbox",disabled:0===r.count,onChange:O,type:"checkbox"}),n.createElement("div",{className:"search-filter-value-parent__self__label__content"},r.human_name," ",r.count||0===r.count?"(".concat(r.count,")"):"")),n.createElement("button",{"aria-label":o.formatMessage(v?J.ariaHideChildren:J.ariaShowChildren,{filterValueName:r.human_name}),"aria-pressed":v,className:"search-filter-value-parent__self__unfold ".concat(v&&"search-filter-value-parent__self__unfold--open"),onClick:function(){return y(!v)}},v?"-":"+")),v&&n.createElement("div",{className:"search-filter-value-parent__children"},g.map((function(e){return n.createElement(D,{filter:t,key:e.key,value:e})}))))},W=function(e){var t=e.filter;return n.createElement("fieldset",{className:"search-filter-group"},n.createElement("legend",{className:"search-filter-group__title"},t.human_name),n.createElement("div",{className:"search-filter-group__list"},t.values.map((function(e){return e.key.startsWith("P-")?n.createElement(Z,{filter:t,value:e,key:e.key}):n.createElement(D,{filter:t,value:e,key:e.key})}))),t.has_more_values&&t.is_searchable?n.createElement(R,{filter:t}):null)},Q=["filters"];function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function X(e,t){if(e){if("string"==typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ee(e,t):void 0}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var te=(0,a.vU)({clearFilters:{id:"components.SearchFiltersPane.clearFilters",defaultMessage:[{type:0,value:"Clear "},{type:2,style:null,value:"activeFilterCount"},{type:0,value:" active "},{type:6,pluralType:"cardinal",value:"activeFilterCount",offset:0,options:{one:{value:[{type:0,value:"filter"}]},other:{value:[{type:0,value:"filters"}]}}}]},filter:{id:"components.SearchFiltersPane.title",defaultMessage:[{type:0,value:"Filter courses"}]}}),re=function(e){var t,r,o=e.filters,l=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,Q),i=o&&Object.values(o),c=(0,f.T)(),u=c.courseSearchParams,s=c.dispatchCourseSearchParamsUpdate,m=Object.entries(u).filter((function(e){var t,r,n=(t=e,r=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}}(t,r)||X(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return!Object.keys(b.e_).includes(n)})).map((function(e){return e[1]})).filter((function(e){return!!e})),p=(t=[]).concat.apply(t,(r=m,function(e){if(Array.isArray(e))return ee(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||X(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).length;return n.createElement("div",K({className:"search-filters-pane"},l),n.createElement("h2",{className:"search-filters-pane__title"},n.createElement(a._H,te.filter)),n.createElement("button",{className:"search-filters-pane__clear ".concat(p?"":"search-filters-pane__clear--hidden"),tabIndex:0,onClick:function(){return s({type:f.Y.filterReset})}},n.createElement(a._H,K({},te.clearFilters,{values:{activeFilterCount:p}}))),i&&i.map((function(e){return n.createElement(W,{filter:e,key:e.name})})))},ne=r(38136);function ae(e,t,r,n,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,a)}function oe(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function l(e){ae(o,n,a,l,i,"next",e)}function i(e){ae(o,n,a,l,i,"throw",e)}l(void 0)}))}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ie=r(23357),ce=r(68919);function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?se(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fe=(0,a.vU)({errorMessage:{id:"components.Search.errorMessage",defaultMessage:[{type:0,value:"Something's wrong! Courses could not be loaded."}]},hideFiltersPane:{id:"components.Search.hideFiltersPane",defaultMessage:[{type:0,value:"Hide filters pane"}]},showFiltersPane:{id:"components.Search.showFiltersPane",defaultMessage:[{type:0,value:"Show filters pane"}]},spinnerText:{id:"components.Search.spinnerText",defaultMessage:[{type:0,value:"Loading search results..."}]}}),me=function(e){var t=e.context,r=(0,f.T)(),o=r.courseSearchParams,l=r.lastDispatchActions,i=function(e){var t,r,a=(t=(0,n.useState)(null),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?le(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=a[0],l=a[1];return(0,N.b)(oe(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w("courses",e);case 2:r=t.sent,l(r);case 4:case"end":return t.stop()}}),t)}))),[e]),o}(o),c=(0,ie.Z)("(min-width: 992px)"),u=ue((0,n.useState)(!1),2),m=u[0],p=u[1],d=ue((0,n.useState)("control-".concat(Math.random())),1)[0];return(0,n.useEffect)((function(){l&&null!=l&&l.every((function(e){return e.type!==f.Y.queryUpdate}))&&(0,ce.AR)({behavior:"smooth",top:0})}),[i]),n.createElement("div",{className:"search"},n.createElement("div",{className:"search__filters ".concat(!c&&m?"search__filters--active":"")},n.createElement(re,{"aria-hidden":!c&&!m,filters:(null==i?void 0:i.status)===_.e.SUCCESS?i.content.filters:null,id:d}),!c&&n.createElement("button",{"aria-expanded":m,"aria-controls":d,className:"search__filters__toggle",onClick:function(){return p(!m)}},m?n.createElement(n.Fragment,null,n.createElement("svg",{"aria-hidden":!0,role:"img",className:"icon search__filters__toggle__icon"},n.createElement("use",{xlinkHref:"#icon-cross"}))," ",n.createElement("span",{className:"offscreen"},n.createElement(a._H,fe.hideFiltersPane))):n.createElement(n.Fragment,null,n.createElement("svg",{"aria-hidden":!0,role:"img",className:"icon search__filters__toggle__icon"},n.createElement("use",{xlinkHref:"#icon-filter"})),n.createElement("span",{className:"offscreen"},n.createElement(a._H,fe.showFiltersPane))))),n.createElement("div",{className:"search__results"},i&&i.status===_.e.SUCCESS?n.createElement(n.Fragment,null,n.createElement(s,{context:t,courses:i.content.objects,meta:i.content.meta}),n.createElement(y,{courseSearchTotalCount:i.content.meta.total_count})):i&&i.status===_.e.FAILURE?n.createElement("div",{className:"search__results__error"},n.createElement("svg",{"aria-hidden":!0,role:"img"},n.createElement("use",{xlinkHref:"#icon-search-fail"})),n.createElement("p",null,n.createElement(a._H,fe.errorMessage))):n.createElement(ne.$,{size:"large"},n.createElement(a._H,fe.spinnerText)),!c&&n.createElement("div",{"aria-hidden":!0,className:"search__results__overlay ".concat(m?"search__results__overlay--visible":""),onClick:function(){return p(!1)}})))}},47026:function(e,t,r){r.d(t,{Y:function(){return f},T:function(){return g}}),r(54994),r(19701),r(193),r(39275),r(23528),r(55862),r(80044),r(26364),r(80238),r(6208),r(12938),r(86632),r(10853),r(61928),r(54883),r(45007),r(68995),r(18821),r(4845);var n=r(69701),a=r(89526),o=r(60696),l=r(95418),i=r(68919),c=r(1760);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f,m=function(e,t){var r,n,a,o;return t.isDrilldown?(n={},s(n,f.filterAdd,(function(){return t.payload})),s(n,f.filterRemove,(function(){return e===t.payload?void 0:e||void 0})),n)[t.action]():e?"string"==typeof e?(o={},s(o,f.filterAdd,(function(){return e===t.payload?[e]:(0,c.wE)(e,t.payload)||(0,c.J2)(e,t.payload)?[t.payload]:[e,t.payload]})),s(o,f.filterRemove,(function(){return e===t.payload?void 0:e})),o)[t.action]():(r={},s(r,f.filterAdd,(function(){return[].concat(function(e){if(Array.isArray(e))return u(e)}(r=e.filter((function(e){return e!==t.payload&&!(0,c.wE)(e,t.payload)&&!(0,c.J2)(e,t.payload)})))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t.payload]);var r})),s(r,f.filterRemove,(function(){return 0===(r=e.filter((function(e){return e!==t.payload}))).length?void 0:r;var r})),r)[t.action]():(a={},s(a,f.filterAdd,(function(){return[t.payload]})),s(a,f.filterRemove,(function(){})),a)[t.action]()};function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.filterReset="FILTER_RESET",e.filterAdd="FILTER_ADD",e.filterRemove="FILTER_REMOVE",e.pageChange="PAGE_CHANGE",e.queryUpdate="QUERY_UPDATE"}(f||(f={}));var h=function(e,t){switch(t.type){case f.pageChange:return y(y({},e),{},{offset:t.offset});case f.queryUpdate:return y(y({},e),{},{offset:"0",query:t.query||void 0});case f.filterAdd:case f.filterRemove:return y(y({},e),{},v({offset:"0"},t.filter.name,m(e[t.filter.name],{action:t.type,isDrilldown:!!t.filter.is_drilldown,payload:t.payload})));case f.filterReset:return y(y({},l.e_),{},{limit:e.limit})}},g=function(){var e,t,r,c=(t=(0,o.k6)(),r=3,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],s=c[1],f=c[2],m=u.state.data.params;return(0,a.useEffect)((function(){if(!m.limit||!m.offset){var e=y(y({},l.e_),m);f({name:"courseSearch",data:{params:e,lastDispatchActions:null}},"","".concat(i.xh.pathname,"?").concat((0,n.stringify)(e)))}}),[(0,n.stringify)(m)]),{courseSearchParams:m,dispatchCourseSearchParamsUpdate:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t.reduce(h,m);(0,n.stringify)(a)!==(0,n.stringify)((0,n.parse)(i.xh.search))?s({name:"courseSearch",data:{params:a,lastDispatchActions:t}},"","".concat(i.xh.pathname,"?").concat((0,n.stringify)(a))):f({name:"courseSearch",data:{params:a,lastDispatchActions:t}},"","".concat(i.xh.pathname,"?").concat((0,n.stringify)(a)))},lastDispatchActions:null===(e=u.state.data)||void 0===e?void 0:e.lastDispatchActions}}},1760:function(e,t,r){r.d(t,{wE:function(){return a},J2:function(){return o},aj:function(){return l}}),r(39275),r(75668),r(21496);var n=function(e){return e.length%4==2&&!!e.match(/[P,L]-[0-9A-Z]{4,}/)},a=function(e,t){return n(e)&&n(t)&&t.substr(2).startsWith(e.substr(2))},o=function(e,t){return a(t,e)},l=function(e){if(!n(e))throw new Error("".concat(e," is not an MPTT path, cannot build a children path matcher."));return".-".concat(e.substr(2),".{4,}")}},23357:function(e,t,r){r(26364),r(86632),r(10853),r(61928),r(54883),r(45007),r(68995),r(18821),r(54994),r(4845);var n=r(89526),a=r(68919);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.Z=function(e){var t,r,l=(0,n.useMemo)((function(){return(0,a.Lw)(e)}),[e]),i=(t=(0,n.useState)(l.matches),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=i[0],u=i[1],s=(0,n.useCallback)((function(e){return u(e.matches)}),[u]);return(0,n.useEffect)((function(){return l.addListener(s),function(){l.removeListener(s)}}),[l]),c}}}]);
//# sourceMappingURL=84801.420450f04e17817eb68e.index.js.map