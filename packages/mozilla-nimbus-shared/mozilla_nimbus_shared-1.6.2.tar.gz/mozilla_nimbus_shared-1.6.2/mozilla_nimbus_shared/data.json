{
  "Audiences": {
    "all_english": {
      "name": "All English users",
      "description": "All users in en-* locales using the release channel.",
      "targeting": "localeLanguageCode == 'en' && browserSettings.update.channel == '{firefox_channel}'",
      "desktop_telemetry": "STARTS_WITH(environment.settings.locale, 'en')"
    },
    "us_only": {
      "name": "US users (en)",
      "description": "All users in the US with an en-* locale using the release channel.",
      "targeting": "localeLanguageCode == 'en' && region == 'US' && browserSettings.update.channel == '{firefox_channel}'",
      "desktop_telemetry": "STARTS_WITH(environment.settings.locale, 'en') AND normalized_country_code = 'US'"
    },
    "first_run": {
      "name": "First start-up users (en)",
      "description": "First start-up users (e.g. for about:welcome) with an en-* locale using the release channel.",
      "targeting": "localeLanguageCode == 'en' && (isFirstStartup || '{slug}' in activeExperiments) && browserSettings.update.channel == '{firefox_channel}'",
      "desktop_telemetry": "STARTS_WITH(environment.settings.locale, 'en') AND payload.info.profile_subsession_counter = 1"
    }
  },
  "ExperimentDesignPresets": {
    "empty_aa": {
      "name": "A/A Experiment",
      "description": "A design for diagnostic testing of targeting or enrollment. Fixed to 1% of the population.",
      "preset": {
        "targeting": "[{randomizationUnit}, \"{bucketNamespace}\"]|bucketSample({bucketStart}, {bucketCount}, {bucketTotal}) && {audienceTargeting}",
        "proposedDuration": 28,
        "proposedEnrollment": 7,
        "branches": [
          {
            "slug": "control",
            "ratio": 1,
            "feature": {
              "featureId": "cfr",
              "enabled": true,
              "value": {}
            }
          },
          {
            "slug": "treatment",
            "ratio": 1,
            "feature": {
              "featureId": "cfr",
              "enabled": true,
              "value": {}
            }
          }
        ],
        "bucketConfig": {
          "randomizationUnit": "normandy_id",
          "count": 100,
          "total": 10000
        }
      }
    }
  },
  "experiment-recipe-samples": {
    "desktop-90": {
      "appId": "firefox-desktop",
      "appName": "firefox_desktop",
      "application": "firefox-desktop",
      "arguments": {},
      "branches": [
        {
          "feature": {
            "enabled": true,
            "featureId": "privatebrowsing",
            "value": {
              "promoLinkUrl": "https://vpn.mozilla.org/?utm_campaign=private-browsing-vpn-link&entrypoint_experiment=firefox-vpn-test-1629&entrypoint_variation=control"
            }
          },
          "ratio": 1,
          "slug": "control"
        },
        {
          "feature": {
            "enabled": true,
            "featureId": "privatebrowsing",
            "value": {
              "infoBody": "Firefox clears your search and browsing history when you close all private windows, but this doesn't make you anonymous.",
              "infoLinkText": "Learn more",
              "infoTitle": "You’re in a private window",
              "infoTitleEnabled": true,
              "promoHeader": "Hide your activity and location, everywhere you browse",
              "promoLinkText": "Stay private with Mozilla VPN",
              "promoLinkType": "button",
              "promoLinkUrl": "https://vpn.mozilla.org/?utm_campaign=private-browsing-vpn-link&entrypoint_experiment=firefox-vpn-test-1629&entrypoint_variation=var1",
              "promoSectionStyle": "bottom",
              "promoTitleEnabled": false
            }
          },
          "ratio": 1,
          "slug": "var1"
        },
        {
          "feature": {
            "enabled": true,
            "featureId": "privatebrowsing",
            "value": {
              "infoBody": "Private window: Firefox clears your search and browsing history when you close all private windows. This doesn’t make you anonymous.",
              "infoLinkText": "Learn more",
              "infoTitle": "You’re in a private window",
              "infoTitleEnabled": false,
              "promoHeader": "Get privacy protection everywhere you browse",
              "promoImageLarge": "chrome://browser/content/assets/moz-vpn.svg",
              "promoLinkText": "Stay private with Mozilla VPN",
              "promoLinkType": "button",
              "promoLinkUrl": "https://vpn.mozilla.org/?utm_campaign=private-browsing-vpn-link&entrypoint_experiment=firefox-vpn-test-1629&entrypoint_variation=var2",
              "promoSectionStyle": "below-search",
              "promoTitle": "Hide browsing activity and location with Mozilla’s VPN. One tap creates a secure connection, even on public Wi-FI.",
              "promoTitleEnabled": true
            }
          },
          "ratio": 1,
          "slug": "var2"
        }
      ],
      "bucketConfig": {
        "count": 100,
        "namespace": "privatebrowsing-1",
        "randomizationUnit": "normandy_id",
        "start": 2000,
        "total": 10000
      },
      "channel": "release",
      "endDate": null,
      "featureIds": [
        "privatebrowsing"
      ],
      "id": "firefox-vpn-test-1629",
      "isEnrollmentPaused": true,
      "outcomes": [],
      "probeSets": [],
      "proposedDuration": 45,
      "proposedEnrollment": 7,
      "referenceBranch": "control",
      "schemaVersion": "1.5.0",
      "slug": "firefox-vpn-test-1629",
      "startDate": "2021-07-27",
      "targeting": "browserSettings.update.channel == \"release\" && version|versionCompare('90.!') >= 0 && 'app.shield.optoutstudies.enabled'|preferenceValue && !hasActiveEnterprisePolicies && locale in ['en-CA', 'en-GB', 'en-US'] && region in ['US']",
      "userFacingDescription": "Testing out the private browsing page with different images and copy.",
      "userFacingName": "firefox vpn test 1629"
    },
    "desktop-92": {
      "appId": "firefox-desktop",
      "appName": "firefox_desktop",
      "branches": [
        {
          "feature": {
            "featureId": "privatebrowsing",
            "value": {
              "promoLinkUrl": "https://vpn.mozilla.org/?utm_campaign=private-browsing-vpn-link&entrypoint_experiment=firefox-vpn-test-1629&entrypoint_variation=control"
            }
          },
          "features": [
            {
              "featureId": "privatebrowsing",
              "value": {
                "promoLinkUrl": "https://vpn.mozilla.org/?utm_campaign=private-browsing-vpn-link&entrypoint_experiment=firefox-vpn-test-1629&entrypoint_variation=control"
              }
            }
          ],
          "ratio": 1,
          "slug": "control"
        },
        {
          "feature": {
            "featureId": "privatebrowsing",
            "value": {
              "promoLinkUrl": "https://vpn.mozilla.org/?utm_campaign=private-browsing-vpn-link&entrypoint_experiment=firefox-vpn-test-1629&entrypoint_variation=control"
            }
          },
          "features": [
            {
              "featureId": "privatebrowsing",
              "value": {
                "infoBody": "Firefox clears your search and browsing history when you close all private windows, but this doesn't make you anonymous.",
                "infoLinkText": "Learn more",
                "infoTitle": "You’re in a private window",
                "infoTitleEnabled": true,
                "promoHeader": "Hide your activity and location, everywhere you browse",
                "promoLinkText": "Stay private with Mozilla VPN",
                "promoLinkType": "button",
                "promoLinkUrl": "https://vpn.mozilla.org/?utm_campaign=private-browsing-vpn-link&entrypoint_experiment=firefox-vpn-test-1629&entrypoint_variation=var1",
                "promoSectionStyle": "bottom",
                "promoTitleEnabled": false
              }
            }
          ],
          "ratio": 1,
          "slug": "var1"
        },
        {
          "feature": {
            "featureId": "privatebrowsing",
            "value": {
              "promoLinkUrl": "https://vpn.mozilla.org/?utm_campaign=private-browsing-vpn-link&entrypoint_experiment=firefox-vpn-test-1629&entrypoint_variation=control"
            }
          },
          "features": [
            {
              "featureId": "privatebrowsing",
              "value": {
                "infoBody": "Private window: Firefox clears your search and browsing history when you close all private windows. This doesn’t make you anonymous.",
                "infoLinkText": "Learn more",
                "infoTitle": "You’re in a private window",
                "infoTitleEnabled": false,
                "promoHeader": "Get privacy protection everywhere you browse",
                "promoImageLarge": "chrome://browser/content/assets/moz-vpn.svg",
                "promoLinkText": "Stay private with Mozilla VPN",
                "promoLinkType": "button",
                "promoLinkUrl": "https://vpn.mozilla.org/?utm_campaign=private-browsing-vpn-link&entrypoint_experiment=firefox-vpn-test-1629&entrypoint_variation=var2",
                "promoSectionStyle": "below-search",
                "promoTitle": "Hide browsing activity and location with Mozilla’s VPN. One tap creates a secure connection, even on public Wi-FI.",
                "promoTitleEnabled": true
              }
            }
          ],
          "ratio": 1,
          "slug": "var2"
        }
      ],
      "bucketConfig": {
        "count": 100,
        "namespace": "privatebrowsing-1",
        "randomizationUnit": "normandy_id",
        "start": 2000,
        "total": 10000
      },
      "channel": "release",
      "endDate": null,
      "featureIds": [
        "privatebrowsing"
      ],
      "id": "firefox-vpn-test-1629",
      "isEnrollmentPaused": true,
      "outcomes": [],
      "proposedDuration": 45,
      "proposedEnrollment": 7,
      "referenceBranch": "control",
      "schemaVersion": "2.0.0",
      "slug": "firefox-vpn-test-1629",
      "startDate": "2021-07-27",
      "targeting": "browserSettings.update.channel == \"release\" && version|versionCompare('90.!') >= 0 && 'app.shield.optoutstudies.enabled'|preferenceValue && !hasActiveEnterprisePolicies && locale in ['en-CA', 'en-GB', 'en-US'] && region in ['US']",
      "userFacingDescription": "Testing out the private browsing page with different images and copy.",
      "userFacingName": "firefox vpn test 1629"
    },
    "desktop-95": {
      "slug": "testing-multifeature-desktop",
      "appId": "firefox-desktop",
      "appName": "firefox_desktop",
      "channel": "",
      "endDate": null,
      "branches": [
        {
          "slug": "control",
          "ratio": 1,
          "feature": {
            "value": {},
            "enabled": true,
            "featureId": "no-feature-firefox-desktop"
          },
          "features": [
            {
              "value": {
                "enabled": false
              },
              "featureId": "aboutwelcome"
            },
            {
              "value": {
                "infoTitle": "This is control",
                "infoTitleEnabled": true
              },
              "featureId": "privatebrowsing"
            }
          ]
        },
        {
          "slug": "treatment-a",
          "ratio": 1,
          "feature": {
            "value": {},
            "enabled": true,
            "featureId": "no-feature-firefox-desktop"
          },
          "features": [
            {
              "value": {
                "enabled": false
              },
              "featureId": "aboutwelcome"
            },
            {
              "value": {
                "infoTitle": "This is treatment",
                "infoTitleEnabled": true
              },
              "featureId": "privatebrowsing"
            }
          ]
        }
      ],
      "outcomes": [],
      "arguments": {},
      "probeSets": [],
      "startDate": null,
      "targeting": "version|versionCompare('95.!') >= 0 && 'app.shield.optoutstudies.enabled'|preferenceValue",
      "featureIds": [
        "privatebrowsing",
        "aboutwelcome"
      ],
      "application": "firefox-desktop",
      "bucketConfig": {
        "count": 5000,
        "start": 0,
        "total": 10000,
        "namespace": "firefox-desktop-no-feature-firefox-desktop-2",
        "randomizationUnit": "normandy_id"
      },
      "schemaVersion": "1.5.0",
      "userFacingName": "Testing Multifeature Desktop",
      "referenceBranch": "control",
      "proposedDuration": 28,
      "isEnrollmentPaused": false,
      "proposedEnrollment": 7,
      "userFacingDescription": "Testing Multifeature Desktop",
      "id": "testing-multifeature-desktop",
      "last_modified": 1635342922069
    },
    "mobile-a-a": {
      "schemaVersion": "0.1.0",
      "id": "mobile-a-a-example",
      "slug": "mobile-a-a-example",
      "application": "reference_browser",
      "appId": "org.mozilla.reference.browser",
      "appName": "reference_browser",
      "featureIds": [
        "bookmark-icon"
      ],
      "channel": "nightly",
      "userFacingName": "Mobile A/A Example",
      "userFacingDescription": "An A/A Test to validate the Rust SDK",
      "isEnrollmentPaused": false,
      "bucketConfig": {
        "randomizationUnit": "nimbus_id",
        "namespace": "mobile-a-a-example",
        "start": 0,
        "count": 5000,
        "total": 10000
      },
      "targeting": null,
      "startDate": null,
      "endDate": null,
      "proposedEnrollment": 7,
      "referenceBranch": "control",
      "probeSets": [],
      "branches": [
        {
          "slug": "control",
          "ratio": 1,
          "feature": {
            "featureId": "bookmarkId",
            "enabled": true,
            "value": {}
          }
        },
        {
          "slug": "treatment-variation-b",
          "ratio": 1,
          "feature": {
            "featureId": "bookmarkId",
            "enabled": true,
            "value": {}
          }
        }
      ]
    }
  },
  "features": {
    "picture_in_picture": {
      "name": "Picture-in-Picture",
      "description": "Counts the fraction of users and the number of times that users open Picture-in-Picture\nwindows from videos. PiP can be opened by clicking on the PiP overlay or the video's context\nmenu.\n",
      "telemetry": [
        {
          "kind": "event",
          "event_category": "pictureinpicture",
          "event_method": "create",
          "event_object": "player"
        }
      ],
      "slug": "picture_in_picture"
    },
    "pinned_tabs": {
      "name": "Pinned tabs",
      "description": "Counts the number of times that a client pinned a tab. This doesn't measure whether users\nalready had tabs pinned when observation began.\n",
      "telemetry": [
        {
          "kind": "scalar",
          "name": "browser.engagement.tab_pinned_event_count"
        }
      ],
      "slug": "pinned_tabs"
    }
  },
  "test-data": {
    "food": {
      "apple": "green",
      "banana": "yellow",
      "cherry": "red",
      "daikon": "white",
      "eggplant": "purple"
    },
    "slug": "test-data"
  }
}