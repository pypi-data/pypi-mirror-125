(this["webpackJsonpray-dashboard-client"]=this["webpackJsonpray-dashboard-client"]||[]).push([[5],{498:function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return d}));var n=a(410),r=a(476),c=a(482),l=a(470),o=a(483),i=a(0),s=a.n(i),u=Object(n.a)((function(e){return{search:{margin:e.spacing(1),marginTop:0}}})),m=function(e){var t=e.label,a=e.onChange,n=e.defaultValue,l=u();return s.a.createElement(r.a,{className:l.search,size:"small",label:t,InputProps:{onChange:function(e){var t=e.target.value;a&&a(t)},defaultValue:n,endAdornment:s.a.createElement(c.a,{position:"end"},s.a.createElement(o.a,null))}})},d=function(e){var t=e.label,a=e.onChange,n=e.options,c=u();return s.a.createElement(r.a,{className:c.search,size:"small",label:t,select:!0,SelectProps:{onChange:function(e){var t=e.target.value;a&&a(t)},style:{width:100}}},s.a.createElement(l.a,{value:""},"All"),n.map((function(e){return"string"===typeof e?s.a.createElement(l.a,{value:e},e):s.a.createElement(l.a,{value:e[0]},e[1])})))}},499:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){return e<1024?"".concat(e,"KB"):e<Math.pow(1024,2)?"".concat((e/Math.pow(1024,1)).toFixed(2),"KB"):e<Math.pow(1024,3)?"".concat((e/Math.pow(1024,2)).toFixed(2),"MB"):e<Math.pow(1024,4)?"".concat((e/Math.pow(1024,3)).toFixed(2),"GB"):e<Math.pow(1024,5)?"".concat((e/Math.pow(1024,4)).toFixed(2),"TB"):e<Math.pow(1024,6)?"".concat((e/Math.pow(1024,5)).toFixed(2),"TB"):""}},500:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(461),r=a(0),c=a.n(r),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:28;return c.a.createElement(n.a,{title:e,interactive:!0},c.a.createElement("span",null,e.length>t?e.slice(0,t)+"...":e))}},501:function(e,t,a){"use strict";var n=a(15),r=a(6),c=a(476),l=a(482),o=a(466),i=a(464),s=a(465),u=a(463),m=a(467),d=a(87),p=a(483),f=a(491),E=a(488),g=a(0),v=a.n(g),b=a(60),h=a(73),j=a(500),O=a(101),y=a(503),w=a(99),k=a(505);t.a=function(e){var t=e.actors,a=void 0===t?{}:t,x=e.workers,C=void 0===x?[]:x,I=Object(g.useState)(1),M=Object(r.a)(I,2),A=M[0],S=M[1],F=Object(O.a)(),N=F.changeFilter,P=F.filterFunc,D=Object(g.useState)(10),T=Object(r.a)(D,2),z=T[0],L=T[1],R=Object(g.useContext)(h.a).ipLogMap,B=Object.values(a||{}).map((function(e){var t,a,r,c;return Object(n.a)(Object(n.a)({},e),{},{functionDesc:Object.values((null===(t=e.taskSpec)||void 0===t||null===(a=t.functionDescriptor)||void 0===a?void 0:a.javaFunctionDescriptor)||(null===(r=e.taskSpec)||void 0===r||null===(c=r.functionDescriptor)||void 0===c?void 0:c.pythonFunctionDescriptor)||{}).join(" ")})})).filter(P),W=B.slice((A-1)*z,A*z);return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{style:{flex:1,display:"flex",alignItems:"center"}},v.a.createElement(f.a,{style:{margin:8,width:120},options:Array.from(new Set(Object.values(a).map((function(e){return e.state})))),onInputChange:function(e,t){N("state",t.trim())},renderInput:function(e){return v.a.createElement(c.a,Object.assign({},e,{label:"State"}))}}),v.a.createElement(f.a,{style:{margin:8,width:150},options:Array.from(new Set(Object.values(a).map((function(e){var t;return null===(t=e.address)||void 0===t?void 0:t.ipAddress})))),onInputChange:function(e,t){N("address.ipAddress",t.trim())},renderInput:function(e){return v.a.createElement(c.a,Object.assign({},e,{label:"IP"}))}}),v.a.createElement(c.a,{style:{margin:8,width:120},label:"PID",size:"small",InputProps:{onChange:function(e){var t=e.target.value;N("pid",t.trim())},endAdornment:v.a.createElement(l.a,{position:"end"},v.a.createElement(p.a,null))}}),v.a.createElement(c.a,{style:{margin:8,width:200},label:"Task Func Desc",size:"small",InputProps:{onChange:function(e){var t=e.target.value;N("functionDesc",t.trim())},endAdornment:v.a.createElement(l.a,{position:"end"},v.a.createElement(p.a,null))}}),v.a.createElement(c.a,{style:{margin:8,width:120},label:"Name",size:"small",InputProps:{onChange:function(e){var t=e.target.value;N("name",t.trim())},endAdornment:v.a.createElement(l.a,{position:"end"},v.a.createElement(p.a,null))}}),v.a.createElement(c.a,{style:{margin:8,width:120},label:"Actor ID",size:"small",InputProps:{onChange:function(e){var t=e.target.value;N("actorId",t.trim())},endAdornment:v.a.createElement(l.a,{position:"end"},v.a.createElement(p.a,null))}}),v.a.createElement(c.a,{style:{margin:8,width:120},label:"Page Size",size:"small",InputProps:{onChange:function(e){var t=e.target.value;L(Math.min(Number(t),500)||10)}}})),v.a.createElement("div",{style:{display:"flex",alignItems:"center"}},v.a.createElement("div",null,v.a.createElement(E.a,{page:A,onChange:function(e,t){return S(t)},count:Math.ceil(B.length/z)})),v.a.createElement("div",null,v.a.createElement(y.a,{type:"actor",list:B}))),v.a.createElement(o.a,null,v.a.createElement(i.a,null,v.a.createElement(s.a,null,["","ID(Num Restarts)","Name","Task Func Desc","Job Id","Pid","IP","Port","State","Log"].map((function(e){return v.a.createElement(u.a,{align:"center",key:e},e)})))),v.a.createElement(m.a,null,W.map((function(e){var t=e.actorId,a=e.functionDesc,n=e.jobId,r=e.pid,c=e.address,l=e.state,o=e.name,i=e.numRestarts;return v.a.createElement(k.a,{length:C.filter((function(e){return e.pid===r&&c.ipAddress===e.coreWorkerStats[0].ipAddress})).length,expandComponent:v.a.createElement(k.b,{actorMap:{},workers:C.filter((function(e){return e.pid===r&&c.ipAddress===e.coreWorkerStats[0].ipAddress})),mini:!0}),key:t},v.a.createElement(u.a,{align:"center",style:{color:Number(i)>0?d.a[500]:"inherit"}},t,"(",i,")"),v.a.createElement(u.a,{align:"center"},o),v.a.createElement(u.a,{align:"center"},Object(j.a)(a,60)),v.a.createElement(u.a,{align:"center"},n),v.a.createElement(u.a,{align:"center"},r),v.a.createElement(u.a,{align:"center"},null===c||void 0===c?void 0:c.ipAddress),v.a.createElement(u.a,{align:"center"},null===c||void 0===c?void 0:c.port),v.a.createElement(u.a,{align:"center"},v.a.createElement(w.a,{type:"actor",status:l})),v.a.createElement(u.a,{align:"center"},R[null===c||void 0===c?void 0:c.ipAddress]&&v.a.createElement(b.b,{target:"_blank",to:"/log/".concat(encodeURIComponent(R[null===c||void 0===c?void 0:c.ipAddress]),"?fileName=").concat(n,"-").concat(r)},"Log")))})))))}},502:function(e,t,a){"use strict";var n=a(410),r=a(0),c=a.n(r),l=Object(n.a)((function(e){return{container:{background:"linear-gradient(45deg, #21CBF3ee 30%, #2196F3ee 90%)",border:"1px solid #ffffffbb",padding:"0 12px",height:18,lineHeight:"18px",position:"relative",boxSizing:"content-box",borderRadius:4},displayBar:{background:e.palette.background.paper,position:"absolute",right:0,height:18,transition:"0.5s width",borderRadius:2,borderTopLeftRadius:0,borderBottomLeftRadius:0,border:"2px solid transparent",boxSizing:"border-box"},text:{fontSize:12,zIndex:2,position:"relative",color:e.palette.text.primary,width:"100%",textAlign:"center"}}}));t.a=function(e){var t=e.num,a=e.total,n=l(),r=Math.round(t/a*100);return c.a.createElement("div",{className:n.container},c.a.createElement("div",{className:n.displayBar,style:{width:"".concat(Math.min(Math.max(0,100-r),100),"%")}}),c.a.createElement("div",{className:n.text},e.children))}},503:function(e,t,a){"use strict";var n=a(6),r=a(460),c=a(0),l=a.n(c),o=a(99);t.a=function(e){var t=e.type,a=e.list,c={};return a.forEach((function(e){var t=e.state;c[t]=c[t]+1||1})),l.a.createElement(r.a,{container:!0,spacing:2,alignItems:"center"},l.a.createElement(r.a,{item:!0},l.a.createElement(o.a,{status:"TOTAL",type:t,suffix:"x ".concat(a.length)})),Object.entries(c).map((function(e){var a=Object(n.a)(e,2),c=a[0],i=a[1];return l.a.createElement(r.a,{item:!0},l.a.createElement(o.a,{status:c,type:t,suffix:" x ".concat(i)}))})))}},505:function(e,t,a){"use strict";a.d(t,"a",(function(){return A}));var n=a(6),r=a(2),c=a(465),l=a(463),o=a(414),i=a(506),s=a(471),u=a(466),m=a(464),d=a(467),p=a(460),f=a(0),E=a.n(f),g=a(98),v=Object(g.a)(E.a.createElement("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown"),b=Object(g.a)(E.a.createElement("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight"),h=a(55),j=a.n(h),O=a(60),y=a(73),w=a(499),k=a(500),x=a(101),C=a(501),I=a(502),M=a(498),A=function(e){var t=e.children,a=e.expandComponent,i=e.length,s=e.stateKey,u=void 0===s?"":s,m=Object(r.a)(e,["children","expandComponent","length","stateKey"]),d=E.a.useState(!1),p=Object(n.a)(d,2),g=p[0],h=p[1];return Object(f.useEffect)((function(){u.startsWith("ON")?h(!0):u.startsWith("OFF")&&h(!1)}),[u]),i<1?E.a.createElement(c.a,m,E.a.createElement(l.a,{padding:"checkbox"}),t):E.a.createElement(E.a.Fragment,null,E.a.createElement(c.a,m,E.a.createElement(l.a,{padding:"checkbox"},E.a.createElement(o.a,{style:{color:"inherit"},onClick:function(){return h(!g)}},i,g?E.a.createElement(v,null):E.a.createElement(b,null))),t),g&&E.a.createElement(c.a,null,E.a.createElement(l.a,{colSpan:24},a)))},S=function(e){var t=e.actorMap,a=e.coreWorkerStats,n={};return(a||[]).filter((function(e){return t[e.actorId]})).forEach((function(e){return n[e.actorId]=t[e.actorId]})),Object.values(n).length?E.a.createElement(i.a,null,E.a.createElement(C.a,{actors:n})):E.a.createElement("p",null,"The Worker Haven't Had Related Actor Yet.")};t.b=function(e){var t=e.workers,a=void 0===t?[]:t,r=e.actorMap,o=e.mini,i=Object(x.a)(),g=i.changeFilter,v=i.filterFunc,b=Object(f.useState)(""),h=Object(n.a)(b,2),C=h[0],F=h[1],N=Object(f.useContext)(y.a),P=N.nodeMap,D=N.ipLogMap;return E.a.createElement(E.a.Fragment,null,!o&&E.a.createElement("div",{style:{display:"flex",alignItems:"center"}},E.a.createElement(M.a,{label:"Pid",onChange:function(e){return g("pid",e)}}),E.a.createElement(s.a,{onClick:function(){return F("ON".concat(Math.random()))}},"Expand All"),E.a.createElement(s.a,{onClick:function(){return F("OFF".concat(Math.random()))}},"Collapse All"))," ",E.a.createElement(u.a,null,E.a.createElement(m.a,null,E.a.createElement(c.a,null,["","Pid","CPU","CPU Times","Memory","CMD Line","Create Time","Log","Ops","IP/Hostname"].map((function(e){return E.a.createElement(l.a,{align:"center",key:e},e)})))),E.a.createElement(d.a,null,a.filter(v).sort((function(e,t){var a=(e.coreWorkerStats||[]).filter((function(e){return r[e.actorId]})).length||0;return((t.coreWorkerStats||[]).filter((function(e){return r[e.actorId]})).length||0)-a})).map((function(e){var t=e.pid,a=e.cpuPercent,c=e.cpuTimes,o=e.memoryInfo,i=e.cmdline,u=e.createTime,m=e.coreWorkerStats,d=void 0===m?[]:m,f=e.language,g=e.ip,v=e.hostname;return E.a.createElement(A,{expandComponent:E.a.createElement(S,{actorMap:r,coreWorkerStats:d}),length:(d||[]).filter((function(e){return r[e.actorId]})).length,key:t,stateKey:C},E.a.createElement(l.a,{align:"center"},t),E.a.createElement(l.a,{align:"center"},E.a.createElement(I.a,{num:Number(a),total:100},a,"%")),E.a.createElement(l.a,{align:"center"},E.a.createElement("div",{style:{maxHeight:55,overflow:"auto"}},Object.entries(c||{}).map((function(e){var t=Object(n.a)(e,2),a=t[0],r=t[1];return E.a.createElement("div",{style:{margin:4}},a,":",r)})))),E.a.createElement(l.a,{align:"center"},E.a.createElement("div",{style:{maxHeight:55,overflow:"auto"}},Object.entries(o||{}).map((function(e){var t=Object(n.a)(e,2),a=t[0],r=t[1];return E.a.createElement("div",{style:{margin:4}},a,":",Object(w.a)(r))})))),E.a.createElement(l.a,{align:"center",style:{lineBreak:"anywhere"}},i&&Object(k.a)(i.filter((function(e){return e})).join(" "))),E.a.createElement(l.a,{align:"center"},j()(1e3*u).format("YYYY/MM/DD HH:mm:ss")),E.a.createElement(l.a,{align:"center"},E.a.createElement(p.a,{container:!0,spacing:2},D[g]&&E.a.createElement(p.a,{item:!0},E.a.createElement(O.b,{target:"_blank",to:"/log/".concat(encodeURIComponent(D[g]),"?fileName=").concat(d[0].jobId||"","-").concat(t)},"Log")))),E.a.createElement(l.a,{align:"center"},"JAVA"===f&&E.a.createElement("div",null,E.a.createElement(s.a,{onClick:function(){var e;window.open("#/cmd/jstack/".concat(null===(e=d[0])||void 0===e?void 0:e.ipAddress,"/").concat(t))}},"jstack")," ",E.a.createElement(s.a,{onClick:function(){var e;window.open("#/cmd/jmap/".concat(null===(e=d[0])||void 0===e?void 0:e.ipAddress,"/").concat(t))}},"jmap"),E.a.createElement(s.a,{onClick:function(){var e;window.open("#/cmd/jstat/".concat(null===(e=d[0])||void 0===e?void 0:e.ipAddress,"/").concat(t))}},"jstat"))),E.a.createElement(l.a,{align:"center"},g,E.a.createElement("br",null),P[v]?E.a.createElement(O.b,{target:"_blank",to:"/node/".concat(P[v])},v):v))})))))}},506:function(e,t,a){"use strict";var n=a(1),r=a(2),c=a(0),l=(a(5),a(3)),o=a(4),i=c.forwardRef((function(e,t){var a=e.classes,o=e.className,i=e.component,s=void 0===i?"div":i,u=Object(r.a)(e,["classes","className","component"]);return c.createElement(s,Object(n.a)({ref:t,className:Object(l.a)(a.root,o)},u))}));t.a=Object(o.a)({root:{width:"100%",overflowX:"auto"}},{name:"MuiTableContainer"})(i)},516:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(410),c=a(0),l=a.n(c),o=a(501),i=a(100),s=a(58),u=Object(r.a)((function(e){return{root:{padding:e.spacing(2),width:"100%"}}}));t.default=function(){var e=u(),t=Object(c.useState)({}),a=Object(n.a)(t,2),r=a[0],m=a[1];return Object(c.useEffect)((function(){Object(s.b)("logical/actors").then((function(e){var t,a;(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.actors)&&m(e.data.data.actors)}))}),[]),l.a.createElement("div",{className:e.root},l.a.createElement(i.a,{title:"ACTORS"},l.a.createElement(o.a,{actors:r})))}}}]);
//# sourceMappingURL=5.498d107a.chunk.js.map