var et=Object.defineProperty,tt=Object.defineProperties;var at=Object.getOwnPropertyDescriptors;var we=Object.getOwnPropertySymbols;var nt=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable;var ge=(l,t,r)=>t in l?et(l,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[t]=r,v=(l,t)=>{for(var r in t||(t={}))nt.call(t,r)&&ge(l,r,t[r]);if(we)for(var r of we(t))lt.call(t,r)&&ge(l,r,t[r]);return l},g=(l,t)=>tt(l,at(t));var I=(l,t,r)=>(ge(l,typeof t!="symbol"?t+"":t,r),r);import{e as ye,c as st,u as rt,d as f,a as X,r as $,o as u,b as _,w as a,f as n,g as e,R as ot,N as Ne,S as W,h as ne,i as V,j as D,z as it,k as ut,l as dt,m as ct,n as _t,p as pt,q as ft,s as mt,t as ht,v as vt,x as gt,y as yt,A as bt,B as $t,C as xt,D as kt,E as Y,F as Ie,G as U,H as Ue,I as le,J as E,K as b,L as Se,M as O,O as Ce,P as Me,Q as Te,T as m,U as w,V as se,W as re,X as C,Y as oe,Z as H,_ as ie,$ as x,a0 as ue,a1 as je,a2 as Le,a3 as de,a4 as F,a5 as K,a6 as ce,a7 as _e,a8 as pe,a9 as ee,aa as wt,ab as Nt,ac as It,ad as Pe,ae as j,af as q,ag as Ut,ah as z,ai as G,aj as P,ak as N,al as Re,am as St,an as be,ao as Ct,ap as Mt,aq as De,ar as Tt,as as jt,at as Ee,au as te,av as Lt,aw as Pt,ax as Rt,ay as Dt,az as $e,aA as Et,aB as Ot,aC as Oe,aD as ze,aE as zt,aF as Bt,aG as Be,aH as At,aI as Ae,aJ as Vt,aK as Ht,aL as Ft,aM as qt,aN as Gt,aO as Jt,aP as Wt,aQ as Kt,aR as Zt,aS as Qt,aT as Xt,aU as Ve,aV as Yt,aW as He,aX as fe,aY as ea,aZ as ta,a_ as aa}from"./vendor.de10acbd.js";const na=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};na();function xe(l){return(l==null?void 0:l.startsWith("./"))||(l==null?void 0:l.startsWith("../"))||l=="."||l==".."}function la(l){return l.replace(/\&\#[0-9]*;|&amp;/g,function(t){return t.match(/amp/)?"&":String.fromCharCode(parseInt(t.match(/[0-9]+/)[0]))})}var B=new ye.Renderer;B.link=function(l,t,r){return r};B.paragraph=function(l){return la(l)+`\r
`};B.heading=function(l,t){return t+") "+l};B.blockquote=function(l){return l};B.codespan=function(l){return l};B.list=function(l,t,r){return l};B.image=function(l,t,r){return""};B.code=function(l,t,r){return""};function Fe(l){return l}class sa{constructor(t){I(this,"baseUrl");this.baseUrl=t}async all(){return await(await fetch(`${this.baseUrl}/index.json`)).json()}async get(t){let s=await(await fetch(`${this.baseUrl}/${t}/index.json`)).json();return g(v({},s),{metadata:g(v({},s.metadata),{creation:new Date(s.metadata.creation.toString()),modification:new Date(s.metadata.modification.toString())}),dataUrl:this.resolveRelativeUrl(t)})}notes(t){return new ra(`${this.baseUrl}/${t}/notes`,this.resolveRelativeUrl(t,"./notes"))}async update(t){let r=g(v({},t),{metadata:g(v({},t.metadata),{creation:t.metadata.creation.toISOString(),modification:t.metadata.modification.toISOString()})});await fetch(`${this.baseUrl}/`,{body:JSON.stringify(r),method:"POST",headers:{"Content-Type":"application/json"}})}async delete(t){await fetch(`${this.baseUrl}/${t}`,{method:"DELETE"})}resolveRelativeUrl(t,r="."){return xe(r)?`${this.baseUrl}/${t}/${r}`:r}}class ra{constructor(t,r){I(this,"baseUrl");I(this,"dataUrl");this.baseUrl=t,this.dataUrl=r}async all(){return await(await fetch(`${this.baseUrl}/index.json`)).json()}async get(t){let s=await(await fetch(`${this.baseUrl}/${t}/index.json`)).json();return g(v({},s),{metadata:g(v({},s.metadata),{creation:new Date(s.metadata.creation.toString()),modification:new Date(s.metadata.modification.toString())}),dataUrl:this.dataUrl})}async update(t){let r=g(v({},t),{metadata:g(v({},t.metadata),{creation:t.metadata.creation.toISOString(),modification:t.metadata.modification.toISOString()})});await fetch(`${this.baseUrl}/`,{body:JSON.stringify(r),method:"POST",headers:{"Content-Type":"application/json"}})}async delete(t){await fetch(`${this.baseUrl}/${t}/`,{method:"DELETE"})}}class qe{constructor(t){I(this,"baseUrl");I(this,"materials");this.baseUrl=t,this.materials=new sa(`${this.baseUrl}/materials`)}async metadata(){return await(await fetch(`${this.baseUrl}/index.json`)).json()}}const Ge=Symbol(),oa="/api",ia=st({state(){return{api:new qe(oa),readerMode:!1}},mutations:{setApiUrl(l,t){l.api=new qe(t)},setReaderMode(l,t){l.readerMode=t}}});function R(){return rt(Ge)}const ua=f({setup(l){return X(),$("home"),(t,r)=>(u(),_(W,null,{default:a(()=>[n(e(ot))]),fallback:a(()=>[n(e(Ne),{size:80,id:"loading-spin",style:{width:"100%"}})]),_:1}))}});var L=(l,t)=>{for(const[r,s]of t)l[r]=s;return l};const da=f({setup(l){ne();const t=R(),r=V(),s="#f9f5e9FF",o={common:{baseColor:s,popoverColor:s,tableColor:s,cardColor:s,modalColor:s,bodyColor:s,tagColor:s,inputColor:s,codeColor:s,tabColor:s,actionColor:s,tableHeaderColor:s,hoverColor:s,inputColorDisabled:s}},i=D(()=>t.state.readerMode&&r.value!="dark"),d=D(()=>{let c=navigator.language;return c.indexOf("zh")!=-1?{lang:it,date:ut}:c.indexOf("ru")!=-1?{lang:dt,date:ct}:c.indexOf("uk")!=-1?{lang:_t,date:pt}:c.indexOf("ja")!=-1?{lang:ft,date:mt}:c.indexOf("id")!=-1?{lang:ht,date:vt}:{lang:gt,date:yt}});return(c,p)=>(u(),_(e($t),{style:{height:"100%"},theme:e(r)=="dark"?e(bt):null,"theme-overrides":e(i)?o:{},locale:e(d).lang,"date-locale":e(d).date},{default:a(()=>[n(e(kt),null,{default:a(()=>[n(e(xt)),(u(),_(W,null,{default:a(()=>[n(ua)]),fallback:a(()=>[n(e(Ne),{size:80,id:"loading-spin"})]),_:1}))]),_:1})]),_:1},8,["theme","theme-overrides","locale","date-locale"]))}});var ca=L(da,[["__scopeId","data-v-41fa4579"]]);const _a=f({props:{scroll:null},setup(l){const t=l,r=D(()=>{var s;return(s=t.scroll)!=null?s:!1});return(s,o)=>e(r)?(u(),_(e(le),{key:0,style:{height:"100%"},"native-scrollbar":!1},{default:a(()=>[n(e(Ie),{bordered:"",class:"page-header"},{default:a(()=>[Y(s.$slots,"header",{},void 0,!0)]),_:3}),n(e(U),null,{default:a(()=>[Y(s.$slots,"default",{},void 0,!0)]),_:3}),n(e(Ue),{right:100})]),_:3})):(u(),_(e(le),{key:1,style:{height:"100%"}},{default:a(()=>[n(e(Ie),{bordered:"",class:"page-header"},{default:a(()=>[Y(s.$slots,"header",{},void 0,!0)]),_:3}),n(e(U),{class:"page-content-scroll"},{default:a(()=>[Y(s.$slots,"default",{},void 0,!0)]),_:3})]),_:3}))}});var me=L(_a,[["__scopeId","data-v-6b14b3e8"]]);const pa=m("a",{href:"https://www.stardustdl.top/",style:{"text-decoration":"none",color:"inherit"}},"StardustDL",-1),fa=m("a",{href:"https://github.com/StardustDL/paperead/blob/master/LICENSE",style:{"text-decoration":"none",color:"inherit"}},"MPL-2.0",-1),ma=m("a",{href:"https://github.com/StardustDL/paperead",style:{"text-decoration":"none",color:"inherit"}},"GitHub",-1),ha=["href"];async function va(l){let t,r;const s=([t,r]=E(async()=>([t,r]=E(()=>fetch("/build.json")),t=await t,r(),t).json()),t=await t,r(),t);return(o,i)=>(u(),_(e(C),{size:"large"},{default:a(()=>[n(e(O),{label:"Author"},{prefix:a(()=>[n(e(b),null,{default:a(()=>[n(e(Se))]),_:1})]),default:a(()=>[pa]),_:1}),n(e(O),{label:"License"},{prefix:a(()=>[n(e(b),null,{default:a(()=>[n(e(Ce))]),_:1})]),default:a(()=>[fa]),_:1}),n(e(O),{label:"Source Code"},{prefix:a(()=>[n(e(b),null,{default:a(()=>[n(e(Me))]),_:1})]),default:a(()=>[ma]),_:1}),n(e(O),{label:"Commit"},{prefix:a(()=>[n(e(b),null,{default:a(()=>[n(e(Te))]),_:1})]),default:a(()=>[m("a",{href:`https://github.com/StardustDL/paperead/commit/${e(s).commit}`,style:{"text-decoration":"none",color:"inherit"}},w(e(s).shortCommit),9,ha)]),_:1}),n(e(O),{label:"Build Date"},{prefix:a(()=>[n(e(b),null,{default:a(()=>[n(e(se))]),_:1})]),default:a(()=>[n(e(re),{time:new Date(e(s).date),type:"relative"},null,8,["time"])]),_:1})]),_:1}))}const ga={components:{BrandGithub:Me,At:Se,License:Ce,GitCommit:Te,Clock:se}},ya=f(g(v({},ga),{setup:va})),ba=x(" Paperead ");function $a(l){return(t,r)=>(u(),_(e(ie),null,{default:a(()=>[n(e(H),{to:"/"},{default:a(()=>[n(e(b),null,{default:a(()=>[n(e(oe))]),_:1}),ba]),_:1})]),_:1}))}const xa={components:{HomeIcon:oe}},he=f(g(v({},xa),{setup:$a}));const ka=x("Reading"),wa=x("\xA0and "),Na=x("Notes"),Ia=x("Welcome to Paperead."),Ua=["href"],Sa=["href"],Ca=["href"];async function Ma(l){let t,r;const s=R(),o=X(),i=V(),d=D(()=>s.state.readerMode&&i.value!="dark");function c(y=!0){s.commit("setReaderMode",y)}const p="0.1.4",h=([t,r]=E(()=>s.state.api.metadata()),t=await t,r(),t);return(y,k)=>(u(),_(me,null,{header:a(()=>[n(e(pe),{subtitle:"\u9605\u8BFB\u4E0E\u7B14\u8BB0",onBack:k[2]||(k[2]=()=>e(o).back())},{avatar:a(()=>[n(e(ue),null,{default:a(()=>[n(e(b),null,{default:a(()=>[n(e(je))]),_:1})]),_:1})]),title:a(()=>[n(e(Le),{type:"info"},{default:a(()=>[ka]),_:1}),wa,n(e(Le),{type:"success"},{default:a(()=>[Na]),_:1})]),header:a(()=>[n(e(de),null,{default:a(()=>[n(he)]),_:1})]),extra:a(()=>[n(e(C),null,{default:a(()=>[n(e(F),{size:"large",bordered:!1,onClick:k[0]||(k[0]=J=>e(o).push("/materials")),title:"Materials"},{icon:a(()=>[n(e(b),null,{default:a(()=>[n(e(K))]),_:1})]),_:1}),n(e(F),{size:"large",bordered:!1,title:"Reader mode",onClick:k[1]||(k[1]=()=>c(!e(d)))},{icon:a(()=>[n(e(b),null,{default:a(()=>[e(d)?(u(),_(e(ce),{key:0})):(u(),_(e(_e),{key:1}))]),_:1})]),_:1})]),_:1})]),footer:a(()=>[Ia]),_:1})]),default:a(()=>[n(e(U),{"content-style":"padding: 10px;"},{default:a(()=>[n(e(C),{vertical:"",size:"large"},{default:a(()=>[n(e(ee),{title:"Server Information",hoverable:"",embedded:""},{default:a(()=>[n(e(C),{size:"large"},{default:a(()=>[n(e(O),{label:"Server Endpoint"},{default:a(()=>[m("a",{href:e(s).state.api.baseUrl},w(e(s).state.api.baseUrl),9,Ua)]),_:1}),n(e(O),{label:"Server Version"},{default:a(()=>[m("a",{href:`https://github.com/StardustDL/paperead/releases/tag/v${e(h).version}`},w(e(h).version),9,Sa)]),_:1}),n(e(O),{label:"Client Version"},{default:a(()=>[m("a",{href:`https://github.com/StardustDL/paperead/releases/tag/v${e(p)}`},w(e(p)),9,Ca)]),_:1})]),_:1})]),_:1}),n(e(ee),{title:"Paperead Information",hoverable:"",embedded:""},{default:a(()=>[(u(),_(W,null,{default:a(()=>[n(ya)]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}))}const Ta={components:{Notebook:je,MaterialsIcon:K,EnableReaderIcon:_e,DisableReaderIcon:ce}},ja=f(g(v({},Ta),{setup:Ma}));var La=L(ja,[["__scopeId","data-v-024387c1"]]);const Pa=x("Home");function Ra(l){const r=ne().params;return console.log("NotFound"),(s,o)=>(u(),_(e(wt),{status:"404",title:"Not Found",description:`Path: /${e(r).path.join("/")}`,style:{margin:"50px"}},{footer:a(()=>[n(e(F),null,{icon:a(()=>[n(e(b),null,{default:a(()=>[n(e(oe))]),_:1})]),default:a(()=>[n(e(H),{to:"/"},{default:a(()=>[Pa]),_:1})]),_:1})]),_:1},8,["description"]))}const Da={components:{HomeIcon:oe,AlertCircle:Nt}},Ea=f(g(v({},Da),{setup:Ra}));var Oa=L(Ea,[["__scopeId","data-v-7c7ff6aa"]]);const za=m("span",null,"Creation:",-1),Ba=x("\xA0 "),Aa=m("br",null,null,-1),Va=m("span",null,"Modification:",-1),Ha=x("\xA0 ");function Fa(l){const t=l;return(r,s)=>(u(),_(e(It),null,{trigger:a(()=>[n(e(C),null,{default:a(()=>[n(e(b),{size:"large"},{default:a(()=>[n(e(se))]),_:1}),n(e(re),{time:t.creation,type:"relative"},null,8,["time"])]),_:1})]),default:a(()=>[za,Ba,n(e(re),{time:t.creation},null,8,["time"]),Aa,Va,Ha,n(e(re),{time:l.modification},null,8,["time"])]),_:1}))}const qa={components:{Clock:se}},Ga=f(g(v({},qa),{props:{creation:null,modification:null},setup:Fa}));function Ja(l){const t=l;return(r,s)=>(u(),_(e(C),null,{default:a(()=>[n(e(b),{size:"large"},{default:a(()=>[n(e(Pe))]),_:1}),(u(!0),j(z,null,q(t.tags,o=>(u(),_(e(Ut),{key:o,size:"small"},{default:a(()=>[x(w(o),1)]),_:2},1024))),128))]),_:1}))}const Wa={components:{Tag:Pe}},Ka=f(g(v({},Wa),{props:{tags:null},setup:Ja})),ve=f({props:{data:null},setup(l){return(t,r)=>(u(),_(e(C),null,{default:a(()=>[n(Ga,{creation:l.data.creation,modification:l.data.modification},null,8,["creation","modification"]),l.data.tags.length>0?(u(),_(Ka,{key:0,tags:l.data.tags},null,8,["tags"])):G("",!0)]),_:1}))}});const Za=f({props:{id:null},setup(l){const t=l,r=R(),s=$();async function o(){s.value=await r.state.api.materials.get(t.id)}return P(o),N(t,o),(i,d)=>s.value?(u(),_(e(ee),{key:0,hoverable:""},{header:a(()=>[n(e(H),{to:`/materials/${s.value.id}`},{default:a(()=>[x(w(s.value.metadata.name),1)]),_:1},8,["to"])]),action:a(()=>[n(ve,{data:s.value.metadata},null,8,["data"])]),default:a(()=>[s.value.content.length>0?(u(),_(e(Re),{key:0,tooltip:!1,"line-clamp":5},{default:a(()=>[x(w(e(Fe)(s.value.content)),1)]),_:1})):G("",!0)]),_:1})):G("",!0)}});var Qa=L(Za,[["__scopeId","data-v-22e464cd"]]);const Je=f({props:{items:null},setup(l){const t=l,r=$([]),s=$(1),o=$(5);function i(){let d=(s.value-1)*o.value;r.value=t.items.slice(d,d+o.value)}return N(s,i),N(o,i),P(i),N(t,()=>s.value=1),(d,c)=>(u(),_(e(C),{vertical:""},{default:a(()=>[(u(!0),j(z,null,q(r.value,p=>(u(),_(W,{key:p},{default:a(()=>[Y(d.$slots,"default",{item:p})]),fallback:a(()=>[n(e(be),{text:"",repeat:2})]),_:2},1024))),128)),n(e(St),{style:{"justify-content":"center","margin-top":"20px"},"item-count":l.items.length,"page-size":o.value,"onUpdate:page-size":c[0]||(c[0]=p=>o.value=p),page:s.value,"onUpdate:page":c[1]||(c[1]=p=>s.value=p),"page-sizes":[5,10,20],"show-quick-jumper":"","show-size-picker":""},null,8,["item-count","page-size","page"])]),_:3}))}}),Xa=x(" Materials ");function Ya(l){return(t,r)=>(u(),_(e(ie),null,{default:a(()=>[n(e(H),{to:"/materials"},{default:a(()=>[n(e(b),null,{default:a(()=>[n(e(K))]),_:1}),Xa]),_:1})]),_:1}))}const en={components:{MaterialsIcon:K}},ke=f(g(v({},en),{setup:Ya}));const tn=x("Materials");async function an(l){let t,r;const s=R(),o=X(),i=([t,r]=E(()=>s.state.api.materials.all()),t=await t,r(),t);return(d,c)=>(u(),_(me,null,{header:a(()=>[n(e(pe),{subtitle:"\u6240\u6709\u6750\u6599",onBack:c[0]||(c[0]=()=>e(o).back())},{title:a(()=>[tn]),header:a(()=>[n(e(de),null,{default:a(()=>[n(he),n(ke)]),_:1})]),avatar:a(()=>[n(e(ue),null,{default:a(()=>[n(e(b),null,{default:a(()=>[n(e(K))]),_:1})]),_:1})]),footer:a(()=>[x("Totally "+w(e(i).length)+" material"+w(e(i).length>1?"s":"")+".",1)]),_:1})]),default:a(()=>[n(e(U),{"content-style":"padding: 10px;","native-scrollbar":!1,style:{height:"100%"}},{default:a(()=>[n(Je,{items:e(i)},{default:a(p=>[n(Qa,{id:p.item},null,8,["id"])]),_:1},8,["items"])]),_:1})]),_:1}))}const nn={components:{MaterialsIcon:K}},ln=f(g(v({},nn),{setup:an}));var sn=L(ln,[["__scopeId","data-v-23e8e8fa"]]);const rn=m("thead",null,[m("tr",null,[m("th",null,"Key"),m("th",null,"Value")])],-1);function on(l){const t=l,r=D(()=>{let s=[];for(let o in t.data.metadata.targets){let i=t.data.metadata.targets[o],d=xe(i)?`${t.data.dataUrl}/${i}`:i;s.push({label:()=>Ct("a",{target:"_blank",href:d},o),key:o})}return s});return(s,o)=>(u(),_(e(C),null,{default:a(()=>[Object.keys(l.data.metadata.extra).length>0?(u(),_(e(Mt),{key:0,placement:"bottom-start",trigger:"hover"},{trigger:a(()=>[n(e(F),{bordered:!1,size:"large",title:"Extra"},{icon:a(()=>[n(e(b),null,{default:a(()=>[n(e(De))]),_:1})]),_:1})]),default:a(()=>[n(e(Tt),null,{default:a(()=>[rn,m("tbody",null,[(u(!0),j(z,null,q(l.data.metadata.extra,(i,d)=>(u(),j("tr",{key:d},[m("td",null,w(d),1),m("td",null,w(i),1)]))),128))])]),_:1})]),_:1})):G("",!0),Object.keys(l.data.metadata.targets).length>0?(u(),_(e(jt),{key:1,options:e(r),placement:"bottom-start"},{default:a(()=>[n(e(F),{bordered:!1,size:"large",title:"Targets"},{icon:a(()=>[n(e(b),null,{default:a(()=>[n(e(Ee))]),_:1})]),_:1})]),_:1},8,["options"])):G("",!0)]),_:1}))}const un={components:{Book:te,ArrowRight:Lt,ExternalLink:Ee,InfoSquare:De}},We=f(g(v({},un),{props:{data:null},setup:on}));function dn(l){return(t,r)=>(u(),_(e(ie),null,{default:a(()=>[n(e(H),{to:`/materials/${l.id}`},{default:a(()=>[n(e(b),null,{default:a(()=>[n(e(te))]),_:1}),x(" "+w(l.id),1)]),_:1},8,["to"])]),_:1}))}const cn={components:{MaterialIcon:te}},Ke=f(g(v({},cn),{props:{id:null},setup:dn})),_n=f({props:{value:null},setup(l){const t=l;return(r,s)=>{const o=Pt("MarkdownPreviewOutlineItem",!0);return u(),_(e(Rt),{title:t.value.title,href:t.value.href},{default:a(()=>[(u(!0),j(z,null,q(t.value.children,i=>(u(),_(o,{key:i.href,value:i},null,8,["value"]))),128))]),_:1},8,["title","href"])}}});class pn{constructor(t="",r="",s){I(this,"title","");I(this,"href","");I(this,"children",[]);this.title=t,this.href=r,s==null&&(s=[]),this.children=s}}const fn=f({props:{element:null},setup(l,{expose:t}){const r=l,s=$();function o(d){var k,J,A;let p=(k=d.children[0].getAttribute("data-target-id"))!=null?k:"",h=(A=(J=document.getElementById(p))==null?void 0:J.innerText)!=null?A:p,y=new pn(h,`#${p}`);if(d.children.length>1){let Z=d.children[1];for(let Q=0;Q<Z.children.length;Q++)y.children.push(o(Z.children[Q]))}return y}async function i(){if(r.element==null)return!1;let d=document.createElement("div");if($e.outlineRender(r.element,d),d.children.length==0)return s.value=[],!1;let c=d.children[0],p=[];for(let h=0;h<c.children.length;h++)p.push(o(c.children[h]));return s.value=p,!0}return P(i),N(r,i),t({renderOutline:i}),(d,c)=>(u(),_(e(Dt),{type:"block","listen-to":l.element,"ignore-gap":!0},{default:a(()=>[(u(!0),j(z,null,q(s.value,p=>(u(),_(_n,{key:p.href,value:p},null,8,["value"]))),128))]),_:1},8,["listen-to"]))}});function mn(l,{expose:t}){const r=l,s=R(),o=V(),i=D(()=>{var M;return(M=r.baseUrl)!=null?M:""}),d=D(()=>o.value=="dark"?"dark":"light"),c=$(),p=$(),h=$(!0),y=$(!1),k=D(()=>s.state.readerMode&&o.value!="dark"),J=$(!1);async function A(){await $e.preview(c.value,r.value,{mode:d.value,speech:{enable:!0},hljs:{lineNumber:!0,style:d.value=="dark"?"dracula":k.value?"monokailight":"github"},markdown:{linkBase:i.value,mark:!0},theme:{current:d.value}}),J.value=await p.value.renderOutline();{let M=c.value.getElementsByTagName("img");for(let T=0;T<M.length;T++){let S=M.item(T);S!=null&&(S.onclick=ae=>{$e.previewImage(S,void 0,d.value)})}}}function Z(M=!0){y.value=M}function Q(M=!0){s.commit("setReaderMode",M)}return P(A),N(r,A),N(o,A),N(k,A),t({fullscreen:Z}),(M,T)=>(u(),_(e(le),{class:At(y.value?"fullscreen":"normal"),"has-sider":"","sider-placement":"right",style:{height:"100%"}},{default:a(()=>[n(e(U),{style:{height:"100%"},"native-scrollbar":!1},{default:a(()=>[m("article",{ref:(S,ae)=>{ae.element=S,c.value=S},style:{"padding-bottom":"200px"}},null,512),n(e(Ue),{right:h.value?50:250,style:Et(y.value?{"z-index":2}:{})},null,8,["right","style"])]),_:1}),n(e(Be),{style:{height:"100%"},"collapse-mode":"width","collapsed-width":0,width:200,"show-trigger":"bar","default-collapsed":!0,"show-collapsed-content":!1,collapsed:h.value,"onUpdate:collapsed":T[2]||(T[2]=S=>h.value=S)},{default:a(()=>[n(e(U),{style:{height:"100%","background-color":"inherit"},"native-scrollbar":!1,"content-style":"padding: 10px;"},{default:a(()=>[n(e(C),null,{default:a(()=>[n(e(Ot),null,{default:a(()=>[n(e(F),{title:"Full screen",onClick:T[0]||(T[0]=()=>Z(!y.value))},{icon:a(()=>[n(e(b),null,{default:a(()=>[y.value?(u(),_(e(Oe),{key:0})):(u(),_(e(ze),{key:1}))]),_:1})]),_:1}),n(e(F),{title:"Reader mode",onClick:T[1]||(T[1]=()=>Q(!e(k)))},{icon:a(()=>[n(e(b),null,{default:a(()=>[e(k)?(u(),_(e(ce),{key:0})):(u(),_(e(_e),{key:1}))]),_:1})]),_:1})]),_:1}),zt(n(fn,{element:c.value,ref:(S,ae)=>{ae.outline=S,p.value=S}},null,8,["element"]),[[Bt,J.value]])]),_:1})]),_:1})]),_:1},8,["collapsed"])]),_:1},8,["class"]))}const hn={components:{Maximize:ze,Minimize:Oe,EnableReaderIcon:_e,DisableReaderIcon:ce}},vn=f(g(v({},hn),{props:{value:null,baseUrl:null},setup:mn}));var gn=L(vn,[["__scopeId","data-v-00ede2da"]]);const yn=f({props:{data:null},setup(l){return(t,r)=>(u(),_(gn,{value:l.data.content,"base-url":l.data.dataUrl},null,8,["value","base-url"]))}});const bn=f({props:{css:null},setup(l){const t=l,r=document.getElementsByTagName("head")[0],s=[];function o(){for(let d of s)r.removeChild(d);s.length=0}function i(){if(o(),t.css!=null)for(let d of t.css){let c=document.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=d,r.appendChild(c),s.push(c)}}return P(i),N(t,i),Ae(o),()=>{}}}),$n={class:"slides"},xn={"data-markdown":"","data-separator":"^\\r?\\n===\\r?\\n$","data-separator-vertical":"^\\r?\\n---\\r?\\n$","data-separator-notes":"notes?:"},kn={"data-template":""},wn=f({props:{data:null},setup(l){const t=l,r=V(),s=$(),o=["https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.2/theme/white.min.css","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/github.min.css"],i=["https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.2/theme/black.min.css","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/monokai.min.css"];return P(()=>{new Vt({plugins:[Ht,Ft,qt,Gt,Jt,Wt],center:!1,markdown:{baseUrl:t.data.dataUrl,smartLists:!0,smartypants:!0},slideNumber:"c/t",hash:!0,embedded:!0}).initialize()}),(d,c)=>(u(),j(z,null,[n(bn,{css:e(r)=="dark"?i:o},null,8,["css"]),m("div",{class:"reveal",ref:(p,h)=>{h.element=p,s.value=p}},[m("div",$n,[m("section",xn,[m("textarea",kn,w(l.data.content),1)])])],512)],64))}}),Nn=f({props:{data:null},setup(l){return V(),(t,r)=>(u(),_(wn,{data:l.data},null,8,["data"]))}});class In{constructor(t,r,s=""){I(this,"title");I(this,"url");I(this,"description");I(this,"renderedDescription","");this.url=r,this.title=t,this.description=s,this.renderedDescription=s}}function Ze(l){let t=[],r=ye.lexer(l.content),s=0;for(;s<r.length;){let o=null;for(;o==null&&s<r.length;){let i=r[s];i.type=="heading"&&i.depth==1&&(o=i.text),s++}if(o!=null){let i=null,d="";for(;s<r.length;){let p=r[s];if(p.type=="heading"&&p.depth==1)break;let h=!1;if(i==null&&p.type=="paragraph"&&p.tokens.length==1){let y=p.tokens[0];y.type=="image"&&(h=!0,i=y.href,xe(i)&&(i=`${l.dataUrl}/${i}`))}h||(d+=p.raw),s++}let c=new In(o,i,d);c.renderedDescription=ye(c.description,{baseUrl:l.dataUrl,headerIds:!1,smartLists:!0,smartypants:!0}),t.push(c)}}return t}const Un=["innerHTML"],Sn=f({props:{data:null},setup(l){const t=l;V();const r=$(),s=$([]),o=$(0),i=$();function d(){if(s.value.length==0)return;o.value>=s.value.length&&(o.value=s.value.length-1);let p=s.value[o.value];i.value.switchVideo({url:p.url},void 0)}function c(p){p.length!=0&&(o.value=parseInt(p[0]))}return P(()=>{i.value=new Kt({container:r.value,video:{url:""}}),s.value=Ze(t.data)}),N(s,d),N(o,d),Ae(()=>{i.value!=null&&i.value.destroy()}),(p,h)=>(u(),_(e(le),{"has-sider":"","sider-placement":"right",style:{height:"100%"}},{default:a(()=>[n(e(U),{style:{height:"100%"},"native-scrollbar":!1},{default:a(()=>[m("div",{ref:(y,k)=>{k.container=y,r.value=y}},null,512)]),_:1}),n(e(Be),{style:{height:"100%"},"collapse-mode":"width","collapsed-width":0,width:200,"show-trigger":"bar","default-collapsed":!0,"show-collapsed-content":!1},{default:a(()=>[n(e(U),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"padding: 10px;"},{default:a(()=>[n(e(Zt),{accordion:!0,"arrow-placement":"right","expanded-names":o.value.toString(),onUpdateExpandedNames:c},{default:a(()=>[(u(!0),j(z,null,q(s.value,(y,k)=>(u(),_(e(Qt),{title:y.title,name:k.toString()},{default:a(()=>[m("div",{innerHTML:y.renderedDescription},null,8,Un)]),_:2},1032,["title","name"]))),256))]),_:1},8,["expanded-names"])]),_:1})]),_:1})]),_:1}))}}),Cn=["innerHTML"],Mn=f({props:{data:null},setup(l){const t=l;V(),$();const r=$([]),s=$(),o=$(0);function i(){if(r.value.length==0){s.value=void 0;return}o.value>=r.value.length&&(o.value=r.value.length-1),s.value=r.value[o.value]}return P(()=>{r.value=Ze(t.data)}),N(r,i),N(o,i),(d,c)=>(u(),_(e(U),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"padding: 20px;"},{default:a(()=>[n(e(C),{style:{"justify-content":"center"}},{default:a(()=>[(u(!0),j(z,null,q(r.value,(p,h)=>(u(),_(e(ee),{hoverable:"",embedded:"",title:p.title,key:h,style:{"max-width":"300px"}},{cover:a(()=>[n(e(Xt),{"object-fit":"cover",alt:p.title,src:p.url},null,8,["alt","src"])]),default:a(()=>[m("div",{innerHTML:p.renderedDescription},null,8,Cn)]),_:2},1032,["title"]))),128))]),_:1})]),_:1}))}}),Tn={key:0},Qe=f({props:{data:null},setup(l){return(t,r)=>l.data.metadata.schema=="empty"?(u(),j("span",Tn,"Empty data")):l.data.metadata.schema=="slides"?(u(),_(Nn,{key:1,data:l.data},null,8,["data"])):l.data.metadata.schema=="media"?(u(),_(Sn,{key:2,data:l.data},null,8,["data"])):l.data.metadata.schema=="image"?(u(),_(Mn,{key:3,data:l.data},null,8,["data"])):(u(),_(yn,{key:4,data:l.data},null,8,["data"]))}});const jn=f({props:{id:null,noteId:null},setup(l){const t=l,r=R(),s=$();async function o(){s.value=await r.state.api.materials.notes(t.id).get(t.noteId)}return P(o),N(t,o),(i,d)=>s.value?(u(),_(e(ee),{key:0,hoverable:""},{header:a(()=>[n(e(H),{to:`/materials/${t.id}/${s.value.id}`},{default:a(()=>[x(w(s.value.metadata.name),1)]),_:1},8,["to"])]),action:a(()=>[n(ve,{data:s.value.metadata},null,8,["data"])]),default:a(()=>[s.value.content.length>0?(u(),_(e(Re),{key:0,tooltip:!1,"line-clamp":5},{default:a(()=>[x(w(e(Fe)(s.value.content)),1)]),_:1})):G("",!0)]),_:1})):G("",!0)}});var Ln=L(jn,[["__scopeId","data-v-51f574b8"]]);async function Pn(l){let t,r;const s=l,o=R(),i=([t,r]=E(()=>o.state.api.materials.notes(s.id).all()),t=await t,r(),t);return(d,c)=>(u(),_(e(U),{"content-style":"padding: 10px;","native-scrollbar":!1,style:{height:"100%"}},{default:a(()=>[n(Je,{items:e(i)},{default:a(p=>[n(Ln,{id:l.id,noteId:p.item},null,8,["id","noteId"])]),_:1},8,["items"])]),_:1}))}const Rn={components:{NotesIcon:Ve}},Dn=f(g(v({},Rn),{props:{id:null},setup:Pn}));async function En(l){let t,r;const s=ne(),o=X(),i=R(),d=s.params,c=([t,r]=E(()=>i.state.api.materials.get(d.id)),t=await t,r(),t);return document.title=`${c.metadata.name} - Materials - Paperead`,(p,h)=>(u(),_(me,null,{header:a(()=>[n(e(pe),{onBack:h[0]||(h[0]=()=>e(o).back())},{title:a(()=>[x(w(e(c).metadata.name),1)]),header:a(()=>[n(e(de),null,{default:a(()=>[n(he),n(ke),n(Ke,{id:e(c).id},null,8,["id"])]),_:1})]),avatar:a(()=>[n(e(ue),null,{default:a(()=>[n(e(b),null,{default:a(()=>[n(e(te))]),_:1})]),_:1})]),extra:a(()=>[n(We,{data:e(c)},null,8,["data"])]),footer:a(()=>[n(ve,{data:e(c).metadata},null,8,["data"])]),_:1})]),default:a(()=>[n(e(U),{style:{height:"100%"}},{default:a(()=>[n(e(Yt),{type:"segment",style:{height:"100%"}},{default:a(()=>[n(e(He),{name:"description",tab:"Description",style:{height:"calc(100% - 52px)"}},{default:a(()=>[(u(),_(W,null,{default:a(()=>[n(Qe,{data:e(c)},null,8,["data"])]),fallback:a(()=>[n(e(be),{text:"",repeat:10})]),_:1}))]),_:1}),n(e(He),{name:"notes",tab:"Notes"},{default:a(()=>[n(Dn,{id:e(d).id},null,8,["id"])]),_:1})]),_:1})]),_:1})]),_:1}))}const On={components:{MaterialIcon:te,NotesIcon:Ve}},zn=f(g(v({},On),{setup:En}));var Bn=L(zn,[["__scopeId","data-v-5ad55c30"]]);function An(l){return(t,r)=>(u(),_(e(ie),null,{default:a(()=>[n(e(H),{to:`/materials/${l.id}/${l.noteId}`},{default:a(()=>[n(e(b),null,{default:a(()=>[n(e(fe))]),_:1}),x(" "+w(l.noteId),1)]),_:1},8,["to"])]),_:1}))}const Vn={components:{NoteIcon:fe}},Hn=f(g(v({},Vn),{props:{id:null,noteId:null},setup:An}));async function Fn(l){let t,r;const s=ne(),o=X(),i=R(),d=s.params,c=([t,r]=E(()=>i.state.api.materials.notes(d.id).get(d.noteId)),t=await t,r(),t),p=([t,r]=E(()=>i.state.api.materials.get(d.id)),t=await t,r(),t);return document.title=`${c.metadata.name} - ${p.metadata.name} - Materials - Paperead`,(h,y)=>(u(),_(me,null,{header:a(()=>[n(e(pe),{onBack:y[0]||(y[0]=()=>e(o).back())},{title:a(()=>[x(w(e(c).metadata.name),1)]),header:a(()=>[n(e(de),null,{default:a(()=>[n(he),n(ke),n(Ke,{id:e(d).id},null,8,["id"]),n(Hn,{id:e(d).id,"note-id":e(c).id},null,8,["id","note-id"])]),_:1})]),avatar:a(()=>[n(e(ue),null,{default:a(()=>[n(e(b),null,{default:a(()=>[n(e(fe))]),_:1})]),_:1})]),extra:a(()=>[n(We,{data:e(c)},null,8,["data"])]),footer:a(()=>[n(ve,{data:e(c).metadata},null,8,["data"])]),_:1})]),default:a(()=>[n(e(U),{style:{height:"100%"}},{default:a(()=>[(u(),_(W,null,{default:a(()=>[n(Qe,{data:e(c)},null,8,["data"])]),fallback:a(()=>[n(e(be),{text:"",repeat:10})]),_:1}))]),_:1})]),_:1}))}const qn={components:{NoteIcon:fe}},Gn=f(g(v({},qn),{setup:Fn}));var Jn=L(Gn,[["__scopeId","data-v-3f386bee"]]);const Wn=[{path:"/",component:La,meta:{title:"Home - Paperead"}},{path:"/materials",component:sn,meta:{title:"Materials - Paperead"}},{path:"/materials/:id",component:Bn,meta:{title:"Loading... - Materials - Paperead"}},{path:"/materials/:id/:noteId",component:Jn,meta:{title:"Loading... - Loading... - Materials - Paperead"}},{path:"/:path*",component:Oa,meta:{title:"Not found - Paperead"}}],Xe=ea({history:ta(),routes:Wn});Xe.beforeEach((l,t)=>(l.path==t.path||(document.title=l.meta.title.toString()),!0));const Ye=aa(ca);Ye.use(Xe).use(ia,Ge);Ye.mount("#app");
