var tt=Object.defineProperty,at=Object.defineProperties;var nt=Object.getOwnPropertyDescriptors;var Ie=Object.getOwnPropertySymbols;var lt=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable;var fe=(l,a,r)=>a in l?tt(l,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[a]=r,g=(l,a)=>{for(var r in a||(a={}))lt.call(a,r)&&fe(l,r,a[r]);if(Ie)for(var r of Ie(a))st.call(a,r)&&fe(l,r,a[r]);return l},v=(l,a)=>at(l,nt(a));var I=(l,a,r)=>(fe(l,typeof a!="symbol"?a+"":a,r),r);import{e as pe,c as rt,u as ot,d as p,a as ne,r as b,o as u,b as _,w as t,f as n,g as e,R as it,N as Se,S as J,h as le,i as z,j as O,z as ut,k as dt,l as ct,m as _t,n as ft,p as pt,q as ht,s as mt,t as gt,v as vt,x as yt,y as bt,A as $t,B as xt,C as kt,D as wt,E as X,F as Ue,G as N,H as Ce,I as Y,J as B,K as $,L as Te,M as A,O as Me,P as je,Q as Le,T as m,U as w,V as se,W as re,X as j,Y as oe,Z as W,_ as he,$ as k,a0 as Nt,a1 as Re,a2 as S,a3 as H,a4 as It,a5 as R,a6 as V,a7 as L,a8 as U,a9 as Pe,aa as ee,ab as St,ac as me,ad as ge,ae as De,af as Ee,ag as ve,ah as P,ai as ie,aj as ue,ak as ye,al as ze,am as de,an as Ut,ao as Ct,ap as Tt,aq as Mt,ar as jt,as as Oe,at as Lt,au as Rt,av as F,aw as te,ax as Pt,ay as Dt,az as Et,aA as zt,aB as be,aC as Ot,aD as Bt,aE as Be,aF as Ae,aG as At,aH as Ht,aI as $e,aJ as Vt,aK as He,aL as Ft,aM as qt,aN as Gt,aO as Jt,aP as Wt,aQ as Kt,aR as Zt,aS as Qt,aT as Ve,aU as Fe,aV as Xt,aW as qe,aX as ce,aY as Yt,aZ as ea,a_ as ta}from"./vendor.cf349d37.js";const aa=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};aa();function xe(l){return(l==null?void 0:l.startsWith("./"))||(l==null?void 0:l.startsWith("../"))||l=="."||l==".."}function na(l){return l.replace(/\&\#[0-9]*;|&amp;/g,function(a){return a.match(/amp/)?"&":String.fromCharCode(parseInt(a.match(/[0-9]+/)[0]))})}var q=new pe.Renderer;q.link=function(l,a,r){return r};q.paragraph=function(l){return na(l)+`\r
`};q.heading=function(l,a){return a+") "+l};q.blockquote=function(l){return l};q.codespan=function(l){return l};q.list=function(l,a,r){return l};q.image=function(l,a,r){return""};q.code=function(l,a,r){return""};function Ge(l){return l}class la{constructor(a){I(this,"baseUrl");this.baseUrl=a}async all(){return await(await fetch(`${this.baseUrl}/index.json`)).json()}async get(a){let s=await(await fetch(`${this.baseUrl}/${a}/index.json`)).json();return v(g({},s),{metadata:v(g({},s.metadata),{creation:new Date(s.metadata.creation.toString()),modification:new Date(s.metadata.modification.toString())}),dataUrl:this.resolveRelativeUrl(a)})}notes(a){return new sa(`${this.baseUrl}/${a}/notes`,this.resolveRelativeUrl(a,"./notes"))}async update(a){let r=v(g({},a),{metadata:v(g({},a.metadata),{creation:a.metadata.creation.toISOString(),modification:a.metadata.modification.toISOString()})});await fetch(`${this.baseUrl}/`,{body:JSON.stringify(r),method:"POST",headers:{"Content-Type":"application/json"}})}async delete(a){await fetch(`${this.baseUrl}/${a}`,{method:"DELETE"})}resolveRelativeUrl(a,r="."){return xe(r)?`${this.baseUrl}/${a}/${r}`:r}}class sa{constructor(a,r){I(this,"baseUrl");I(this,"dataUrl");this.baseUrl=a,this.dataUrl=r}async all(){return await(await fetch(`${this.baseUrl}/index.json`)).json()}async get(a){let s=await(await fetch(`${this.baseUrl}/${a}/index.json`)).json();return v(g({},s),{metadata:v(g({},s.metadata),{creation:new Date(s.metadata.creation.toString()),modification:new Date(s.metadata.modification.toString())}),dataUrl:this.dataUrl})}async update(a){let r=v(g({},a),{metadata:v(g({},a.metadata),{creation:a.metadata.creation.toISOString(),modification:a.metadata.modification.toISOString()})});await fetch(`${this.baseUrl}/`,{body:JSON.stringify(r),method:"POST",headers:{"Content-Type":"application/json"}})}async delete(a){await fetch(`${this.baseUrl}/${a}/`,{method:"DELETE"})}}class Je{constructor(a){I(this,"baseUrl");I(this,"materials");this.baseUrl=a,this.materials=new la(`${this.baseUrl}/materials`)}async metadata(){return await(await fetch(`${this.baseUrl}/index.json`)).json()}}const We=Symbol(),ra="/api",oa=rt({state(){return{api:new Je(ra),readerMode:!1}},mutations:{setApiUrl(l,a){l.api=new Je(a)},setReaderMode(l,a){l.readerMode=a}}});function D(){return ot(We)}const ia=p({setup(l){return ne(),b("home"),(a,r)=>(u(),_(J,null,{default:t(()=>[n(e(it))]),fallback:t(()=>[n(e(Se),{size:80,id:"loading-spin",style:{width:"100%"}})]),_:1}))}});var E=(l,a)=>{for(const[r,s]of a)l[r]=s;return l};const ua=p({setup(l){le();const a=D(),r=z(),s="#f9f5e9FF",o={common:{baseColor:s,popoverColor:s,tableColor:s,cardColor:s,modalColor:s,bodyColor:s,tagColor:s,inputColor:s,codeColor:s,tabColor:s,actionColor:s,tableHeaderColor:s,hoverColor:s,inputColorDisabled:s}},i=O(()=>a.state.readerMode&&r.value!="dark"),d=O(()=>{let c=navigator.language;return c.indexOf("zh")!=-1?{lang:ut,date:dt}:c.indexOf("ru")!=-1?{lang:ct,date:_t}:c.indexOf("uk")!=-1?{lang:ft,date:pt}:c.indexOf("ja")!=-1?{lang:ht,date:mt}:c.indexOf("id")!=-1?{lang:gt,date:vt}:{lang:yt,date:bt}});return(c,f)=>(u(),_(e(xt),{style:{height:"100%"},theme:e(r)=="dark"?e($t):null,"theme-overrides":e(i)?o:{},locale:e(d).lang,"date-locale":e(d).date},{default:t(()=>[n(e(wt),null,{default:t(()=>[n(e(kt)),(u(),_(J,null,{default:t(()=>[n(ia)]),fallback:t(()=>[n(e(Se),{size:80,id:"loading-spin"})]),_:1}))]),_:1})]),_:1},8,["theme","theme-overrides","locale","date-locale"]))}});var da=E(ua,[["__scopeId","data-v-41fa4579"]]);const ca=p({props:{scroll:null},setup(l){const a=l,r=O(()=>{var s;return(s=a.scroll)!=null?s:!1});return(s,o)=>e(r)?(u(),_(e(Y),{key:0,style:{height:"100%"},"native-scrollbar":!1},{default:t(()=>[n(e(Ue),{bordered:"",class:"page-header"},{default:t(()=>[X(s.$slots,"header",{},void 0,!0)]),_:3}),n(e(N),null,{default:t(()=>[X(s.$slots,"default",{},void 0,!0)]),_:3}),n(e(Ce),{right:100})]),_:3})):(u(),_(e(Y),{key:1,style:{height:"100%"}},{default:t(()=>[n(e(Ue),{bordered:"",class:"page-header"},{default:t(()=>[X(s.$slots,"header",{},void 0,!0)]),_:3}),n(e(N),{class:"page-content-scroll"},{default:t(()=>[X(s.$slots,"default",{},void 0,!0)]),_:3})]),_:3}))}});var ke=E(ca,[["__scopeId","data-v-6b14b3e8"]]);const _a=m("a",{href:"https://www.stardustdl.top/",style:{"text-decoration":"none",color:"inherit"}},"StardustDL",-1),fa=m("a",{href:"https://github.com/StardustDL/paperead/blob/master/LICENSE",style:{"text-decoration":"none",color:"inherit"}},"MPL-2.0",-1),pa=m("a",{href:"https://github.com/StardustDL/paperead",style:{"text-decoration":"none",color:"inherit"}},"GitHub",-1),ha=["href"];async function ma(l){let a,r;const s=([a,r]=B(async()=>([a,r]=B(()=>fetch("/build.json")),a=await a,r(),a).json()),a=await a,r(),a);return(o,i)=>(u(),_(e(j),{size:"large"},{default:t(()=>[n(e(A),{label:"Author"},{prefix:t(()=>[n(e($),null,{default:t(()=>[n(e(Te))]),_:1})]),default:t(()=>[_a]),_:1}),n(e(A),{label:"License"},{prefix:t(()=>[n(e($),null,{default:t(()=>[n(e(Me))]),_:1})]),default:t(()=>[fa]),_:1}),n(e(A),{label:"Source Code"},{prefix:t(()=>[n(e($),null,{default:t(()=>[n(e(je))]),_:1})]),default:t(()=>[pa]),_:1}),n(e(A),{label:"Commit"},{prefix:t(()=>[n(e($),null,{default:t(()=>[n(e(Le))]),_:1})]),default:t(()=>[m("a",{href:`https://github.com/StardustDL/paperead/commit/${e(s).commit}`,style:{"text-decoration":"none",color:"inherit"}},w(e(s).shortCommit),9,ha)]),_:1}),n(e(A),{label:"Build Date"},{prefix:t(()=>[n(e($),null,{default:t(()=>[n(e(se))]),_:1})]),default:t(()=>[n(e(re),{time:new Date(e(s).date),type:"relative"},null,8,["time"])]),_:1})]),_:1}))}const ga={components:{BrandGithub:je,At:Te,License:Me,GitCommit:Le,Clock:se}},va=p(v(g({},ga),{setup:ma})),ya=k(" Paperead ");function ba(l){return(a,r)=>(u(),_(e(he),null,{default:t(()=>[n(e(W),{to:"/"},{default:t(()=>[n(e($),null,{default:t(()=>[n(e(oe))]),_:1}),ya]),_:1})]),_:1}))}const $a={components:{HomeIcon:oe}},we=p(v(g({},$a),{setup:ba})),xa=m("span",null,"Creation:",-1),ka=k("\xA0 "),wa=m("br",null,null,-1),Na=m("span",null,"Modification:",-1),Ia=k("\xA0 ");function Sa(l){const a=l;return(r,s)=>(u(),_(e(Nt),null,{trigger:t(()=>[n(e(j),null,{default:t(()=>[n(e($),{size:"large"},{default:t(()=>[n(e(se))]),_:1}),n(e(re),{time:a.creation,type:"relative"},null,8,["time"])]),_:1})]),default:t(()=>[xa,ka,n(e(re),{time:a.creation},null,8,["time"]),wa,Na,Ia,n(e(re),{time:l.modification},null,8,["time"])]),_:1}))}const Ua={components:{Clock:se}},Ca=p(v(g({},Ua),{props:{creation:null,modification:null},setup:Sa}));function Ta(l){const a=l;return(r,s)=>(u(),_(e(j),null,{default:t(()=>[n(e($),{size:"large"},{default:t(()=>[n(e(Re))]),_:1}),(u(!0),S(R,null,H(a.tags,o=>(u(),_(e(It),{key:o,size:"small"},{default:t(()=>[k(w(o),1)]),_:2},1024))),128))]),_:1}))}const Ma={components:{Tag:Re}},ja=p(v(g({},Ma),{props:{tags:null},setup:Ta})),_e=p({props:{data:null},setup(l){return(a,r)=>(u(),_(e(j),null,{default:t(()=>[n(Ca,{creation:l.data.creation,modification:l.data.modification},null,8,["creation","modification"]),l.data.tags.length>0?(u(),_(ja,{key:0,tags:l.data.tags},null,8,["tags"])):V("",!0)]),_:1}))}});const La=p({props:{id:null},setup(l){const a=l,r=D(),s=b();async function o(){s.value=await r.state.api.materials.get(a.id)}return L(o),U(a,o),(i,d)=>s.value?(u(),_(e(ee),{key:0,hoverable:""},{header:t(()=>[n(e(W),{to:`/${s.value.id}`},{default:t(()=>[k(w(s.value.metadata.name),1)]),_:1},8,["to"])]),action:t(()=>[n(_e,{data:s.value.metadata},null,8,["data"])]),default:t(()=>[s.value.content.length>0?(u(),_(e(Pe),{key:0,tooltip:!1,"line-clamp":5},{default:t(()=>[k(w(e(Ge)(s.value.content)),1)]),_:1})):V("",!0)]),_:1})):V("",!0)}});var Ra=E(La,[["__scopeId","data-v-266b86a0"]]);const Ke=p({props:{items:null},setup(l){const a=l,r=b([]),s=b(1),o=b(5);function i(){let d=(s.value-1)*o.value;r.value=a.items.slice(d,d+o.value)}return U(s,i),U(o,i),L(i),U(a,()=>s.value=1),(d,c)=>(u(),_(e(j),{vertical:""},{default:t(()=>[(u(!0),S(R,null,H(r.value,f=>(u(),_(J,{key:f},{default:t(()=>[X(d.$slots,"default",{item:f})]),fallback:t(()=>[n(e(me),{text:"",repeat:2})]),_:2},1024))),128)),n(e(St),{style:{"justify-content":"center","margin-top":"20px"},"item-count":l.items.length,"page-size":o.value,"onUpdate:page-size":c[0]||(c[0]=f=>o.value=f),page:s.value,"onUpdate:page":c[1]||(c[1]=f=>s.value=f),"page-sizes":[5,10,20],"show-quick-jumper":"","show-size-picker":""},null,8,["item-count","page-size","page"])]),_:3}))}}),Pa=p({async setup(l){let a,r;const s=D(),o=([a,r]=B(()=>s.state.api.materials.all()),a=await a,r(),a);return(i,d)=>(u(),_(e(N),{"content-style":"padding: 10px;","native-scrollbar":!1,style:{height:"100%"}},{default:t(()=>[n(Ke,{items:e(o)},{default:t(c=>[n(Ra,{id:c.item},null,8,["id"])]),_:1},8,["items"])]),_:1}))}});const Da=k("Reading"),Ea=k("\xA0and "),za=k("Notes"),Oa=k("Welcome to Paperead."),Ba=["href"],Aa=["href"],Ha=["href"];async function Va(l){let a,r;const s=D(),o=ne(),i=z(),d=O(()=>s.state.readerMode&&i.value!="dark");function c(y=!0){s.commit("setReaderMode",y)}const f="0.1.8",h=([a,r]=B(()=>s.state.api.metadata()),a=await a,r(),a);return(y,x)=>(u(),_(ke,null,{header:t(()=>[n(e(ye),{subtitle:"\u9605\u8BFB\u4E0E\u7B14\u8BB0",onBack:x[1]||(x[1]=()=>e(o).back())},{avatar:t(()=>[n(e(ge),null,{default:t(()=>[n(e($),null,{default:t(()=>[n(e(De))]),_:1})]),_:1})]),title:t(()=>[n(e(Ee),{type:"info"},{default:t(()=>[Da]),_:1}),Ea,n(e(Ee),{type:"success"},{default:t(()=>[za]),_:1})]),header:t(()=>[n(e(ve),null,{default:t(()=>[n(we)]),_:1})]),extra:t(()=>[n(e(P),{size:"large",bordered:!1,title:"Reader mode",onClick:x[0]||(x[0]=()=>c(!e(d)))},{icon:t(()=>[n(e($),null,{default:t(()=>[e(d)?(u(),_(e(ie),{key:0})):(u(),_(e(ue),{key:1}))]),_:1})]),_:1})]),footer:t(()=>[Oa]),_:1})]),default:t(()=>[n(e(N),{style:{height:"100%"}},{default:t(()=>[n(e(ze),{type:"segment",style:{height:"100%"}},{default:t(()=>[n(e(de),{name:"info",tab:"Information",style:{height:"calc(100% - 52px)"}},{default:t(()=>[n(e(N),{"content-style":"padding: 10px;",style:{height:"100%"},"native-scrollbar":!1},{default:t(()=>[n(e(j),{vertical:"",size:"large"},{default:t(()=>[n(e(ee),{title:"Server",hoverable:"",embedded:""},{default:t(()=>[n(e(j),{size:"large"},{default:t(()=>[n(e(A),{label:"Server Endpoint"},{default:t(()=>[m("a",{href:e(s).state.api.baseUrl},w(e(s).state.api.baseUrl),9,Ba)]),_:1}),n(e(A),{label:"Server Version"},{default:t(()=>[m("a",{href:`https://github.com/StardustDL/paperead/releases/tag/v${e(h).version}`},w(e(h).version),9,Aa)]),_:1}),n(e(A),{label:"Client Version"},{default:t(()=>[m("a",{href:`https://github.com/StardustDL/paperead/releases/tag/v${e(f)}`},w(e(f)),9,Ha)]),_:1})]),_:1})]),_:1}),n(e(ee),{title:"Paperead",hoverable:"",embedded:""},{default:t(()=>[(u(),_(J,null,{default:t(()=>[n(va)]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),n(e(de),{name:"materials",tab:"Materials",style:{height:"calc(100% - 52px)"}},{default:t(()=>[n(Pa)]),_:1})]),_:1})]),_:1})]),_:1}))}const Fa={components:{Notebook:De,MaterialsIcon:Ut,EnableReaderIcon:ue,DisableReaderIcon:ie}},qa=p(v(g({},Fa),{setup:Va}));var Ga=E(qa,[["__scopeId","data-v-71336d0d"]]);const Ja=k("Home");function Wa(l){const r=le().params;return console.log("NotFound"),(s,o)=>(u(),_(e(Ct),{status:"404",title:"Not Found",description:`Path: /${e(r).path.join("/")}`,style:{margin:"50px"}},{footer:t(()=>[n(e(P),null,{icon:t(()=>[n(e($),null,{default:t(()=>[n(e(oe))]),_:1})]),default:t(()=>[n(e(W),{to:"/"},{default:t(()=>[Ja]),_:1})]),_:1})]),_:1},8,["description"]))}const Ka={components:{HomeIcon:oe,AlertCircle:Tt}},Za=p(v(g({},Ka),{setup:Wa}));var Qa=E(Za,[["__scopeId","data-v-7c7ff6aa"]]);const Xa=m("thead",null,[m("tr",null,[m("th",null,"Key"),m("th",null,"Value")])],-1);function Ya(l){const a=l,r=O(()=>{let s=[];for(let o in a.data.metadata.targets){let i=a.data.metadata.targets[o],d=xe(i)?`${a.data.dataUrl}/${i}`:i;s.push({label:()=>Mt("a",{target:"_blank",href:d},o),key:o})}return s});return(s,o)=>(u(),_(e(j),null,{default:t(()=>[Object.keys(l.data.metadata.extra).length>0?(u(),_(e(jt),{key:0,placement:"bottom-start",trigger:"hover"},{trigger:t(()=>[n(e(P),{bordered:!1,size:"large",title:"Extra"},{icon:t(()=>[n(e($),null,{default:t(()=>[n(e(Oe))]),_:1})]),_:1})]),default:t(()=>[n(e(Lt),null,{default:t(()=>[Xa,m("tbody",null,[(u(!0),S(R,null,H(l.data.metadata.extra,(i,d)=>(u(),S("tr",{key:d},[m("td",null,w(d),1),m("td",null,w(i),1)]))),128))])]),_:1})]),_:1})):V("",!0),Object.keys(l.data.metadata.targets).length>0?(u(),_(e(Rt),{key:1,options:e(r),placement:"bottom-start"},{default:t(()=>[n(e(P),{bordered:!1,size:"large",title:"Targets"},{icon:t(()=>[n(e($),null,{default:t(()=>[n(e(F))]),_:1})]),_:1})]),_:1},8,["options"])):V("",!0)]),_:1}))}const en={components:{Book:te,ArrowRight:Pt,ExternalLink:F,InfoSquare:Oe}},Ze=p(v(g({},en),{props:{data:null},setup:Ya}));function tn(l){return(a,r)=>(u(),_(e(he),null,{default:t(()=>[n(e(W),{to:`/${l.id}`},{default:t(()=>[n(e($),null,{default:t(()=>[n(e(te))]),_:1}),k(" "+w(l.id),1)]),_:1},8,["to"])]),_:1}))}const an={components:{MaterialIcon:te}},Qe=p(v(g({},an),{props:{id:null},setup:tn})),nn=p({props:{value:null},setup(l){const a=l;return(r,s)=>{const o=Dt("MarkdownPreviewOutlineItem",!0);return u(),_(e(Et),{title:a.value.title,href:a.value.href},{default:t(()=>[(u(!0),S(R,null,H(a.value.children,i=>(u(),_(o,{key:i.href,value:i},null,8,["value"]))),128))]),_:1},8,["title","href"])}}});class ln{constructor(a="",r="",s){I(this,"title","");I(this,"href","");I(this,"children",[]);this.title=a,this.href=r,s==null&&(s=[]),this.children=s}}const sn=p({props:{element:null},setup(l,{expose:a}){const r=l,s=b();function o(d){var x,K,G;let f=(x=d.children[0].getAttribute("data-target-id"))!=null?x:"",h=(G=(K=document.getElementById(f))==null?void 0:K.innerText)!=null?G:f,y=new ln(h,`#${f}`);if(d.children.length>1){let Z=d.children[1];for(let Q=0;Q<Z.children.length;Q++)y.children.push(o(Z.children[Q]))}return y}async function i(){if(r.element==null)return!1;let d=document.createElement("div");if(be.outlineRender(r.element,d),d.children.length==0)return s.value=[],!1;let c=d.children[0],f=[];for(let h=0;h<c.children.length;h++)f.push(o(c.children[h]));return s.value=f,!0}return L(i),U(r,i),a({renderOutline:i}),(d,c)=>(u(),_(e(zt),{type:"block","listen-to":l.element,"ignore-gap":!0},{default:t(()=>[(u(!0),S(R,null,H(s.value,f=>(u(),_(nn,{key:f.href,value:f},null,8,["value"]))),128))]),_:1},8,["listen-to"]))}});function rn(l,{expose:a}){const r=l,s=D(),o=z(),i=O(()=>{var T;return(T=r.baseUrl)!=null?T:""}),d=O(()=>o.value=="dark"?"dark":"light"),c=b(),f=b(),h=b(!0),y=b(!1),x=O(()=>s.state.readerMode&&o.value!="dark"),K=b(!1);async function G(){await be.preview(c.value,r.value,{mode:d.value,speech:{enable:!0},hljs:{lineNumber:!0,style:d.value=="dark"?"dracula":x.value?"monokailight":"github"},markdown:{linkBase:i.value,mark:!0},theme:{current:d.value}}),K.value=await f.value.renderOutline();{let T=c.value.getElementsByTagName("img");for(let M=0;M<T.length;M++){let C=T.item(M);C!=null&&(C.onclick=ae=>{be.previewImage(C,void 0,d.value)})}}}function Z(T=!0){y.value=T}function Q(T=!0){s.commit("setReaderMode",T)}return L(G),U(r,G),U(o,G),U(x,G),a({fullscreen:Z}),(T,M)=>(u(),_(e(Y),{class:Vt(y.value?"fullscreen":"normal"),"has-sider":"","sider-placement":"right",style:{height:"100%"}},{default:t(()=>[n(e(N),{style:{height:"100%"},"native-scrollbar":!1},{default:t(()=>[m("article",{ref:(C,ae)=>{ae.element=C,c.value=C},style:{"padding-bottom":"200px"}},null,512),n(e(Ce),{right:h.value?50:250,style:Ot(y.value?{"z-index":2}:{})},null,8,["right","style"])]),_:1}),n(e($e),{style:{height:"100%"},"collapse-mode":"width","collapsed-width":0,width:200,"show-trigger":"bar","default-collapsed":!0,"show-collapsed-content":!1,collapsed:h.value,"onUpdate:collapsed":M[2]||(M[2]=C=>h.value=C)},{default:t(()=>[n(e(N),{style:{height:"100%","background-color":"inherit"},"native-scrollbar":!1,"content-style":"padding: 10px;"},{default:t(()=>[n(e(j),null,{default:t(()=>[n(e(Bt),null,{default:t(()=>[n(e(P),{title:"Full screen",onClick:M[0]||(M[0]=()=>Z(!y.value))},{icon:t(()=>[n(e($),null,{default:t(()=>[y.value?(u(),_(e(Be),{key:0})):(u(),_(e(Ae),{key:1}))]),_:1})]),_:1}),n(e(P),{title:"Reader mode",onClick:M[1]||(M[1]=()=>Q(!e(x)))},{icon:t(()=>[n(e($),null,{default:t(()=>[e(x)?(u(),_(e(ie),{key:0})):(u(),_(e(ue),{key:1}))]),_:1})]),_:1})]),_:1}),At(n(sn,{element:c.value,ref:(C,ae)=>{ae.outline=C,f.value=C}},null,8,["element"]),[[Ht,K.value]])]),_:1})]),_:1})]),_:1},8,["collapsed"])]),_:1},8,["class"]))}const on={components:{Maximize:Ae,Minimize:Be,EnableReaderIcon:ue,DisableReaderIcon:ie}},un=p(v(g({},on),{props:{value:null,baseUrl:null},setup:rn}));var dn=E(un,[["__scopeId","data-v-00ede2da"]]);const cn=p({props:{data:null},setup(l){return(a,r)=>(u(),_(dn,{value:l.data.content,"base-url":l.data.dataUrl},null,8,["value","base-url"]))}});const _n=p({props:{css:null},setup(l){const a=l,r=document.getElementsByTagName("head")[0],s=[];function o(){for(let d of s)r.removeChild(d);s.length=0}function i(){if(o(),a.css!=null)for(let d of a.css){let c=document.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=d,r.appendChild(c),s.push(c)}}return L(i),U(a,i),He(o),()=>{}}}),fn={class:"slides"},pn={"data-markdown":"","data-separator":"^\\r?\\n===\\r?\\n$","data-separator-vertical":"^\\r?\\n---\\r?\\n$","data-separator-notes":"notes?:"},hn={"data-template":""},mn=p({props:{data:null},setup(l){const a=l,r=z(),s=b(),o=["https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.2/theme/white.min.css","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/github.min.css"],i=["https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.2/theme/black.min.css","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/monokai.min.css"];return L(()=>{new Ft({plugins:[qt,Gt,Jt,Wt,Kt,Zt],center:!1,markdown:{baseUrl:a.data.dataUrl,smartLists:!0,smartypants:!0},slideNumber:"c/t",hash:!0,embedded:!0}).initialize()}),(d,c)=>(u(),S(R,null,[n(_n,{css:e(r)=="dark"?i:o},null,8,["css"]),m("div",{class:"reveal",ref:(f,h)=>{h.element=f,s.value=f}},[m("div",fn,[m("section",pn,[m("textarea",hn,w(l.data.content),1)])])],512)],64))}}),gn=p({props:{data:null},setup(l){return z(),(a,r)=>(u(),_(mn,{data:l.data},null,8,["data"]))}});class vn{constructor(a){I(this,"title");I(this,"url","");I(this,"description","");I(this,"cover","");I(this,"renderedDescription","");this.title=a}}function Ne(l){let a=[],r=pe.lexer(l.content),s=0;for(;s<r.length;){let o=null;for(;o==null&&s<r.length;){let i=r[s];i.type=="heading"&&i.depth==1&&(o=i.text),s++}if(o!=null){let i=new vn(o);for(;s<r.length;){let d=r[s];if(d.type=="heading"&&d.depth==1)break;let c=!1;if(d.type=="paragraph"){for(let f of d.tokens)if(f.type=="image"||f.type=="link"){let h=f.href;switch(xe(h)&&(h=`${l.dataUrl}/${h}`),f.text){case"url":i.url==""&&(i.url=h,c=!0);break;case"cover":i.cover==""&&(i.cover=h,c=!0);break}}}c||(i.description+=d.raw),s++}i.renderedDescription=pe(i.description,{baseUrl:l.dataUrl,headerIds:!1,smartLists:!0,smartypants:!0}),a.push(i)}}return a}const yn=["innerHTML"];function bn(l){const a=l;z();const r=b(),s=b([]),o=b(0),i=b();function d(f=!1){var y,x;if(s.value.length==0)return;o.value>=s.value.length&&(o.value=s.value.length-1);let h=s.value[o.value];(y=i.value)==null||y.switchVideo({url:h.url,pic:h.cover},void 0),f&&((x=i.value)==null||x.play())}function c(f){f.length!=0&&(o.value=parseInt(f[0]),d())}return L(()=>{i.value=new Qt({container:r.value,screenshot:!0,video:{url:""}}),i.value.on("ended",()=>{}),s.value=Ne(a.data),d()}),He(()=>{i.value!=null&&i.value.destroy()}),(f,h)=>(u(),_(e(Y),{"has-sider":"","sider-placement":"right",style:{height:"100%"}},{default:t(()=>[n(e(N),{style:{height:"100%"},"native-scrollbar":!1},{default:t(()=>[m("div",{ref:(y,x)=>{x.container=y,r.value=y}},null,512)]),_:1}),n(e($e),{style:{height:"100%"},"collapse-mode":"width","collapsed-width":0,width:200,"show-trigger":"bar","default-collapsed":!0,"show-collapsed-content":!1},{default:t(()=>[n(e(N),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"padding: 10px;"},{default:t(()=>[n(e(Ve),{accordion:!0,"arrow-placement":"right","expanded-names":o.value.toString(),onUpdateExpandedNames:c},{default:t(()=>[(u(!0),S(R,null,H(s.value,(y,x)=>(u(),_(e(Fe),{title:y.title,name:x.toString()},{"header-extra":t(()=>[n(e(P),{bordered:!1,size:"large",href:y.url,tag:"a",target:"_blank"},{icon:t(()=>[n(e($),null,{default:t(()=>[n(e(F))]),_:1})]),_:2},1032,["href"])]),default:t(()=>[m("div",{innerHTML:y.renderedDescription},null,8,yn)]),_:2},1032,["title","name"]))),256))]),_:1},8,["expanded-names"])]),_:1})]),_:1})]),_:1}))}const $n={components:{ExternalLink:F}},xn=p(v(g({},$n),{props:{data:null},setup:bn})),kn=["innerHTML"];function wn(l){const a=l;z(),b();const r=b([]),s=b(),o=b(0);function i(){if(r.value.length==0){s.value=void 0;return}o.value>=r.value.length&&(o.value=r.value.length-1),s.value=r.value[o.value]}return L(()=>{r.value=Ne(a.data)}),U(r,i),U(o,i),(d,c)=>(u(),_(e(N),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"padding: 20px;"},{default:t(()=>[n(e(j),{style:{"justify-content":"center"}},{default:t(()=>[(u(!0),S(R,null,H(r.value,(f,h)=>(u(),_(e(ee),{hoverable:"",embedded:"",title:f.title,key:h,style:{"max-width":"300px"}},{cover:t(()=>[n(e(Xt),{"object-fit":"cover",alt:f.title,src:f.url},null,8,["alt","src"])]),"header-extra":t(()=>[n(e(P),{bordered:!1,size:"large",href:f.url,tag:"a",target:"_blank"},{icon:t(()=>[n(e($),null,{default:t(()=>[n(e(F))]),_:1})]),_:2},1032,["href"])]),default:t(()=>[m("div",{innerHTML:f.renderedDescription},null,8,kn)]),_:2},1032,["title"]))),128))]),_:1})]),_:1}))}const Nn={components:{ExternalLink:F}},In=p(v(g({},Nn),{props:{data:null},setup:wn})),Sn=["src"],Un=["innerHTML"];function Cn(l){const a=l;z();const r=b([]),s=b(0);function o(i){i.length!=0&&(s.value=parseInt(i[0]))}return L(()=>{r.value=Ne(a.data)}),(i,d)=>(u(),_(e(Y),{"has-sider":"","sider-placement":"right",style:{height:"100%"}},{default:t(()=>[n(e(N),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"height: 100%;"},{default:t(()=>[s.value<r.value.length?(u(),S("iframe",{key:0,height:"100%",width:"100%",src:r.value[s.value].url,style:{border:"0"}},null,8,Sn)):V("",!0)]),_:1}),n(e($e),{style:{height:"100%"},"collapse-mode":"width","collapsed-width":0,width:200,"show-trigger":"bar","default-collapsed":!0,"show-collapsed-content":!1},{default:t(()=>[n(e(N),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"padding: 10px;"},{default:t(()=>[n(e(Ve),{accordion:!0,"arrow-placement":"right","expanded-names":s.value.toString(),onUpdateExpandedNames:o},{default:t(()=>[(u(!0),S(R,null,H(r.value,(c,f)=>(u(),_(e(Fe),{title:c.title,name:f.toString()},{"header-extra":t(()=>[n(e(P),{bordered:!1,size:"large",href:c.url,tag:"a",target:"_blank"},{icon:t(()=>[n(e($),null,{default:t(()=>[n(e(F))]),_:1})]),_:2},1032,["href"])]),default:t(()=>[m("div",{innerHTML:c.renderedDescription},null,8,Un)]),_:2},1032,["title","name"]))),256))]),_:1},8,["expanded-names"])]),_:1})]),_:1})]),_:1}))}const Tn={components:{ExternalLink:F}},Mn=p(v(g({},Tn),{props:{data:null},setup:Cn})),jn={key:0},Xe=p({props:{data:null},setup(l){return(a,r)=>l.data.metadata.schema=="empty"?(u(),S("span",jn,"Empty data")):l.data.metadata.schema=="slides"?(u(),_(gn,{key:1,data:l.data},null,8,["data"])):l.data.metadata.schema=="media"?(u(),_(xn,{key:2,data:l.data},null,8,["data"])):l.data.metadata.schema=="image"?(u(),_(In,{key:3,data:l.data},null,8,["data"])):l.data.metadata.schema=="pdf"?(u(),_(Mn,{key:4,data:l.data},null,8,["data"])):(u(),_(cn,{key:5,data:l.data},null,8,["data"]))}});const Ln=p({props:{id:null,noteId:null},setup(l){const a=l,r=D(),s=b();async function o(){s.value=await r.state.api.materials.notes(a.id).get(a.noteId)}return L(o),U(a,o),(i,d)=>s.value?(u(),_(e(ee),{key:0,hoverable:""},{header:t(()=>[n(e(W),{to:`/${a.id}/${s.value.id}`},{default:t(()=>[k(w(s.value.metadata.name),1)]),_:1},8,["to"])]),action:t(()=>[n(_e,{data:s.value.metadata},null,8,["data"])]),default:t(()=>[s.value.content.length>0?(u(),_(e(Pe),{key:0,tooltip:!1,"line-clamp":5},{default:t(()=>[k(w(e(Ge)(s.value.content)),1)]),_:1})):V("",!0)]),_:1})):V("",!0)}});var Rn=E(Ln,[["__scopeId","data-v-020c345b"]]);async function Pn(l){let a,r;const s=l,o=D(),i=([a,r]=B(()=>o.state.api.materials.notes(s.id).all()),a=await a,r(),a);return(d,c)=>(u(),_(e(N),{"content-style":"padding: 10px;","native-scrollbar":!1,style:{height:"100%"}},{default:t(()=>[n(Ke,{items:e(i)},{default:t(f=>[n(Rn,{id:l.id,noteId:f.item},null,8,["id","noteId"])]),_:1},8,["items"])]),_:1}))}const Dn={components:{NotesIcon:qe}},En=p(v(g({},Dn),{props:{id:null},setup:Pn}));async function zn(l){let a,r;const s=le(),o=ne(),i=D(),d=s.params,c=([a,r]=B(()=>i.state.api.materials.get(d.id)),a=await a,r(),a);return document.title=`${c.metadata.name} - Paperead`,(f,h)=>(u(),_(ke,null,{header:t(()=>[n(e(ye),{onBack:h[0]||(h[0]=()=>e(o).back())},{title:t(()=>[k(w(e(c).metadata.name),1)]),header:t(()=>[n(e(ve),null,{default:t(()=>[n(we),n(Qe,{id:e(c).id},null,8,["id"])]),_:1})]),avatar:t(()=>[n(e(ge),null,{default:t(()=>[n(e($),null,{default:t(()=>[n(e(te))]),_:1})]),_:1})]),extra:t(()=>[n(Ze,{data:e(c)},null,8,["data"])]),footer:t(()=>[n(_e,{data:e(c).metadata},null,8,["data"])]),_:1})]),default:t(()=>[n(e(N),{style:{height:"100%"}},{default:t(()=>[n(e(ze),{type:"segment",style:{height:"100%"}},{default:t(()=>[n(e(de),{name:"description",tab:"Description",style:{height:"calc(100% - 52px)"}},{default:t(()=>[(u(),_(J,null,{default:t(()=>[n(Xe,{data:e(c)},null,8,["data"])]),fallback:t(()=>[n(e(me),{text:"",repeat:10})]),_:1}))]),_:1}),n(e(de),{name:"notes",tab:"Notes",style:{height:"calc(100% - 52px)"}},{default:t(()=>[n(En,{id:e(d).id},null,8,["id"])]),_:1})]),_:1})]),_:1})]),_:1}))}const On={components:{MaterialIcon:te,NotesIcon:qe}},Bn=p(v(g({},On),{setup:zn}));var An=E(Bn,[["__scopeId","data-v-3b2aa29d"]]);function Hn(l){return(a,r)=>(u(),_(e(he),null,{default:t(()=>[n(e(W),{to:`/${l.id}/${l.noteId}`},{default:t(()=>[n(e($),null,{default:t(()=>[n(e(ce))]),_:1}),k(" "+w(l.noteId),1)]),_:1},8,["to"])]),_:1}))}const Vn={components:{NoteIcon:ce}},Fn=p(v(g({},Vn),{props:{id:null,noteId:null},setup:Hn}));async function qn(l){let a,r;const s=le(),o=ne(),i=D(),d=s.params,c=([a,r]=B(()=>i.state.api.materials.notes(d.id).get(d.noteId)),a=await a,r(),a),f=([a,r]=B(()=>i.state.api.materials.get(d.id)),a=await a,r(),a);return document.title=`${c.metadata.name} - ${f.metadata.name} - Paperead`,(h,y)=>(u(),_(ke,null,{header:t(()=>[n(e(ye),{onBack:y[0]||(y[0]=()=>e(o).back())},{title:t(()=>[k(w(e(c).metadata.name),1)]),header:t(()=>[n(e(ve),null,{default:t(()=>[n(we),n(Qe,{id:e(d).id},null,8,["id"]),n(Fn,{id:e(d).id,"note-id":e(c).id},null,8,["id","note-id"])]),_:1})]),avatar:t(()=>[n(e(ge),null,{default:t(()=>[n(e($),null,{default:t(()=>[n(e(ce))]),_:1})]),_:1})]),extra:t(()=>[n(Ze,{data:e(c)},null,8,["data"])]),footer:t(()=>[n(_e,{data:e(c).metadata},null,8,["data"])]),_:1})]),default:t(()=>[n(e(N),{style:{height:"100%"}},{default:t(()=>[(u(),_(J,null,{default:t(()=>[n(Xe,{data:e(c)},null,8,["data"])]),fallback:t(()=>[n(e(me),{text:"",repeat:10})]),_:1}))]),_:1})]),_:1}))}const Gn={components:{NoteIcon:ce}},Jn=p(v(g({},Gn),{setup:qn}));var Wn=E(Jn,[["__scopeId","data-v-3b441506"]]);const Kn=[{path:"/",component:Ga,meta:{title:"Home - Paperead"}},{path:"/:id",component:An,meta:{title:"Loading... - Paperead"}},{path:"/:id/:noteId",component:Wn,meta:{title:"Loading... - Loading... - Paperead"}},{path:"/:path*",component:Qa,meta:{title:"Not found - Paperead"}}],Ye=Yt({history:ea(),routes:Kn});Ye.beforeEach((l,a)=>(l.path==a.path||(document.title=l.meta.title.toString()),!0));const et=ta(da);et.use(Ye).use(oa,We);et.mount("#app");
