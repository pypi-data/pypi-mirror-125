var Xe=Object.defineProperty,Ye=Object.defineProperties;var et=Object.getOwnPropertyDescriptors;var we=Object.getOwnPropertySymbols;var tt=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable;var ye=(r,a,s)=>a in r?Xe(r,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[a]=s,h=(r,a)=>{for(var s in a||(a={}))tt.call(a,s)&&ye(r,s,a[s]);if(we)for(var s of we(a))at.call(a,s)&&ye(r,s,a[s]);return r},v=(r,a)=>Ye(r,et(a));var I=(r,a,s)=>(ye(r,typeof a!="symbol"?a+"":a,s),s);import{c as lt,u as nt,d as f,a as q,r as k,o as u,b as _,w as t,e as l,f as e,R as st,N as Ne,S as W,g as Y,h as H,i as D,z as rt,j as ot,k as it,l as ut,m as dt,n as ct,p as _t,q as pt,s as ft,t as mt,v as ht,x as vt,y as gt,A as yt,B as bt,C as $t,D as ee,E as Ie,F as S,G as Se,H as de,I as T,J as g,K as Ue,L as E,M as Ce,O as Me,P as je,Q as y,T as w,U as ce,V as _e,W as U,X as pe,Y as z,Z as te,_ as $,$ as ae,a0 as Le,a1 as Pe,a2 as le,a3 as O,a4 as K,a5 as fe,a6 as me,a7 as ne,a8 as se,a9 as kt,aa as xt,ab as wt,ac as Te,ad as P,ae as F,af as Nt,ag as A,ah as G,ai as R,aj as N,ak as Re,al as It,am as be,an as St,ao as Ut,ap as Be,aq as Ct,ar as Mt,as as De,at as re,au as jt,av as Lt,aw as Pt,ax as Tt,ay as $e,az as Rt,aA as Bt,aB as Ee,aC as ze,aD as Dt,aE as Et,aF as Oe,aG as zt,aH as Ae,aI as Ot,aJ as At,aK as Vt,aL as Ht,aM as Ft,aN as Gt,aO as Jt,aP as Ve,aQ as qt,aR as Wt,aS as Kt,aT as Zt,aU as Z,aV as he,aW as Qt,aX as Xt,aY as Yt}from"./vendor.6b5cb6ee.js";const ea=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function s(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=s(o);fetch(o.href,i)}};ea();function ke(r){return(r==null?void 0:r.startsWith("./"))||(r==null?void 0:r.startsWith("../"))||r=="."||r==".."}class ta{constructor(a){I(this,"baseUrl");this.baseUrl=a}async all(){return await(await fetch(`${this.baseUrl}/index.json`)).json()}async get(a){let n=await(await fetch(`${this.baseUrl}/${a}/index.json`)).json();return v(h({},n),{metadata:v(h({},n.metadata),{creation:new Date(n.metadata.creation.toString()),modification:new Date(n.metadata.modification.toString())}),dataUrl:this.resolveRelativeUrl(a)})}notes(a){return new aa(`${this.baseUrl}/${a}/notes`,this.resolveRelativeUrl(a,"./notes"))}async update(a){let s=v(h({},a),{metadata:v(h({},a.metadata),{creation:a.metadata.creation.toISOString(),modification:a.metadata.modification.toISOString()})});await fetch(`${this.baseUrl}/`,{body:JSON.stringify(s),method:"POST",headers:{"Content-Type":"application/json"}})}async delete(a){await fetch(`${this.baseUrl}/${a}`,{method:"DELETE"})}resolveRelativeUrl(a,s="."){return ke(s)?`${this.baseUrl}/${a}/${s}`:s}}class aa{constructor(a,s){I(this,"baseUrl");I(this,"dataUrl");this.baseUrl=a,this.dataUrl=s}async all(){return await(await fetch(`${this.baseUrl}/index.json`)).json()}async get(a){let n=await(await fetch(`${this.baseUrl}/${a}/index.json`)).json();return v(h({},n),{metadata:v(h({},n.metadata),{creation:new Date(n.metadata.creation.toString()),modification:new Date(n.metadata.modification.toString())}),dataUrl:this.dataUrl})}async update(a){let s=v(h({},a),{metadata:v(h({},a.metadata),{creation:a.metadata.creation.toISOString(),modification:a.metadata.modification.toISOString()})});await fetch(`${this.baseUrl}/`,{body:JSON.stringify(s),method:"POST",headers:{"Content-Type":"application/json"}})}async delete(a){await fetch(`${this.baseUrl}/${a}/`,{method:"DELETE"})}}class He{constructor(a){I(this,"baseUrl");I(this,"materials");this.baseUrl=a,this.materials=new ta(`${this.baseUrl}/materials`)}async metadata(){return await(await fetch(`${this.baseUrl}/index.json`)).json()}}const Fe=Symbol(),la="/api",na=lt({state(){return{api:new He(la),readerMode:!1}},mutations:{setApiUrl(r,a){r.api=new He(a)},setReaderMode(r,a){r.readerMode=a}}});function B(){return nt(Fe)}const sa=f({setup(r){return q(),k("home"),(a,s)=>(u(),_(W,null,{default:t(()=>[l(e(st))]),fallback:t(()=>[l(e(Ne),{size:80,id:"loading-spin",style:{width:"100%"}})]),_:1}))}});var M=(r,a)=>{for(const[s,n]of a)r[s]=n;return r};const ra=f({setup(r){Y();const a=B(),s=H(),n="#f9f5e9FF",o={common:{baseColor:n,popoverColor:n,tableColor:n,cardColor:n,modalColor:n,bodyColor:n,tagColor:n,inputColor:n,codeColor:n,tabColor:n,actionColor:n,tableHeaderColor:n,hoverColor:n,inputColorDisabled:n}},i=D(()=>a.state.readerMode&&s.value!="dark"),d=D(()=>{let c=navigator.language;return c.indexOf("zh")!=-1?{lang:rt,date:ot}:c.indexOf("ru")!=-1?{lang:it,date:ut}:c.indexOf("uk")!=-1?{lang:dt,date:ct}:c.indexOf("ja")!=-1?{lang:_t,date:pt}:c.indexOf("id")!=-1?{lang:ft,date:mt}:{lang:ht,date:vt}});return(c,p)=>(u(),_(e(yt),{style:{height:"100%"},theme:e(s)=="dark"?e(gt):null,"theme-overrides":e(i)?o:{},locale:e(d).lang,"date-locale":e(d).date},{default:t(()=>[l(e($t),null,{default:t(()=>[l(e(bt)),(u(),_(W,null,{default:t(()=>[l(sa)]),fallback:t(()=>[l(e(Ne),{size:80,id:"loading-spin"})]),_:1}))]),_:1})]),_:1},8,["theme","theme-overrides","locale","date-locale"]))}});var oa=M(ra,[["__scopeId","data-v-41fa4579"]]);const ia=f({props:{scroll:null},setup(r){const a=r,s=D(()=>{var n;return(n=a.scroll)!=null?n:!1});return(n,o)=>e(s)?(u(),_(e(de),{key:0,style:{height:"100%"},"native-scrollbar":!1},{default:t(()=>[l(e(Ie),{bordered:"",class:"page-header"},{default:t(()=>[ee(n.$slots,"header",{},void 0,!0)]),_:3}),l(e(S),null,{default:t(()=>[ee(n.$slots,"default",{},void 0,!0)]),_:3}),l(e(Se),{right:100})]),_:3})):(u(),_(e(de),{key:1,style:{height:"100%"}},{default:t(()=>[l(e(Ie),{bordered:"",class:"page-header"},{default:t(()=>[ee(n.$slots,"header",{},void 0,!0)]),_:3}),l(e(S),{class:"page-content-scroll"},{default:t(()=>[ee(n.$slots,"default",{},void 0,!0)]),_:3})]),_:3}))}});var oe=M(ia,[["__scopeId","data-v-6b14b3e8"]]);const ua=y("a",{href:"https://www.stardustdl.top/",style:{"text-decoration":"none",color:"inherit"}},"StardustDL",-1),da=y("a",{href:"https://github.com/StardustDL/paperead/blob/master/LICENSE",style:{"text-decoration":"none",color:"inherit"}},"MPL-2.0",-1),ca=y("a",{href:"https://github.com/StardustDL/paperead",style:{"text-decoration":"none",color:"inherit"}},"GitHub",-1),_a=["href"];async function pa(r){let a,s;const n=([a,s]=T(async()=>([a,s]=T(()=>fetch("/build.json")),a=await a,s(),a).json()),a=await a,s(),a);return(o,i)=>(u(),_(e(U),{size:"large"},{default:t(()=>[l(e(E),{label:"Author"},{prefix:t(()=>[l(e(g),null,{default:t(()=>[l(e(Ue))]),_:1})]),default:t(()=>[ua]),_:1}),l(e(E),{label:"License"},{prefix:t(()=>[l(e(g),null,{default:t(()=>[l(e(Ce))]),_:1})]),default:t(()=>[da]),_:1}),l(e(E),{label:"Source Code"},{prefix:t(()=>[l(e(g),null,{default:t(()=>[l(e(Me))]),_:1})]),default:t(()=>[ca]),_:1}),l(e(E),{label:"Commit"},{prefix:t(()=>[l(e(g),null,{default:t(()=>[l(e(je))]),_:1})]),default:t(()=>[y("a",{href:`https://github.com/StardustDL/paperead/commit/${e(n).commit}`,style:{"text-decoration":"none",color:"inherit"}},w(e(n).shortCommit),9,_a)]),_:1}),l(e(E),{label:"Build Date"},{prefix:t(()=>[l(e(g),null,{default:t(()=>[l(e(ce))]),_:1})]),default:t(()=>[l(e(_e),{time:new Date(e(n).date),type:"relative"},null,8,["time"])]),_:1})]),_:1}))}const fa={components:{BrandGithub:Me,At:Ue,License:Ce,GitCommit:je,Clock:ce}},ma=f(v(h({},fa),{setup:pa})),ha=$(" Paperead ");function va(r){return(a,s)=>(u(),_(e(te),null,{default:t(()=>[l(e(z),{to:"/"},{default:t(()=>[l(e(g),null,{default:t(()=>[l(e(pe))]),_:1}),ha]),_:1})]),_:1}))}const ga={components:{HomeIcon:pe}},ie=f(v(h({},ga),{setup:va}));const ya=$("Reading"),ba=$("\xA0and "),$a=$("Notes"),ka=$("Welcome to Paperead."),xa=["href"],wa=["href"],Na=["href"];async function Ia(r){let a,s;const n=B(),o=q(),i=H(),d=D(()=>n.state.readerMode&&i.value!="dark");function c(b=!0){n.commit("setReaderMode",b)}const p="0.1.3",m=([a,s]=T(()=>n.state.api.metadata()),a=await a,s(),a);return(b,x)=>(u(),_(oe,null,{header:t(()=>[l(e(ne),{subtitle:"\u9605\u8BFB\u4E0E\u7B14\u8BB0",onBack:x[2]||(x[2]=()=>e(o).back())},{avatar:t(()=>[l(e(ae),null,{default:t(()=>[l(e(g),null,{default:t(()=>[l(e(Le))]),_:1})]),_:1})]),title:t(()=>[l(e(Pe),{type:"info"},{default:t(()=>[ya]),_:1}),ba,l(e(Pe),{type:"success"},{default:t(()=>[$a]),_:1})]),header:t(()=>[l(e(le),null,{default:t(()=>[l(ie)]),_:1})]),extra:t(()=>[l(e(U),null,{default:t(()=>[l(e(O),{size:"large",bordered:!1,onClick:x[0]||(x[0]=J=>e(o).push("/materials")),title:"Materials"},{icon:t(()=>[l(e(g),null,{default:t(()=>[l(e(K))]),_:1})]),_:1}),l(e(O),{size:"large",bordered:!1,title:"Reader mode",onClick:x[1]||(x[1]=()=>c(!e(d)))},{icon:t(()=>[l(e(g),null,{default:t(()=>[e(d)?(u(),_(e(fe),{key:0})):(u(),_(e(me),{key:1}))]),_:1})]),_:1})]),_:1})]),footer:t(()=>[ka]),_:1})]),default:t(()=>[l(e(S),{"content-style":"padding: 10px;"},{default:t(()=>[l(e(U),{vertical:"",size:"large"},{default:t(()=>[l(e(se),{title:"Server Information",hoverable:"",embedded:""},{default:t(()=>[l(e(U),{size:"large"},{default:t(()=>[l(e(E),{label:"Server Endpoint"},{default:t(()=>[y("a",{href:e(n).state.api.baseUrl},w(e(n).state.api.baseUrl),9,xa)]),_:1}),l(e(E),{label:"Server Version"},{default:t(()=>[y("a",{href:`https://github.com/StardustDL/paperead/releases/tag/v${e(m).version}`},w(e(m).version),9,wa)]),_:1}),l(e(E),{label:"Client Version"},{default:t(()=>[y("a",{href:`https://github.com/StardustDL/paperead/releases/tag/v${e(p)}`},w(e(p)),9,Na)]),_:1})]),_:1})]),_:1}),l(e(se),{title:"Paperead Information",hoverable:"",embedded:""},{default:t(()=>[(u(),_(W,null,{default:t(()=>[l(ma)]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}))}const Sa={components:{Notebook:Le,MaterialsIcon:K,EnableReaderIcon:me,DisableReaderIcon:fe}},Ua=f(v(h({},Sa),{setup:Ia}));var Ca=M(Ua,[["__scopeId","data-v-024387c1"]]);const Ma=$("Home");function ja(r){const s=Y().params;return(n,o)=>(u(),_(e(kt),{status:"404",title:"Not Found",description:`Path: /${e(s).path.join("/")}`},{footer:t(()=>[l(e(O),null,{icon:t(()=>[l(e(g),null,{default:t(()=>[l(e(pe))]),_:1})]),default:t(()=>[l(e(z),{to:"/"},{default:t(()=>[Ma]),_:1})]),_:1})]),_:1},8,["description"]))}const La={components:{HomeIcon:pe,AlertCircle:xt}},Pa=f(v(h({},La),{setup:ja}));var Ta=M(Pa,[["__scopeId","data-v-2c7fc51a"]]);const Ra=y("span",null,"Creation:",-1),Ba=$("\xA0 "),Da=y("br",null,null,-1),Ea=y("span",null,"Modification:",-1),za=$("\xA0 ");function Oa(r){const a=r;return(s,n)=>(u(),_(e(wt),null,{trigger:t(()=>[l(e(U),null,{default:t(()=>[l(e(g),{size:"large"},{default:t(()=>[l(e(ce))]),_:1}),l(e(_e),{time:a.creation,type:"relative"},null,8,["time"])]),_:1})]),default:t(()=>[Ra,Ba,l(e(_e),{time:a.creation},null,8,["time"]),Da,Ea,za,l(e(_e),{time:r.modification},null,8,["time"])]),_:1}))}const Aa={components:{Clock:ce}},Va=f(v(h({},Aa),{props:{creation:null,modification:null},setup:Oa}));function Ha(r){const a=r;return(s,n)=>(u(),_(e(U),null,{default:t(()=>[l(e(g),{size:"large"},{default:t(()=>[l(e(Te))]),_:1}),(u(!0),P(A,null,F(a.tags,o=>(u(),_(e(Nt),{key:o,size:"small"},{default:t(()=>[$(w(o),1)]),_:2},1024))),128))]),_:1}))}const Fa={components:{Tag:Te}},Ga=f(v(h({},Fa),{props:{tags:null},setup:Ha})),ve=f({props:{data:null},setup(r){return(a,s)=>(u(),_(e(U),null,{default:t(()=>[l(Va,{creation:r.data.creation,modification:r.data.modification},null,8,["creation","modification"]),r.data.tags.length>0?(u(),_(Ga,{key:0,tags:r.data.tags},null,8,["tags"])):G("",!0)]),_:1}))}});const Ja=f({props:{id:null},setup(r){const a=r,s=B(),n=k();async function o(){n.value=await s.state.api.materials.get(a.id)}return R(o),N(a,o),(i,d)=>n.value?(u(),_(e(se),{key:0,hoverable:""},{header:t(()=>[l(e(z),{to:`/materials/${n.value.id}`},{default:t(()=>[$(w(n.value.metadata.name),1)]),_:1},8,["to"])]),action:t(()=>[l(ve,{data:n.value.metadata},null,8,["data"])]),default:t(()=>[n.value.content.length>0?(u(),_(e(Re),{key:0,tooltip:!1,"line-clamp":5},{default:t(()=>[$(w(n.value.content),1)]),_:1})):G("",!0)]),_:1})):G("",!0)}});var qa=M(Ja,[["__scopeId","data-v-468e43f2"]]);const Ge=f({props:{items:null},setup(r){const a=r,s=k([]),n=k(1),o=k(5);function i(){let d=(n.value-1)*o.value;s.value=a.items.slice(d,d+o.value)}return N(n,i),N(o,i),R(i),N(a,()=>n.value=1),(d,c)=>(u(),_(e(U),{vertical:""},{default:t(()=>[(u(!0),P(A,null,F(s.value,p=>(u(),_(W,{key:p},{default:t(()=>[ee(d.$slots,"default",{item:p})]),fallback:t(()=>[l(e(be),{text:"",repeat:2})]),_:2},1024))),128)),l(e(It),{style:{"justify-content":"center","margin-top":"20px"},"item-count":r.items.length,"page-size":o.value,"onUpdate:page-size":c[0]||(c[0]=p=>o.value=p),page:n.value,"onUpdate:page":c[1]||(c[1]=p=>n.value=p),"page-sizes":[5,10,20],"show-quick-jumper":"","show-size-picker":""},null,8,["item-count","page-size","page"])]),_:3}))}}),Wa=$(" Materials ");function Ka(r){return(a,s)=>(u(),_(e(te),null,{default:t(()=>[l(e(z),{to:"/materials"},{default:t(()=>[l(e(g),null,{default:t(()=>[l(e(K))]),_:1}),Wa]),_:1})]),_:1}))}const Za={components:{MaterialsIcon:K}},ge=f(v(h({},Za),{setup:Ka}));const Qa=$("Materials");async function Xa(r){let a,s;const n=B(),o=q(),i=([a,s]=T(()=>n.state.api.materials.all()),a=await a,s(),a);return(d,c)=>(u(),_(oe,null,{header:t(()=>[l(e(ne),{subtitle:"\u6240\u6709\u6750\u6599",onBack:c[0]||(c[0]=()=>e(o).back())},{title:t(()=>[Qa]),header:t(()=>[l(e(le),null,{default:t(()=>[l(ie),l(ge)]),_:1})]),avatar:t(()=>[l(e(ae),null,{default:t(()=>[l(e(g),null,{default:t(()=>[l(e(K))]),_:1})]),_:1})]),footer:t(()=>[$("Totally "+w(e(i).length)+" material"+w(e(i).length>1?"s":"")+".",1)]),_:1})]),default:t(()=>[l(e(S),{"content-style":"padding: 10px;","native-scrollbar":!1,style:{height:"100%"}},{default:t(()=>[l(Ge,{items:e(i)},{default:t(p=>[l(qa,{id:p.item},null,8,["id"])]),_:1},8,["items"])]),_:1})]),_:1}))}const Ya={components:{MaterialsIcon:K}},el=f(v(h({},Ya),{setup:Xa}));var tl=M(el,[["__scopeId","data-v-23e8e8fa"]]);const al=y("thead",null,[y("tr",null,[y("th",null,"Key"),y("th",null,"Value")])],-1);function ll(r){const a=r,s=D(()=>{let n=[];for(let o in a.data.metadata.targets){let i=a.data.metadata.targets[o],d=ke(i)?`${a.data.dataUrl}/${i}`:i;n.push({label:()=>St("a",{target:"_blank",href:d},o),key:o})}return n});return(n,o)=>(u(),_(e(U),null,{default:t(()=>[Object.keys(r.data.metadata.extra).length>0?(u(),_(e(Ut),{key:0,placement:"bottom-start",trigger:"hover"},{trigger:t(()=>[l(e(O),{bordered:!1,size:"large",title:"Extra"},{icon:t(()=>[l(e(g),null,{default:t(()=>[l(e(Be))]),_:1})]),_:1})]),default:t(()=>[l(e(Ct),null,{default:t(()=>[al,y("tbody",null,[(u(!0),P(A,null,F(r.data.metadata.extra,(i,d)=>(u(),P("tr",{key:d},[y("td",null,w(d),1),y("td",null,w(i),1)]))),128))])]),_:1})]),_:1})):G("",!0),Object.keys(r.data.metadata.targets).length>0?(u(),_(e(Mt),{key:1,options:e(s),placement:"bottom-start"},{default:t(()=>[l(e(O),{bordered:!1,size:"large",title:"Targets"},{icon:t(()=>[l(e(g),null,{default:t(()=>[l(e(De))]),_:1})]),_:1})]),_:1},8,["options"])):G("",!0)]),_:1}))}const nl={components:{Book:re,ArrowRight:jt,ExternalLink:De,InfoSquare:Be}},Je=f(v(h({},nl),{props:{data:null},setup:ll}));function sl(r){return(a,s)=>(u(),_(e(te),null,{default:t(()=>[l(e(z),{to:`/materials/${r.id}`},{default:t(()=>[l(e(g),null,{default:t(()=>[l(e(re))]),_:1}),$(" "+w(r.id),1)]),_:1},8,["to"])]),_:1}))}const rl={components:{MaterialIcon:re}},xe=f(v(h({},rl),{props:{id:null},setup:sl})),ol=f({props:{value:null},setup(r){const a=r;return(s,n)=>{const o=Lt("MarkdownPreviewOutlineItem",!0);return u(),_(e(Pt),{title:a.value.title,href:a.value.href},{default:t(()=>[(u(!0),P(A,null,F(a.value.children,i=>(u(),_(o,{key:i.href,value:i},null,8,["value"]))),128))]),_:1},8,["title","href"])}}});class il{constructor(a="",s="",n){I(this,"title","");I(this,"href","");I(this,"children",[]);this.title=a,this.href=s,n==null&&(n=[]),this.children=n}}const ul=f({props:{element:null},setup(r,{expose:a}){const s=r,n=k();function o(d){var x,J,V;let p=(x=d.children[0].getAttribute("data-target-id"))!=null?x:"",m=(V=(J=document.getElementById(p))==null?void 0:J.innerText)!=null?V:p,b=new il(m,`#${p}`);if(d.children.length>1){let Q=d.children[1];for(let X=0;X<Q.children.length;X++)b.children.push(o(Q.children[X]))}return b}async function i(){if(s.element==null)return!1;let d=document.createElement("div");if($e.outlineRender(s.element,d),d.children.length==0)return n.value=[],!1;let c=d.children[0],p=[];for(let m=0;m<c.children.length;m++)p.push(o(c.children[m]));return n.value=p,!0}return R(i),N(s,i),a({renderOutline:i}),(d,c)=>(u(),_(e(Tt),{type:"block","listen-to":r.element,"ignore-gap":!0},{default:t(()=>[(u(!0),P(A,null,F(n.value,p=>(u(),_(ol,{key:p.href,value:p},null,8,["value"]))),128))]),_:1},8,["listen-to"]))}});function dl(r,{expose:a}){const s=r,n=B(),o=H(),i=D(()=>{var j;return(j=s.baseUrl)!=null?j:""}),d=D(()=>o.value=="dark"?"dark":"light"),c=k(),p=k(),m=k(!0),b=k(!1),x=D(()=>n.state.readerMode&&o.value!="dark"),J=k(!1);async function V(){await $e.preview(c.value,s.value,{mode:d.value,speech:{enable:!0},hljs:{lineNumber:!0,style:d.value=="dark"?"dracula":x.value?"monokailight":"github"},markdown:{linkBase:i.value,mark:!0},theme:{current:d.value}}),J.value=await p.value.renderOutline();{let j=c.value.getElementsByTagName("img");for(let L=0;L<j.length;L++){let C=j.item(L);C!=null&&(C.onclick=ue=>{$e.previewImage(C,void 0,d.value)})}}}function Q(j=!0){b.value=j}function X(j=!0){n.commit("setReaderMode",j)}return R(V),N(s,V),N(o,V),N(x,V),a({fullscreen:Q}),(j,L)=>(u(),_(e(de),{class:zt(b.value?"fullscreen":"normal"),"has-sider":"","sider-placement":"right",style:{height:"100%","background-color":"inherit"},"native-scrollbar":!1},{default:t(()=>[l(e(S),{style:{height:"100%","background-color":"inherit"},"native-scrollbar":!1},{default:t(()=>[y("article",{ref:(C,ue)=>{ue.element=C,c.value=C},style:{"padding-bottom":"200px"}},null,512),l(e(Se),{right:m.value?50:250,style:Rt(b.value?{"z-index":2}:{})},null,8,["right","style"])]),_:1}),l(e(Oe),{style:{height:"100%","background-color":"inherit"},"collapse-mode":"width","collapsed-width":0,width:200,"show-trigger":"bar","default-collapsed":!0,"show-collapsed-content":!1,collapsed:m.value,"onUpdate:collapsed":L[2]||(L[2]=C=>m.value=C)},{default:t(()=>[l(e(S),{style:{height:"100%","background-color":"inherit"},"native-scrollbar":!1,"content-style":"padding: 10px;"},{default:t(()=>[l(e(U),null,{default:t(()=>[l(e(Bt),null,{default:t(()=>[l(e(O),{title:"Full screen",onClick:L[0]||(L[0]=()=>Q(!b.value))},{icon:t(()=>[l(e(g),null,{default:t(()=>[b.value?(u(),_(e(Ee),{key:0})):(u(),_(e(ze),{key:1}))]),_:1})]),_:1}),l(e(O),{title:"Reader mode",onClick:L[1]||(L[1]=()=>X(!e(x)))},{icon:t(()=>[l(e(g),null,{default:t(()=>[e(x)?(u(),_(e(fe),{key:0})):(u(),_(e(me),{key:1}))]),_:1})]),_:1})]),_:1}),Dt(l(ul,{element:c.value,ref:(C,ue)=>{ue.outline=C,p.value=C}},null,8,["element"]),[[Et,J.value]])]),_:1})]),_:1})]),_:1},8,["collapsed"])]),_:1},8,["class"]))}const cl={components:{Maximize:ze,Minimize:Ee,EnableReaderIcon:me,DisableReaderIcon:fe}},_l=f(v(h({},cl),{props:{value:null,baseUrl:null},setup:dl}));var pl=M(_l,[["__scopeId","data-v-3d97c3a0"]]);const fl=f({props:{data:null},setup(r){return(a,s)=>(u(),_(pl,{value:r.data.content,"base-url":r.data.dataUrl},null,8,["value","base-url"]))}});const ml=f({props:{css:null},setup(r){const a=r,s=document.getElementsByTagName("head")[0],n=[];function o(){for(let d of n)s.removeChild(d);n.length=0}function i(){if(o(),a.css!=null)for(let d of a.css){let c=document.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=d,s.appendChild(c),n.push(c)}}return R(i),N(a,i),Ae(o),()=>{}}}),hl={class:"slides"},vl={"data-markdown":"","data-separator":"^\\r?\\n===\\r?\\n$","data-separator-vertical":"^\\r?\\n---\\r?\\n$","data-separator-notes":"notes?:"},gl={"data-template":""},yl=f({props:{data:null},setup(r){const a=r,s=H(),n=k(),o=["https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.2/theme/white.min.css","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/github.min.css"],i=["https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.2/theme/black.min.css","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/monokai.min.css"];return R(()=>{new Ot({plugins:[At,Vt,Ht,Ft,Gt,Jt],center:!1,markdown:{baseUrl:a.data.dataUrl,smartLists:!0,smartypants:!0},slideNumber:"c/t",hash:!0,embedded:!0}).initialize()}),(d,c)=>(u(),P(A,null,[l(ml,{css:e(s)=="dark"?i:o},null,8,["css"]),y("div",{class:"reveal",ref:(p,m)=>{m.element=p,n.value=p}},[y("div",hl,[y("section",vl,[y("textarea",gl,w(r.data.content),1)])])],512)],64))}}),bl=f({props:{data:null},setup(r){return H(),(a,s)=>(u(),_(yl,{data:r.data},null,8,["data"]))}});class $l{constructor(a,s,n=""){I(this,"title");I(this,"url");I(this,"description");I(this,"renderedDescription","");this.url=s,this.title=a,this.description=n,this.renderedDescription=Ve(this.description)}}function qe(r){let a=[],s=Ve.lexer(r.content),n=0;for(;n<s.length;){let o=null;for(;o==null&&n<s.length;){let i=s[n];i.type=="heading"&&i.depth==1&&(o=i.text),n++}if(o!=null){let i=null,d="";for(;n<s.length;){let c=s[n];if(c.type=="heading"&&c.depth==1)break;let p=!1;if(i==null&&c.type=="paragraph"&&c.tokens.length==1){let m=c.tokens[0];m.type=="image"&&(p=!0,i=m.href,ke(i)&&(i=`${r.dataUrl}/${i}`))}p||(d+=c.raw),n++}a.push(new $l(o,i,d))}}return a}const kl=["innerHTML"],xl=f({props:{data:null},setup(r){const a=r;H();const s=k(),n=k([]),o=k(0),i=k();function d(){if(n.value.length==0)return;o.value>=n.value.length&&(o.value=n.value.length-1);let p=n.value[o.value];i.value.switchVideo({url:p.url})}function c(p){p.length!=0&&(o.value=parseInt(p[0]))}return R(()=>{i.value=new qt({container:s.value,video:{}}),n.value=qe(a.data)}),N(n,d),N(o,d),Ae(()=>{i.value!=null&&i.value.destroy()}),(p,m)=>(u(),_(e(de),{"has-sider":"","sider-placement":"right",style:{height:"100%"},"native-scrollbar":!1},{default:t(()=>[l(e(S),{style:{height:"100%"},"native-scrollbar":!1},{default:t(()=>[y("div",{ref:(b,x)=>{x.container=b,s.value=b}},null,512)]),_:1}),l(e(Oe),{style:{height:"100%"},"collapse-mode":"width","collapsed-width":0,width:200,"show-trigger":"bar","default-collapsed":!0,"show-collapsed-content":!1},{default:t(()=>[l(e(S),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"padding: 10px;"},{default:t(()=>[l(e(Wt),{accordion:!0,"arrow-placement":"right","expanded-names":o.value.toString(),onUpdateExpandedNames:c},{default:t(()=>[(u(!0),P(A,null,F(n.value,(b,x)=>(u(),_(e(Kt),{title:b.title,name:x.toString()},{default:t(()=>[y("div",{innerHTML:b.renderedDescription},null,8,kl)]),_:2},1032,["title","name"]))),256))]),_:1},8,["expanded-names"])]),_:1})]),_:1})]),_:1}))}}),wl=["innerHTML"],Nl=f({props:{data:null},setup(r){const a=r;H(),k();const s=k([]),n=k(),o=k(0);function i(){if(s.value.length==0){n.value=void 0;return}o.value>=s.value.length&&(o.value=s.value.length-1),n.value=s.value[o.value]}return R(()=>{s.value=qe(a.data)}),N(s,i),N(o,i),(d,c)=>(u(),_(e(S),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"padding: 20px;"},{default:t(()=>[l(e(U),{style:{"justify-content":"center"}},{default:t(()=>[(u(!0),P(A,null,F(s.value,(p,m)=>(u(),_(e(se),{hoverable:"",embedded:"",title:p.title,key:m,style:{"max-width":"300px"}},{cover:t(()=>[l(e(Zt),{"object-fit":"cover",alt:p.title,src:p.url},null,8,["alt","src"])]),default:t(()=>[y("div",{innerHTML:p.renderedDescription},null,8,wl)]),_:2},1032,["title"]))),128))]),_:1})]),_:1}))}}),Il={key:0},We=f({props:{data:null},setup(r){return(a,s)=>r.data.metadata.schema=="empty"?(u(),P("span",Il,"Empty data")):r.data.metadata.schema=="slides"?(u(),_(bl,{key:1,data:r.data},null,8,["data"])):r.data.metadata.schema=="media"?(u(),_(xl,{key:2,data:r.data},null,8,["data"])):r.data.metadata.schema=="image"?(u(),_(Nl,{key:3,data:r.data},null,8,["data"])):(u(),_(fl,{key:4,data:r.data},null,8,["data"]))}});async function Sl(r){let a,s;const n=Y(),o=q(),i=B(),d=n.params,c=([a,s]=T(()=>i.state.api.materials.get(d.id)),a=await a,s(),a);return document.title=`${c.metadata.name} - Materials - Paperead`,(p,m)=>(u(),_(oe,null,{header:t(()=>[l(e(ne),{onBack:m[1]||(m[1]=()=>e(o).back())},{title:t(()=>[$(w(e(c).metadata.name),1)]),header:t(()=>[l(e(le),null,{default:t(()=>[l(ie),l(ge),l(xe,{id:e(c).id},null,8,["id"])]),_:1})]),avatar:t(()=>[l(e(ae),null,{default:t(()=>[l(e(g),null,{default:t(()=>[l(e(re))]),_:1})]),_:1})]),extra:t(()=>[l(e(U),null,{default:t(()=>[l(e(O),{size:"large",bordered:!1,onClick:m[0]||(m[0]=b=>e(o).push(`/materials/${e(c).id}/notes`)),title:"Notes"},{icon:t(()=>[l(e(g),null,{default:t(()=>[l(e(Z))]),_:1})]),_:1}),l(Je,{data:e(c)},null,8,["data"])]),_:1})]),footer:t(()=>[l(ve,{data:e(c).metadata},null,8,["data"])]),_:1})]),default:t(()=>[l(e(S),{style:{height:"100%"}},{default:t(()=>[(u(),_(W,null,{default:t(()=>[l(We,{data:e(c)},null,8,["data"])]),fallback:t(()=>[l(e(be),{text:"",repeat:10})]),_:1}))]),_:1})]),_:1}))}const Ul={components:{MaterialIcon:re,NotesIcon:Z}},Cl=f(v(h({},Ul),{setup:Sl}));var Ml=M(Cl,[["__scopeId","data-v-568b042e"]]);const jl=f({props:{id:null,noteId:null},setup(r){const a=r,s=B(),n=k();async function o(){n.value=await s.state.api.materials.notes(a.id).get(a.noteId)}return R(o),N(a,o),(i,d)=>n.value?(u(),_(e(se),{key:0,hoverable:""},{header:t(()=>[l(e(z),{to:`/materials/${a.id}/notes/${n.value.id}`},{default:t(()=>[$(w(n.value.metadata.name),1)]),_:1},8,["to"])]),action:t(()=>[l(ve,{data:n.value.metadata},null,8,["data"])]),default:t(()=>[n.value.content.length>0?(u(),_(e(Re),{key:0,tooltip:!1,"line-clamp":5},{default:t(()=>[$(w(n.value.content),1)]),_:1})):G("",!0)]),_:1})):G("",!0)}});var Ll=M(jl,[["__scopeId","data-v-426f1df6"]]);const Pl=$(" Notes ");function Tl(r){return(a,s)=>(u(),_(e(te),null,{default:t(()=>[l(e(z),{to:`/materials/${r.id}/notes`},{default:t(()=>[l(e(g),null,{default:t(()=>[l(e(Z))]),_:1}),Pl]),_:1},8,["to"])]),_:1}))}const Rl={components:{NotesIcon:Z}},Ke=f(v(h({},Rl),{props:{id:null},setup:Tl}));const Bl=$("Notes");async function Dl(r){let a,s;const n=B(),o=q(),d=Y().params,c=([a,s]=T(()=>n.state.api.materials.notes(d.id).all()),a=await a,s(),a),p=([a,s]=T(()=>n.state.api.materials.get(d.id)),a=await a,s(),a);return document.title=`Notes - ${p.metadata.name} - Materials - Paperead`,(m,b)=>(u(),_(oe,null,{header:t(()=>[l(e(ne),{subtitle:"\u6240\u6709\u7B14\u8BB0",onBack:b[0]||(b[0]=()=>e(o).back())},{title:t(()=>[Bl]),header:t(()=>[l(e(le),null,{default:t(()=>[l(ie),l(ge),l(xe,{id:e(d).id},null,8,["id"]),l(Ke,{id:e(d).id},null,8,["id"])]),_:1})]),avatar:t(()=>[l(e(ae),null,{default:t(()=>[l(e(g),null,{default:t(()=>[l(e(Z))]),_:1})]),_:1})]),footer:t(()=>[$("Totally "+w(e(c).length)+" note"+w(e(c).length>1?"s":"")+".",1)]),_:1})]),default:t(()=>[l(e(S),{"content-style":"padding: 10px;","native-scrollbar":!1,style:{height:"100%"}},{default:t(()=>[l(Ge,{items:e(c)},{default:t(x=>[l(Ll,{id:e(d).id,noteId:x.item},null,8,["id","noteId"])]),_:1},8,["items"])]),_:1})]),_:1}))}const El={components:{NotesIcon:Z}},zl=f(v(h({},El),{setup:Dl}));var Ol=M(zl,[["__scopeId","data-v-7d23d45c"]]);function Al(r){return(a,s)=>(u(),_(e(te),null,{default:t(()=>[l(e(z),{to:`/materials/${r.id}/notes/${r.noteId}`},{default:t(()=>[l(e(g),null,{default:t(()=>[l(e(he))]),_:1}),$(" "+w(r.noteId),1)]),_:1},8,["to"])]),_:1}))}const Vl={components:{NoteIcon:he}},Hl=f(v(h({},Vl),{props:{id:null,noteId:null},setup:Al}));async function Fl(r){let a,s;const n=Y(),o=q(),i=B(),d=n.params,c=([a,s]=T(()=>i.state.api.materials.notes(d.id).get(d.noteId)),a=await a,s(),a),p=([a,s]=T(()=>i.state.api.materials.get(d.id)),a=await a,s(),a);return document.title=`${c.metadata.name} - Notes - ${p.metadata.name} - Materials - Paperead`,(m,b)=>(u(),_(oe,null,{header:t(()=>[l(e(ne),{onBack:b[0]||(b[0]=()=>e(o).back())},{title:t(()=>[$(w(e(c).metadata.name),1)]),header:t(()=>[l(e(le),null,{default:t(()=>[l(ie),l(ge),l(xe,{id:e(d).id},null,8,["id"]),l(Ke,{id:e(d).id},null,8,["id"]),l(Hl,{id:e(d).id,"note-id":e(c).id},null,8,["id","note-id"])]),_:1})]),avatar:t(()=>[l(e(ae),null,{default:t(()=>[l(e(g),null,{default:t(()=>[l(e(he))]),_:1})]),_:1})]),extra:t(()=>[l(Je,{data:e(c)},null,8,["data"])]),footer:t(()=>[l(ve,{data:e(c).metadata},null,8,["data"])]),_:1})]),default:t(()=>[l(e(S),{style:{height:"100%"}},{default:t(()=>[(u(),_(W,null,{default:t(()=>[l(We,{data:e(c)},null,8,["data"])]),fallback:t(()=>[l(e(be),{text:"",repeat:10})]),_:1}))]),_:1})]),_:1}))}const Gl={components:{NoteIcon:he}},Jl=f(v(h({},Gl),{setup:Fl}));var ql=M(Jl,[["__scopeId","data-v-6643ac82"]]);const Wl=[{path:"/",component:Ca,meta:{title:"Home - Paperead"}},{path:"/materials",component:tl,meta:{title:"Materials - Paperead"}},{path:"/materials/:id",component:Ml,meta:{title:"Loading... - Materials - Paperead"}},{path:"/materials/:id/notes",component:Ol,meta:{title:"Notes - Loading... - Materials - Paperead"}},{path:"/materials/:id/notes/:noteId",component:ql,meta:{title:"Loading... - Notes - Loading... - Materials - Paperead"}},{path:"/:path*",component:Ta,meta:{title:"Not found - Paperead"}}],Ze=Qt({history:Xt(),routes:Wl});Ze.beforeEach((r,a)=>(r.path==a.path||(document.title=r.meta.title.toString()),!0));const Qe=Yt(oa);Qe.use(Ze).use(na,Fe);Qe.mount("#app");
