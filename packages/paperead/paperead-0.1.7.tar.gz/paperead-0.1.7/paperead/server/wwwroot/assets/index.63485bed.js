var Ye=Object.defineProperty,et=Object.defineProperties;var tt=Object.getOwnPropertyDescriptors;var ke=Object.getOwnPropertySymbols;var at=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable;var _e=(l,t,r)=>t in l?Ye(l,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[t]=r,g=(l,t)=>{for(var r in t||(t={}))at.call(t,r)&&_e(l,r,t[r]);if(ke)for(var r of ke(t))nt.call(t,r)&&_e(l,r,t[r]);return l},y=(l,t)=>et(l,tt(t));var N=(l,t,r)=>(_e(l,typeof t!="symbol"?t+"":t,r),r);import{e as pe,c as lt,u as st,d as m,a as te,r as b,o as u,b as _,w as a,f as n,g as e,R as rt,N as we,S as q,h as ae,i as V,j as D,z as ot,k as it,l as ut,m as dt,n as ct,p as _t,q as pt,s as ft,t as mt,v as ht,x as vt,y as gt,A as yt,B as bt,C as $t,D as xt,E as Q,F as Ne,G as I,H as Ie,I as ne,J as E,K as x,L as Se,M as O,O as Ue,P as Ce,Q as je,T as h,U as w,V as le,W as se,X as T,Y as re,Z as G,_ as fe,$ as k,a0 as kt,a1 as Te,a2 as M,a3 as H,a4 as wt,a5 as z,a6 as F,a7 as L,a8 as S,a9 as Me,aa as X,ab as Nt,ac as me,ad as he,ae as Le,af as Re,ag as ve,ah as J,ai as oe,aj as ie,ak as ge,al as Pe,am as ue,an as It,ao as St,ap as Ut,aq as Ct,ar as jt,as as De,at as Tt,au as Mt,av as Ee,aw as Y,ax as Lt,ay as Rt,az as Pt,aA as Dt,aB as ye,aC as Et,aD as Ot,aE as Oe,aF as ze,aG as zt,aH as Bt,aI as Be,aJ as At,aK as Ae,aL as Vt,aM as Ht,aN as Ft,aO as qt,aP as Gt,aQ as Jt,aR as Wt,aS as Kt,aT as Zt,aU as Qt,aV as Xt,aW as Ve,aX as de,aY as Yt,aZ as ea,a_ as ta}from"./vendor.cf349d37.js";const aa=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};aa();function be(l){return(l==null?void 0:l.startsWith("./"))||(l==null?void 0:l.startsWith("../"))||l=="."||l==".."}function na(l){return l.replace(/\&\#[0-9]*;|&amp;/g,function(t){return t.match(/amp/)?"&":String.fromCharCode(parseInt(t.match(/[0-9]+/)[0]))})}var B=new pe.Renderer;B.link=function(l,t,r){return r};B.paragraph=function(l){return na(l)+`\r
`};B.heading=function(l,t){return t+") "+l};B.blockquote=function(l){return l};B.codespan=function(l){return l};B.list=function(l,t,r){return l};B.image=function(l,t,r){return""};B.code=function(l,t,r){return""};function He(l){return l}class la{constructor(t){N(this,"baseUrl");this.baseUrl=t}async all(){return await(await fetch(`${this.baseUrl}/index.json`)).json()}async get(t){let s=await(await fetch(`${this.baseUrl}/${t}/index.json`)).json();return y(g({},s),{metadata:y(g({},s.metadata),{creation:new Date(s.metadata.creation.toString()),modification:new Date(s.metadata.modification.toString())}),dataUrl:this.resolveRelativeUrl(t)})}notes(t){return new sa(`${this.baseUrl}/${t}/notes`,this.resolveRelativeUrl(t,"./notes"))}async update(t){let r=y(g({},t),{metadata:y(g({},t.metadata),{creation:t.metadata.creation.toISOString(),modification:t.metadata.modification.toISOString()})});await fetch(`${this.baseUrl}/`,{body:JSON.stringify(r),method:"POST",headers:{"Content-Type":"application/json"}})}async delete(t){await fetch(`${this.baseUrl}/${t}`,{method:"DELETE"})}resolveRelativeUrl(t,r="."){return be(r)?`${this.baseUrl}/${t}/${r}`:r}}class sa{constructor(t,r){N(this,"baseUrl");N(this,"dataUrl");this.baseUrl=t,this.dataUrl=r}async all(){return await(await fetch(`${this.baseUrl}/index.json`)).json()}async get(t){let s=await(await fetch(`${this.baseUrl}/${t}/index.json`)).json();return y(g({},s),{metadata:y(g({},s.metadata),{creation:new Date(s.metadata.creation.toString()),modification:new Date(s.metadata.modification.toString())}),dataUrl:this.dataUrl})}async update(t){let r=y(g({},t),{metadata:y(g({},t.metadata),{creation:t.metadata.creation.toISOString(),modification:t.metadata.modification.toISOString()})});await fetch(`${this.baseUrl}/`,{body:JSON.stringify(r),method:"POST",headers:{"Content-Type":"application/json"}})}async delete(t){await fetch(`${this.baseUrl}/${t}/`,{method:"DELETE"})}}class Fe{constructor(t){N(this,"baseUrl");N(this,"materials");this.baseUrl=t,this.materials=new la(`${this.baseUrl}/materials`)}async metadata(){return await(await fetch(`${this.baseUrl}/index.json`)).json()}}const qe=Symbol(),ra="/api",oa=lt({state(){return{api:new Fe(ra),readerMode:!1}},mutations:{setApiUrl(l,t){l.api=new Fe(t)},setReaderMode(l,t){l.readerMode=t}}});function R(){return st(qe)}const ia=m({setup(l){return te(),b("home"),(t,r)=>(u(),_(q,null,{default:a(()=>[n(e(rt))]),fallback:a(()=>[n(e(we),{size:80,id:"loading-spin",style:{width:"100%"}})]),_:1}))}});var P=(l,t)=>{for(const[r,s]of t)l[r]=s;return l};const ua=m({setup(l){ae();const t=R(),r=V(),s="#f9f5e9FF",o={common:{baseColor:s,popoverColor:s,tableColor:s,cardColor:s,modalColor:s,bodyColor:s,tagColor:s,inputColor:s,codeColor:s,tabColor:s,actionColor:s,tableHeaderColor:s,hoverColor:s,inputColorDisabled:s}},i=D(()=>t.state.readerMode&&r.value!="dark"),d=D(()=>{let c=navigator.language;return c.indexOf("zh")!=-1?{lang:ot,date:it}:c.indexOf("ru")!=-1?{lang:ut,date:dt}:c.indexOf("uk")!=-1?{lang:ct,date:_t}:c.indexOf("ja")!=-1?{lang:pt,date:ft}:c.indexOf("id")!=-1?{lang:mt,date:ht}:{lang:vt,date:gt}});return(c,p)=>(u(),_(e(bt),{style:{height:"100%"},theme:e(r)=="dark"?e(yt):null,"theme-overrides":e(i)?o:{},locale:e(d).lang,"date-locale":e(d).date},{default:a(()=>[n(e(xt),null,{default:a(()=>[n(e($t)),(u(),_(q,null,{default:a(()=>[n(ia)]),fallback:a(()=>[n(e(we),{size:80,id:"loading-spin"})]),_:1}))]),_:1})]),_:1},8,["theme","theme-overrides","locale","date-locale"]))}});var da=P(ua,[["__scopeId","data-v-41fa4579"]]);const ca=m({props:{scroll:null},setup(l){const t=l,r=D(()=>{var s;return(s=t.scroll)!=null?s:!1});return(s,o)=>e(r)?(u(),_(e(ne),{key:0,style:{height:"100%"},"native-scrollbar":!1},{default:a(()=>[n(e(Ne),{bordered:"",class:"page-header"},{default:a(()=>[Q(s.$slots,"header",{},void 0,!0)]),_:3}),n(e(I),null,{default:a(()=>[Q(s.$slots,"default",{},void 0,!0)]),_:3}),n(e(Ie),{right:100})]),_:3})):(u(),_(e(ne),{key:1,style:{height:"100%"}},{default:a(()=>[n(e(Ne),{bordered:"",class:"page-header"},{default:a(()=>[Q(s.$slots,"header",{},void 0,!0)]),_:3}),n(e(I),{class:"page-content-scroll"},{default:a(()=>[Q(s.$slots,"default",{},void 0,!0)]),_:3})]),_:3}))}});var $e=P(ca,[["__scopeId","data-v-6b14b3e8"]]);const _a=h("a",{href:"https://www.stardustdl.top/",style:{"text-decoration":"none",color:"inherit"}},"StardustDL",-1),pa=h("a",{href:"https://github.com/StardustDL/paperead/blob/master/LICENSE",style:{"text-decoration":"none",color:"inherit"}},"MPL-2.0",-1),fa=h("a",{href:"https://github.com/StardustDL/paperead",style:{"text-decoration":"none",color:"inherit"}},"GitHub",-1),ma=["href"];async function ha(l){let t,r;const s=([t,r]=E(async()=>([t,r]=E(()=>fetch("/build.json")),t=await t,r(),t).json()),t=await t,r(),t);return(o,i)=>(u(),_(e(T),{size:"large"},{default:a(()=>[n(e(O),{label:"Author"},{prefix:a(()=>[n(e(x),null,{default:a(()=>[n(e(Se))]),_:1})]),default:a(()=>[_a]),_:1}),n(e(O),{label:"License"},{prefix:a(()=>[n(e(x),null,{default:a(()=>[n(e(Ue))]),_:1})]),default:a(()=>[pa]),_:1}),n(e(O),{label:"Source Code"},{prefix:a(()=>[n(e(x),null,{default:a(()=>[n(e(Ce))]),_:1})]),default:a(()=>[fa]),_:1}),n(e(O),{label:"Commit"},{prefix:a(()=>[n(e(x),null,{default:a(()=>[n(e(je))]),_:1})]),default:a(()=>[h("a",{href:`https://github.com/StardustDL/paperead/commit/${e(s).commit}`,style:{"text-decoration":"none",color:"inherit"}},w(e(s).shortCommit),9,ma)]),_:1}),n(e(O),{label:"Build Date"},{prefix:a(()=>[n(e(x),null,{default:a(()=>[n(e(le))]),_:1})]),default:a(()=>[n(e(se),{time:new Date(e(s).date),type:"relative"},null,8,["time"])]),_:1})]),_:1}))}const va={components:{BrandGithub:Ce,At:Se,License:Ue,GitCommit:je,Clock:le}},ga=m(y(g({},va),{setup:ha})),ya=k(" Paperead ");function ba(l){return(t,r)=>(u(),_(e(fe),null,{default:a(()=>[n(e(G),{to:"/"},{default:a(()=>[n(e(x),null,{default:a(()=>[n(e(re))]),_:1}),ya]),_:1})]),_:1}))}const $a={components:{HomeIcon:re}},xe=m(y(g({},$a),{setup:ba})),xa=h("span",null,"Creation:",-1),ka=k("\xA0 "),wa=h("br",null,null,-1),Na=h("span",null,"Modification:",-1),Ia=k("\xA0 ");function Sa(l){const t=l;return(r,s)=>(u(),_(e(kt),null,{trigger:a(()=>[n(e(T),null,{default:a(()=>[n(e(x),{size:"large"},{default:a(()=>[n(e(le))]),_:1}),n(e(se),{time:t.creation,type:"relative"},null,8,["time"])]),_:1})]),default:a(()=>[xa,ka,n(e(se),{time:t.creation},null,8,["time"]),wa,Na,Ia,n(e(se),{time:l.modification},null,8,["time"])]),_:1}))}const Ua={components:{Clock:le}},Ca=m(y(g({},Ua),{props:{creation:null,modification:null},setup:Sa}));function ja(l){const t=l;return(r,s)=>(u(),_(e(T),null,{default:a(()=>[n(e(x),{size:"large"},{default:a(()=>[n(e(Te))]),_:1}),(u(!0),M(z,null,H(t.tags,o=>(u(),_(e(wt),{key:o,size:"small"},{default:a(()=>[k(w(o),1)]),_:2},1024))),128))]),_:1}))}const Ta={components:{Tag:Te}},Ma=m(y(g({},Ta),{props:{tags:null},setup:ja})),ce=m({props:{data:null},setup(l){return(t,r)=>(u(),_(e(T),null,{default:a(()=>[n(Ca,{creation:l.data.creation,modification:l.data.modification},null,8,["creation","modification"]),l.data.tags.length>0?(u(),_(Ma,{key:0,tags:l.data.tags},null,8,["tags"])):F("",!0)]),_:1}))}});const La=m({props:{id:null},setup(l){const t=l,r=R(),s=b();async function o(){s.value=await r.state.api.materials.get(t.id)}return L(o),S(t,o),(i,d)=>s.value?(u(),_(e(X),{key:0,hoverable:""},{header:a(()=>[n(e(G),{to:`/${s.value.id}`},{default:a(()=>[k(w(s.value.metadata.name),1)]),_:1},8,["to"])]),action:a(()=>[n(ce,{data:s.value.metadata},null,8,["data"])]),default:a(()=>[s.value.content.length>0?(u(),_(e(Me),{key:0,tooltip:!1,"line-clamp":5},{default:a(()=>[k(w(e(He)(s.value.content)),1)]),_:1})):F("",!0)]),_:1})):F("",!0)}});var Ra=P(La,[["__scopeId","data-v-266b86a0"]]);const Ge=m({props:{items:null},setup(l){const t=l,r=b([]),s=b(1),o=b(5);function i(){let d=(s.value-1)*o.value;r.value=t.items.slice(d,d+o.value)}return S(s,i),S(o,i),L(i),S(t,()=>s.value=1),(d,c)=>(u(),_(e(T),{vertical:""},{default:a(()=>[(u(!0),M(z,null,H(r.value,p=>(u(),_(q,{key:p},{default:a(()=>[Q(d.$slots,"default",{item:p})]),fallback:a(()=>[n(e(me),{text:"",repeat:2})]),_:2},1024))),128)),n(e(Nt),{style:{"justify-content":"center","margin-top":"20px"},"item-count":l.items.length,"page-size":o.value,"onUpdate:page-size":c[0]||(c[0]=p=>o.value=p),page:s.value,"onUpdate:page":c[1]||(c[1]=p=>s.value=p),"page-sizes":[5,10,20],"show-quick-jumper":"","show-size-picker":""},null,8,["item-count","page-size","page"])]),_:3}))}}),Pa=m({async setup(l){let t,r;const s=R(),o=([t,r]=E(()=>s.state.api.materials.all()),t=await t,r(),t);return(i,d)=>(u(),_(e(I),{"content-style":"padding: 10px;","native-scrollbar":!1,style:{height:"100%"}},{default:a(()=>[n(Ge,{items:e(o)},{default:a(c=>[n(Ra,{id:c.item},null,8,["id"])]),_:1},8,["items"])]),_:1}))}});const Da=k("Reading"),Ea=k("\xA0and "),Oa=k("Notes"),za=k("Welcome to Paperead."),Ba=["href"],Aa=["href"],Va=["href"];async function Ha(l){let t,r;const s=R(),o=te(),i=V(),d=D(()=>s.state.readerMode&&i.value!="dark");function c(v=!0){s.commit("setReaderMode",v)}const p="0.1.7",f=([t,r]=E(()=>s.state.api.metadata()),t=await t,r(),t);return(v,$)=>(u(),_($e,null,{header:a(()=>[n(e(ge),{subtitle:"\u9605\u8BFB\u4E0E\u7B14\u8BB0",onBack:$[1]||($[1]=()=>e(o).back())},{avatar:a(()=>[n(e(he),null,{default:a(()=>[n(e(x),null,{default:a(()=>[n(e(Le))]),_:1})]),_:1})]),title:a(()=>[n(e(Re),{type:"info"},{default:a(()=>[Da]),_:1}),Ea,n(e(Re),{type:"success"},{default:a(()=>[Oa]),_:1})]),header:a(()=>[n(e(ve),null,{default:a(()=>[n(xe)]),_:1})]),extra:a(()=>[n(e(J),{size:"large",bordered:!1,title:"Reader mode",onClick:$[0]||($[0]=()=>c(!e(d)))},{icon:a(()=>[n(e(x),null,{default:a(()=>[e(d)?(u(),_(e(oe),{key:0})):(u(),_(e(ie),{key:1}))]),_:1})]),_:1})]),footer:a(()=>[za]),_:1})]),default:a(()=>[n(e(I),{style:{height:"100%"}},{default:a(()=>[n(e(Pe),{type:"segment",style:{height:"100%"}},{default:a(()=>[n(e(ue),{name:"info",tab:"Information",style:{height:"calc(100% - 52px)"}},{default:a(()=>[n(e(I),{"content-style":"padding: 10px;",style:{height:"100%"},"native-scrollbar":!1},{default:a(()=>[n(e(T),{vertical:"",size:"large"},{default:a(()=>[n(e(X),{title:"Server",hoverable:"",embedded:""},{default:a(()=>[n(e(T),{size:"large"},{default:a(()=>[n(e(O),{label:"Server Endpoint"},{default:a(()=>[h("a",{href:e(s).state.api.baseUrl},w(e(s).state.api.baseUrl),9,Ba)]),_:1}),n(e(O),{label:"Server Version"},{default:a(()=>[h("a",{href:`https://github.com/StardustDL/paperead/releases/tag/v${e(f).version}`},w(e(f).version),9,Aa)]),_:1}),n(e(O),{label:"Client Version"},{default:a(()=>[h("a",{href:`https://github.com/StardustDL/paperead/releases/tag/v${e(p)}`},w(e(p)),9,Va)]),_:1})]),_:1})]),_:1}),n(e(X),{title:"Paperead",hoverable:"",embedded:""},{default:a(()=>[(u(),_(q,null,{default:a(()=>[n(ga)]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),n(e(ue),{name:"materials",tab:"Materials",style:{height:"calc(100% - 52px)"}},{default:a(()=>[n(Pa)]),_:1})]),_:1})]),_:1})]),_:1}))}const Fa={components:{Notebook:Le,MaterialsIcon:It,EnableReaderIcon:ie,DisableReaderIcon:oe}},qa=m(y(g({},Fa),{setup:Ha}));var Ga=P(qa,[["__scopeId","data-v-71336d0d"]]);const Ja=k("Home");function Wa(l){const r=ae().params;return console.log("NotFound"),(s,o)=>(u(),_(e(St),{status:"404",title:"Not Found",description:`Path: /${e(r).path.join("/")}`,style:{margin:"50px"}},{footer:a(()=>[n(e(J),null,{icon:a(()=>[n(e(x),null,{default:a(()=>[n(e(re))]),_:1})]),default:a(()=>[n(e(G),{to:"/"},{default:a(()=>[Ja]),_:1})]),_:1})]),_:1},8,["description"]))}const Ka={components:{HomeIcon:re,AlertCircle:Ut}},Za=m(y(g({},Ka),{setup:Wa}));var Qa=P(Za,[["__scopeId","data-v-7c7ff6aa"]]);const Xa=h("thead",null,[h("tr",null,[h("th",null,"Key"),h("th",null,"Value")])],-1);function Ya(l){const t=l,r=D(()=>{let s=[];for(let o in t.data.metadata.targets){let i=t.data.metadata.targets[o],d=be(i)?`${t.data.dataUrl}/${i}`:i;s.push({label:()=>Ct("a",{target:"_blank",href:d},o),key:o})}return s});return(s,o)=>(u(),_(e(T),null,{default:a(()=>[Object.keys(l.data.metadata.extra).length>0?(u(),_(e(jt),{key:0,placement:"bottom-start",trigger:"hover"},{trigger:a(()=>[n(e(J),{bordered:!1,size:"large",title:"Extra"},{icon:a(()=>[n(e(x),null,{default:a(()=>[n(e(De))]),_:1})]),_:1})]),default:a(()=>[n(e(Tt),null,{default:a(()=>[Xa,h("tbody",null,[(u(!0),M(z,null,H(l.data.metadata.extra,(i,d)=>(u(),M("tr",{key:d},[h("td",null,w(d),1),h("td",null,w(i),1)]))),128))])]),_:1})]),_:1})):F("",!0),Object.keys(l.data.metadata.targets).length>0?(u(),_(e(Mt),{key:1,options:e(r),placement:"bottom-start"},{default:a(()=>[n(e(J),{bordered:!1,size:"large",title:"Targets"},{icon:a(()=>[n(e(x),null,{default:a(()=>[n(e(Ee))]),_:1})]),_:1})]),_:1},8,["options"])):F("",!0)]),_:1}))}const en={components:{Book:Y,ArrowRight:Lt,ExternalLink:Ee,InfoSquare:De}},Je=m(y(g({},en),{props:{data:null},setup:Ya}));function tn(l){return(t,r)=>(u(),_(e(fe),null,{default:a(()=>[n(e(G),{to:`/${l.id}`},{default:a(()=>[n(e(x),null,{default:a(()=>[n(e(Y))]),_:1}),k(" "+w(l.id),1)]),_:1},8,["to"])]),_:1}))}const an={components:{MaterialIcon:Y}},We=m(y(g({},an),{props:{id:null},setup:tn})),nn=m({props:{value:null},setup(l){const t=l;return(r,s)=>{const o=Rt("MarkdownPreviewOutlineItem",!0);return u(),_(e(Pt),{title:t.value.title,href:t.value.href},{default:a(()=>[(u(!0),M(z,null,H(t.value.children,i=>(u(),_(o,{key:i.href,value:i},null,8,["value"]))),128))]),_:1},8,["title","href"])}}});class ln{constructor(t="",r="",s){N(this,"title","");N(this,"href","");N(this,"children",[]);this.title=t,this.href=r,s==null&&(s=[]),this.children=s}}const sn=m({props:{element:null},setup(l,{expose:t}){const r=l,s=b();function o(d){var $,W,A;let p=($=d.children[0].getAttribute("data-target-id"))!=null?$:"",f=(A=(W=document.getElementById(p))==null?void 0:W.innerText)!=null?A:p,v=new ln(f,`#${p}`);if(d.children.length>1){let K=d.children[1];for(let Z=0;Z<K.children.length;Z++)v.children.push(o(K.children[Z]))}return v}async function i(){if(r.element==null)return!1;let d=document.createElement("div");if(ye.outlineRender(r.element,d),d.children.length==0)return s.value=[],!1;let c=d.children[0],p=[];for(let f=0;f<c.children.length;f++)p.push(o(c.children[f]));return s.value=p,!0}return L(i),S(r,i),t({renderOutline:i}),(d,c)=>(u(),_(e(Dt),{type:"block","listen-to":l.element,"ignore-gap":!0},{default:a(()=>[(u(!0),M(z,null,H(s.value,p=>(u(),_(nn,{key:p.href,value:p},null,8,["value"]))),128))]),_:1},8,["listen-to"]))}});function rn(l,{expose:t}){const r=l,s=R(),o=V(),i=D(()=>{var C;return(C=r.baseUrl)!=null?C:""}),d=D(()=>o.value=="dark"?"dark":"light"),c=b(),p=b(),f=b(!0),v=b(!1),$=D(()=>s.state.readerMode&&o.value!="dark"),W=b(!1);async function A(){await ye.preview(c.value,r.value,{mode:d.value,speech:{enable:!0},hljs:{lineNumber:!0,style:d.value=="dark"?"dracula":$.value?"monokailight":"github"},markdown:{linkBase:i.value,mark:!0},theme:{current:d.value}}),W.value=await p.value.renderOutline();{let C=c.value.getElementsByTagName("img");for(let j=0;j<C.length;j++){let U=C.item(j);U!=null&&(U.onclick=ee=>{ye.previewImage(U,void 0,d.value)})}}}function K(C=!0){v.value=C}function Z(C=!0){s.commit("setReaderMode",C)}return L(A),S(r,A),S(o,A),S($,A),t({fullscreen:K}),(C,j)=>(u(),_(e(ne),{class:At(v.value?"fullscreen":"normal"),"has-sider":"","sider-placement":"right",style:{height:"100%"}},{default:a(()=>[n(e(I),{style:{height:"100%"},"native-scrollbar":!1},{default:a(()=>[h("article",{ref:(U,ee)=>{ee.element=U,c.value=U},style:{"padding-bottom":"200px"}},null,512),n(e(Ie),{right:f.value?50:250,style:Et(v.value?{"z-index":2}:{})},null,8,["right","style"])]),_:1}),n(e(Be),{style:{height:"100%"},"collapse-mode":"width","collapsed-width":0,width:200,"show-trigger":"bar","default-collapsed":!0,"show-collapsed-content":!1,collapsed:f.value,"onUpdate:collapsed":j[2]||(j[2]=U=>f.value=U)},{default:a(()=>[n(e(I),{style:{height:"100%","background-color":"inherit"},"native-scrollbar":!1,"content-style":"padding: 10px;"},{default:a(()=>[n(e(T),null,{default:a(()=>[n(e(Ot),null,{default:a(()=>[n(e(J),{title:"Full screen",onClick:j[0]||(j[0]=()=>K(!v.value))},{icon:a(()=>[n(e(x),null,{default:a(()=>[v.value?(u(),_(e(Oe),{key:0})):(u(),_(e(ze),{key:1}))]),_:1})]),_:1}),n(e(J),{title:"Reader mode",onClick:j[1]||(j[1]=()=>Z(!e($)))},{icon:a(()=>[n(e(x),null,{default:a(()=>[e($)?(u(),_(e(oe),{key:0})):(u(),_(e(ie),{key:1}))]),_:1})]),_:1})]),_:1}),zt(n(sn,{element:c.value,ref:(U,ee)=>{ee.outline=U,p.value=U}},null,8,["element"]),[[Bt,W.value]])]),_:1})]),_:1})]),_:1},8,["collapsed"])]),_:1},8,["class"]))}const on={components:{Maximize:ze,Minimize:Oe,EnableReaderIcon:ie,DisableReaderIcon:oe}},un=m(y(g({},on),{props:{value:null,baseUrl:null},setup:rn}));var dn=P(un,[["__scopeId","data-v-00ede2da"]]);const cn=m({props:{data:null},setup(l){return(t,r)=>(u(),_(dn,{value:l.data.content,"base-url":l.data.dataUrl},null,8,["value","base-url"]))}});const _n=m({props:{css:null},setup(l){const t=l,r=document.getElementsByTagName("head")[0],s=[];function o(){for(let d of s)r.removeChild(d);s.length=0}function i(){if(o(),t.css!=null)for(let d of t.css){let c=document.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=d,r.appendChild(c),s.push(c)}}return L(i),S(t,i),Ae(o),()=>{}}}),pn={class:"slides"},fn={"data-markdown":"","data-separator":"^\\r?\\n===\\r?\\n$","data-separator-vertical":"^\\r?\\n---\\r?\\n$","data-separator-notes":"notes?:"},mn={"data-template":""},hn=m({props:{data:null},setup(l){const t=l,r=V(),s=b(),o=["https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.2/theme/white.min.css","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/github.min.css"],i=["https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.2/theme/black.min.css","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/monokai.min.css"];return L(()=>{new Vt({plugins:[Ht,Ft,qt,Gt,Jt,Wt],center:!1,markdown:{baseUrl:t.data.dataUrl,smartLists:!0,smartypants:!0},slideNumber:"c/t",hash:!0,embedded:!0}).initialize()}),(d,c)=>(u(),M(z,null,[n(_n,{css:e(r)=="dark"?i:o},null,8,["css"]),h("div",{class:"reveal",ref:(p,f)=>{f.element=p,s.value=p}},[h("div",pn,[h("section",fn,[h("textarea",mn,w(l.data.content),1)])])],512)],64))}}),vn=m({props:{data:null},setup(l){return V(),(t,r)=>(u(),_(hn,{data:l.data},null,8,["data"]))}});class gn{constructor(t){N(this,"title");N(this,"url","");N(this,"description","");N(this,"cover","");N(this,"renderedDescription","");this.title=t}}function Ke(l){let t=[],r=pe.lexer(l.content),s=0;for(;s<r.length;){let o=null;for(;o==null&&s<r.length;){let i=r[s];i.type=="heading"&&i.depth==1&&(o=i.text),s++}if(o!=null){let i=new gn(o);for(;s<r.length;){let d=r[s];if(d.type=="heading"&&d.depth==1)break;let c=!1;if(d.type=="paragraph"){for(let p of d.tokens)if(p.type=="image"||p.type=="link"){let f=p.href;switch(be(f)&&(f=`${l.dataUrl}/${f}`),p.text){case"url":i.url==""&&(i.url=f,c=!0);break;case"cover":i.cover==""&&(i.cover=f,c=!0);break}}}c||(i.description+=d.raw),s++}i.renderedDescription=pe(i.description,{baseUrl:l.dataUrl,headerIds:!1,smartLists:!0,smartypants:!0}),t.push(i)}}return t}const yn=["innerHTML"],bn=m({props:{data:null},setup(l){const t=l;V();const r=b(),s=b([]),o=b(0),i=b();function d(p=!1){var v,$;if(s.value.length==0)return;o.value>=s.value.length&&(o.value=s.value.length-1);let f=s.value[o.value];(v=i.value)==null||v.switchVideo({url:f.url,pic:f.cover},void 0),p&&(($=i.value)==null||$.play())}function c(p){p.length!=0&&(o.value=parseInt(p[0]),d())}return L(()=>{i.value=new Kt({container:r.value,screenshot:!0,video:{url:""}}),i.value.on("ended",()=>{}),s.value=Ke(t.data),d()}),Ae(()=>{i.value!=null&&i.value.destroy()}),(p,f)=>(u(),_(e(ne),{"has-sider":"","sider-placement":"right",style:{height:"100%"}},{default:a(()=>[n(e(I),{style:{height:"100%"},"native-scrollbar":!1},{default:a(()=>[h("div",{ref:(v,$)=>{$.container=v,r.value=v}},null,512)]),_:1}),n(e(Be),{style:{height:"100%"},"collapse-mode":"width","collapsed-width":0,width:200,"show-trigger":"bar","default-collapsed":!0,"show-collapsed-content":!1},{default:a(()=>[n(e(I),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"padding: 10px;"},{default:a(()=>[n(e(Zt),{accordion:!0,"arrow-placement":"right","expanded-names":o.value.toString(),onUpdateExpandedNames:c},{default:a(()=>[(u(!0),M(z,null,H(s.value,(v,$)=>(u(),_(e(Qt),{title:v.title,name:$.toString()},{default:a(()=>[h("div",{innerHTML:v.renderedDescription},null,8,yn)]),_:2},1032,["title","name"]))),256))]),_:1},8,["expanded-names"])]),_:1})]),_:1})]),_:1}))}}),$n=["innerHTML"],xn=m({props:{data:null},setup(l){const t=l;V(),b();const r=b([]),s=b(),o=b(0);function i(){if(r.value.length==0){s.value=void 0;return}o.value>=r.value.length&&(o.value=r.value.length-1),s.value=r.value[o.value]}return L(()=>{r.value=Ke(t.data)}),S(r,i),S(o,i),(d,c)=>(u(),_(e(I),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"padding: 20px;"},{default:a(()=>[n(e(T),{style:{"justify-content":"center"}},{default:a(()=>[(u(!0),M(z,null,H(r.value,(p,f)=>(u(),_(e(X),{hoverable:"",embedded:"",title:p.title,key:f,style:{"max-width":"300px"}},{cover:a(()=>[n(e(Xt),{"object-fit":"cover",alt:p.title,src:p.url},null,8,["alt","src"])]),default:a(()=>[h("div",{innerHTML:p.renderedDescription},null,8,$n)]),_:2},1032,["title"]))),128))]),_:1})]),_:1}))}}),kn={key:0},Ze=m({props:{data:null},setup(l){return(t,r)=>l.data.metadata.schema=="empty"?(u(),M("span",kn,"Empty data")):l.data.metadata.schema=="slides"?(u(),_(vn,{key:1,data:l.data},null,8,["data"])):l.data.metadata.schema=="media"?(u(),_(bn,{key:2,data:l.data},null,8,["data"])):l.data.metadata.schema=="image"?(u(),_(xn,{key:3,data:l.data},null,8,["data"])):(u(),_(cn,{key:4,data:l.data},null,8,["data"]))}});const wn=m({props:{id:null,noteId:null},setup(l){const t=l,r=R(),s=b();async function o(){s.value=await r.state.api.materials.notes(t.id).get(t.noteId)}return L(o),S(t,o),(i,d)=>s.value?(u(),_(e(X),{key:0,hoverable:""},{header:a(()=>[n(e(G),{to:`/${t.id}/${s.value.id}`},{default:a(()=>[k(w(s.value.metadata.name),1)]),_:1},8,["to"])]),action:a(()=>[n(ce,{data:s.value.metadata},null,8,["data"])]),default:a(()=>[s.value.content.length>0?(u(),_(e(Me),{key:0,tooltip:!1,"line-clamp":5},{default:a(()=>[k(w(e(He)(s.value.content)),1)]),_:1})):F("",!0)]),_:1})):F("",!0)}});var Nn=P(wn,[["__scopeId","data-v-020c345b"]]);async function In(l){let t,r;const s=l,o=R(),i=([t,r]=E(()=>o.state.api.materials.notes(s.id).all()),t=await t,r(),t);return(d,c)=>(u(),_(e(I),{"content-style":"padding: 10px;","native-scrollbar":!1,style:{height:"100%"}},{default:a(()=>[n(Ge,{items:e(i)},{default:a(p=>[n(Nn,{id:l.id,noteId:p.item},null,8,["id","noteId"])]),_:1},8,["items"])]),_:1}))}const Sn={components:{NotesIcon:Ve}},Un=m(y(g({},Sn),{props:{id:null},setup:In}));async function Cn(l){let t,r;const s=ae(),o=te(),i=R(),d=s.params,c=([t,r]=E(()=>i.state.api.materials.get(d.id)),t=await t,r(),t);return document.title=`${c.metadata.name} - Paperead`,(p,f)=>(u(),_($e,null,{header:a(()=>[n(e(ge),{onBack:f[0]||(f[0]=()=>e(o).back())},{title:a(()=>[k(w(e(c).metadata.name),1)]),header:a(()=>[n(e(ve),null,{default:a(()=>[n(xe),n(We,{id:e(c).id},null,8,["id"])]),_:1})]),avatar:a(()=>[n(e(he),null,{default:a(()=>[n(e(x),null,{default:a(()=>[n(e(Y))]),_:1})]),_:1})]),extra:a(()=>[n(Je,{data:e(c)},null,8,["data"])]),footer:a(()=>[n(ce,{data:e(c).metadata},null,8,["data"])]),_:1})]),default:a(()=>[n(e(I),{style:{height:"100%"}},{default:a(()=>[n(e(Pe),{type:"segment",style:{height:"100%"}},{default:a(()=>[n(e(ue),{name:"description",tab:"Description",style:{height:"calc(100% - 52px)"}},{default:a(()=>[(u(),_(q,null,{default:a(()=>[n(Ze,{data:e(c)},null,8,["data"])]),fallback:a(()=>[n(e(me),{text:"",repeat:10})]),_:1}))]),_:1}),n(e(ue),{name:"notes",tab:"Notes",style:{height:"calc(100% - 52px)"}},{default:a(()=>[n(Un,{id:e(d).id},null,8,["id"])]),_:1})]),_:1})]),_:1})]),_:1}))}const jn={components:{MaterialIcon:Y,NotesIcon:Ve}},Tn=m(y(g({},jn),{setup:Cn}));var Mn=P(Tn,[["__scopeId","data-v-3b2aa29d"]]);function Ln(l){return(t,r)=>(u(),_(e(fe),null,{default:a(()=>[n(e(G),{to:`/${l.id}/${l.noteId}`},{default:a(()=>[n(e(x),null,{default:a(()=>[n(e(de))]),_:1}),k(" "+w(l.noteId),1)]),_:1},8,["to"])]),_:1}))}const Rn={components:{NoteIcon:de}},Pn=m(y(g({},Rn),{props:{id:null,noteId:null},setup:Ln}));async function Dn(l){let t,r;const s=ae(),o=te(),i=R(),d=s.params,c=([t,r]=E(()=>i.state.api.materials.notes(d.id).get(d.noteId)),t=await t,r(),t),p=([t,r]=E(()=>i.state.api.materials.get(d.id)),t=await t,r(),t);return document.title=`${c.metadata.name} - ${p.metadata.name} - Paperead`,(f,v)=>(u(),_($e,null,{header:a(()=>[n(e(ge),{onBack:v[0]||(v[0]=()=>e(o).back())},{title:a(()=>[k(w(e(c).metadata.name),1)]),header:a(()=>[n(e(ve),null,{default:a(()=>[n(xe),n(We,{id:e(d).id},null,8,["id"]),n(Pn,{id:e(d).id,"note-id":e(c).id},null,8,["id","note-id"])]),_:1})]),avatar:a(()=>[n(e(he),null,{default:a(()=>[n(e(x),null,{default:a(()=>[n(e(de))]),_:1})]),_:1})]),extra:a(()=>[n(Je,{data:e(c)},null,8,["data"])]),footer:a(()=>[n(ce,{data:e(c).metadata},null,8,["data"])]),_:1})]),default:a(()=>[n(e(I),{style:{height:"100%"}},{default:a(()=>[(u(),_(q,null,{default:a(()=>[n(Ze,{data:e(c)},null,8,["data"])]),fallback:a(()=>[n(e(me),{text:"",repeat:10})]),_:1}))]),_:1})]),_:1}))}const En={components:{NoteIcon:de}},On=m(y(g({},En),{setup:Dn}));var zn=P(On,[["__scopeId","data-v-3b441506"]]);const Bn=[{path:"/",component:Ga,meta:{title:"Home - Paperead"}},{path:"/:id",component:Mn,meta:{title:"Loading... - Paperead"}},{path:"/:id/:noteId",component:zn,meta:{title:"Loading... - Loading... - Paperead"}},{path:"/:path*",component:Qa,meta:{title:"Not found - Paperead"}}],Qe=Yt({history:ea(),routes:Bn});Qe.beforeEach((l,t)=>(l.path==t.path||(document.title=l.meta.title.toString()),!0));const Xe=ta(da);Xe.use(Qe).use(oa,qe);Xe.mount("#app");
